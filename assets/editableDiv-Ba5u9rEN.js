import{Bt as price_tag_default,Fn as openBlock,H as ElDivider,It as plus_default,Jn as withCtx,Mr as toDisplayString,Rn as renderList,Rr as __toESM,Sn as createVNode,Wn as useModel,X as ElTag,_n as createBlock,bt as delete_default,dn as withModifiers,en as ElIcon,er as ref,fn as Fragment,gn as createBaseVNode,jt as memo_default,kn as mergeModels,lt as ElInput,nn as _plugin_vue_export_helper_default,or as unref,tt as ElButton,un as withKeys,vn as createCommentVNode,wn as defineComponent,xn as createTextVNode,yn as createElementBlock}from"./index-BSx7YI45.js";/* empty css            */import"./css-De1qXSl6.js";/* empty css            *//* empty css            *//* empty css            *//* empty css            */var editor_default=_plugin_vue_export_helper_default(defineComponent({__name:`editor`,props:{matchList:{default:[]},matchListModifiers:{}},emits:mergeModels([`updateMatchList`],[`update:matchList`]),setup(e,{expose:n,emit:r}){let i=r,a=useModel(e,`matchList`),o=ref(null),s=ref(!1),c=()=>{s.value=!0},u=()=>{s.value=!1,o.value&&(_(),a.value.forEach(e=>g(e.matchLabel)))},d=e=>{e.preventDefault()},f=e=>{e.preventDefault()},m=()=>document.createTextNode(`​`),g=e=>{let t=o.value;if(!t)return;let n=window.getSelection();if(!n||n.rangeCount===0)return;let r=n.getRangeAt(0);t.contains(r.commonAncestorContainer)||(t.focus(),r=document.createRange(),r.selectNodeContents(t),r.collapse(!1)),r.deleteContents();let s=m(),c=m(),l=document.createElement(`span`);l.className=`matchItem`,l.contentEditable=`false`,l.dataset.character=e,l.innerHTML=`${e}<span class="remove-btn">×</span>`,l.querySelector(`.remove-btn`)?.addEventListener(`click`,e=>{e.stopPropagation();let t=l.dataset.character,n=a.value.findIndex(e=>e.matchLabel===t);n!==-1&&a.value.splice(n,1),i(`updateMatchList`)});let u=document.createDocumentFragment();u.appendChild(s),u.appendChild(l),u.appendChild(c),r.insertNode(u),r.setStartAfter(c),r.setEndAfter(c),n.removeAllRanges(),n.addRange(r),t.scrollTop=t.scrollHeight},_=()=>{o.value&&(o.value.innerHTML=``)};return n({insertMatch:g,clearValue:_}),(e,n)=>(openBlock(),createElementBlock(`div`,{ref_key:`inputBoxRef`,ref:o,contenteditable:`true`,id:`editor-box`,placeholder:`请插入`,class:`dark:!border-dark-border`,"on:beforeInput":d,onKeydown:f,onCompositionstart:c,onCompositionend:u,onPaste:n[0]||=withModifiers(()=>{},[`prevent`])},null,544))}}),[[`__scopeId`,`data-v-e6381aab`]]),_hoisted_1={class:`demo-card tag-studio-container`},_hoisted_2={class:`demo-content`},_hoisted_3={class:`studio-layout p-8 h-full flex flex-col gap-8`},_hoisted_4={class:`controls-area flex flex-wrap items-center gap-6 p-6 bg-white rounded-2xl border border-slate-100 shadow-sm`},_hoisted_5={class:`control-group`},_hoisted_6={class:`flex flex-wrap gap-2`},_hoisted_7={class:`control-group flex-1 min-width-[240px]`},_hoisted_8={class:`flex gap-2`},_hoisted_9={class:`editor-area flex-1 flex flex-col min-h-0`},_hoisted_10={class:`area-header flex items-center justify-between mb-4`},_hoisted_11={class:`text-sm font-bold text-slate-700 flex items-center gap-2`},_hoisted_12={class:`flex gap-2`},_hoisted_13={class:`editor-viewport flex-1 bg-white rounded-2xl border border-slate-200 shadow-inner overflow-hidden flex flex-col`},_hoisted_14={class:`viewport-toolbar px-4 py-2 border-b border-slate-50 bg-slate-50/30 flex justify-end`},_hoisted_15={class:`flex-1 overflow-auto p-6`},editableDiv_default=_plugin_vue_export_helper_default(defineComponent({__name:`index`,setup(s){let l=[`香蕉`,`西瓜`,`葡萄`,`荔枝`,`橘子`],p=ref([]),v=ref(),y=ref(``),b=e=>{e&&(p.value.push({matchLabel:e}),v.value.insertMatch(e),y.value=``)},x=()=>{v.value.clearValue(),p.value.forEach(e=>{v.value.insertMatch(e.matchLabel)})},S=()=>{v.value.clearValue(),p.value=[]};return(s,h)=>{let C=ElButton,w=ElDivider,T=ElIcon,E=ElInput,D=ElTag;return openBlock(),createElementBlock(`div`,_hoisted_1,[h[8]||=createBaseVNode(`div`,{class:`demo-info`},[createBaseVNode(`h4`,{class:`title`},`智能标签编辑工坊`),createBaseVNode(`p`,{class:`desc`},`基于 contenteditable 的富文本标签编辑器，支持自定义实体插入与动态同步`)],-1),createBaseVNode(`div`,_hoisted_2,[createBaseVNode(`div`,_hoisted_3,[createBaseVNode(`section`,_hoisted_4,[createBaseVNode(`div`,_hoisted_5,[h[4]||=createBaseVNode(`span`,{class:`text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block`},`快捷实体`,-1),createBaseVNode(`div`,_hoisted_6,[(openBlock(),createElementBlock(Fragment,null,renderList(l,e=>createVNode(C,{key:e,size:`small`,round:``,class:`hover:!border-indigo-400 hover:!text-indigo-600 transition-all`,onClick:t=>b(e)},{default:withCtx(()=>[createTextVNode(toDisplayString(e),1)]),_:2},1032,[`onClick`])),64))])]),createVNode(w,{direction:`vertical`,class:`!h-12 hidden md:block`}),createBaseVNode(`div`,_hoisted_7,[h[6]||=createBaseVNode(`span`,{class:`text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block`},`自定义插入`,-1),createBaseVNode(`div`,_hoisted_8,[createVNode(E,{modelValue:y.value,"onUpdate:modelValue":h[0]||=e=>y.value=e,modelModifiers:{trim:!0},placeholder:`键入内容后回车...`,class:`premium-input`,onKeyup:h[1]||=withKeys(e=>b(y.value),[`enter`])},{prefix:withCtx(()=>[createVNode(T,null,{default:withCtx(()=>[createVNode(unref(price_tag_default))]),_:1})]),_:1},8,[`modelValue`]),createVNode(C,{type:`primary`,icon:unref(plus_default),onClick:h[2]||=e=>b(y.value),round:``},{default:withCtx(()=>h[5]||=[createTextVNode(`插入`)]),_:1},8,[`icon`])])])]),createBaseVNode(`section`,_hoisted_9,[createBaseVNode(`div`,_hoisted_10,[createBaseVNode(`h5`,_hoisted_11,[createVNode(T,null,{default:withCtx(()=>[createVNode(unref(memo_default))]),_:1}),h[7]||=createTextVNode(` 实时编辑区域 `)]),createBaseVNode(`div`,_hoisted_12,[p.value.length?(openBlock(),createBlock(D,{key:0,effect:`plain`,round:``,size:`small`,type:`info`},{default:withCtx(()=>[createTextVNode(`已检测到 `+toDisplayString(p.value.length)+` 个实体`,1)]),_:1})):createCommentVNode(``,!0)])]),createBaseVNode(`div`,_hoisted_13,[createBaseVNode(`header`,_hoisted_14,[createVNode(C,{icon:unref(delete_default),circle:``,size:`small`,type:`danger`,plain:``,onClick:S},null,8,[`icon`])]),createBaseVNode(`main`,_hoisted_15,[createVNode(editor_default,{ref_key:`editorRef`,ref:v,matchList:p.value,"onUpdate:matchList":h[3]||=e=>p.value=e,onUpdateMatchList:x},null,8,[`matchList`])])])])])])])}}}),[[`__scopeId`,`data-v-6bd0d915`]]);export{editableDiv_default as default};