import{Pr as __commonJSMin}from"./index-CmCMrn0J.js";import{t as require_leaflet_src}from"./leaflet-src-Dhv41rnb.js";var require_Control_MiniMap=__commonJSMin(((e,n)=>{(function(r,i){typeof define==`function`&&define.amd?define([`leaflet`],r):typeof e==`object`&&(n.exports=r(require_leaflet_src())),i!==void 0&&i.L&&(i.L.Control.MiniMap=r(L),i.L.control.minimap=function(e,t){return new i.L.Control.MiniMap(e,t)})})(function(e){let t=e.Control.extend({includes:e.Evented?e.Evented.prototype:e.Mixin.Events,options:{position:`bottomright`,toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:`#ff7800`,weight:1,interactive:!1},shadowRectOptions:{color:`#000000`,weight:1,interactive:!1,opacity:0,fillOpacity:0},strings:{hideText:`Hide MiniMap`,showText:`Show MiniMap`},mapOptions:{}},initialize:function(t,n){e.Util.setOptions(this,n),this.options.aimingRectOptions.interactive=!1,this.options.shadowRectOptions.interactive=!1,this._layer=t},onAdd:function(t){this._mainMap=t,this._container=e.DomUtil.create(`div`,`leaflet-control-minimap`),this._container.style.width=this.options.width+`px`,this._container.style.height=this.options.height+`px`,e.DomEvent.disableClickPropagation(this._container),e.DomEvent.on(this._container,`mousewheel`,e.DomEvent.stopPropagation);let n={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?`center`:!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?`center`:!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?`center`:!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:t.options.crs};return n=e.Util.extend(this.options.mapOptions,n),this._miniMap=new e.Map(this._container,n),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(e.Util.bind(function(){this._aimingRect=e.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=e.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on(`moveend`,this._onMainMapMoved,this),this._mainMap.on(`move`,this._onMainMapMoving,this),this._miniMap.on(`movestart`,this._onMiniMapMoveStarted,this),this._miniMap.on(`move`,this._onMiniMapMoving,this),this._miniMap.on(`moveend`,this._onMiniMapMoved,this)},this)),this._container},addTo:function(t){e.Control.prototype.addTo.call(this,t);let n=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(n,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(e){this._mainMap.off(`moveend`,this._onMainMapMoved,this),this._mainMap.off(`move`,this._onMainMapMoving,this),this._miniMap.off(`moveend`,this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(e){this._miniMap.removeLayer(this._layer),this._layer=e,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton(``,this._toggleButtonInitialTitleText(),`leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-`+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+`px`,this._toggleDisplayButton.style.height=this.options.collapsedHeight+`px`},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(t,n,r,i,a,o){let s=e.DomUtil.create(`a`,r,i);s.innerHTML=t,s.href=`#`,s.title=n;let c=e.DomEvent.stopPropagation;return e.DomEvent.on(s,`click`,c).on(s,`mousedown`,c).on(s,`dblclick`,c).on(s,`click`,e.DomEvent.preventDefault).on(s,`click`,a,o),s},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(e){e!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+`px`,this._container.style.height=this.options.collapsedHeight+`px`,this._toggleDisplayButton.className+=` minimized-`+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display=`none`,this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+`px`,this._container.style.height=this.options.height+`px`,this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace(`minimized-`+this.options.position,``),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display=`block`,this._minimized=!1,this._onToggle()},_onMainMapMoved:function(e){if(this._miniMapMoving)this._miniMapMoving=!1;else{let e=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(e){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(e){if(!this.options.centerFixed){let e=this._aimingRect.getBounds();this._lastAimingRectPosition={sw:this._miniMap.latLngToContainerPoint(e.getSouthWest()),ne:this._miniMap.latLngToContainerPoint(e.getNorthEast())}}},_onMiniMapMoving:function(t){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new e.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(e){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){let e=this.options.zoomLevelFixed;return this._isDefined(e)&&this._isInteger(e)},_decideZoom:function(e){if(!this._isZoomLevelFixed()){if(e)return this._mainMap.getZoom()+this.options.zoomLevelOffset;{let e=this._miniMap.getZoom()-this._mainMap.getZoom(),t=this._miniMap.getZoom()-this.options.zoomLevelOffset,n;return e>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(n=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):n=this._mainMap.getZoom():n=t,this._lastMiniMapZoom=this._miniMap.getZoom(),n}}else if(e)return this.options.zoomLevelFixed;else return this._mainMap.getZoom()},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(e){return typeof e==`number`},_isDefined:function(e){return e!==void 0},_onToggle:function(){e.Util.requestAnimFrame(function(){e.DomEvent.on(this._container,`transitionend`,this._fireToggleEvents,this),e.Browser.any3d||e.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){e.DomEvent.off(this._container,`transitionend`,this._fireToggleEvents,this);let t={minimized:this._minimized};this.fire(this._minimized?`minimize`:`restore`,t),this.fire(`toggle`,t)}});return e.Map.mergeOptions({miniMapControl:!1}),e.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=new t().addTo(this))}),t},window)}));export default require_Control_MiniMap();