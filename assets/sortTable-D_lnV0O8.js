import{$t as _plugin_vue_export_helper_default,An as nextTick,C as ElTableColumn,J as ElTag,Jn as watchEffect,Lr as toDisplayString,Mn as onMounted,Nn as onUnmounted,Pn as openBlock,Rt as rank_default,S as ElTable,Sn as defineComponent,Ur as __toESM,X as ElRadioGroup,Y as ElRadioButton,Yn as withCtx,Zt as ElIcon,bn as createVNode,dr as unref,g as ElMessage,gn as createElementBlock,i as nanoid,ir as ref,pn as createBaseVNode,r as sortable_esm_default,yn as createTextVNode}from"./index-DzasR-yf.js";/* empty css            *//* empty css            *//* empty css            */import"./css-pkVQ7h14.js";/* empty css            *//* empty css            *//* empty css            *//* empty css            *//* empty css            */const useDragTable=e=>{let v=ref(),y=ref(``),x=ref([]),S,w=()=>{if(!x.value||!v.value)return;ElMessage.warning(`初始化`);let _=e?.type&&e.type===`custom-table`?v.value:v.value.$el.querySelector(`.el-table__body-wrapper tbody`),y=e?.handle?e.handle:`.el-table__row`;return sortable_esm_default.create(_,{animation:100,handle:y,onEnd(e){let{oldIndex:_,newIndex:v}=e,y=x.value.splice(_,1)[0];x.value.splice(v,0,y),x.value.forEach(e=>{e.id||=nanoid(8)})}})};return watchEffect(()=>{y.value&&S&&S.destroy(),nextTick(()=>{S=w()})}),onUnmounted(()=>{S&&S.destroy()}),{dragWrapperRef:v,dragDataKey:y,dragData:x}};var _hoisted_1={class:`demo-card`},_hoisted_2={class:`demo-header`},_hoisted_3={class:`actions`},_hoisted_4={class:`table-wrapper`},_hoisted_5={class:`user-name`},sortTable_default=_plugin_vue_export_helper_default(defineComponent({__name:`sortTable`,setup(e){let{dragWrapperRef:_,dragDataKey:b,dragData:C}=useDragTable();ref([]);let T=ref([{name:`张三`,value:`1`},{name:`李四`,value:`2`},{name:`小帅`,value:`3`}]),E=ref([{name:`哪吒`,value:`3`},{name:`敖丙`,value:`4`},{name:`申公豹`,value:`6`}]),D=ref(`data1`),O=e=>{e===`data1`?A():M()},A=()=>{b.value=`name`,C.value=T.value},M=()=>{b.value=`name`,C.value=E.value};return onMounted(()=>{A()}),(e,b)=>{let S=ElRadioButton,T=ElRadioGroup,E=ElIcon,k=ElTableColumn,A=ElTag,j=ElTable;return openBlock(),createElementBlock(`div`,_hoisted_1,[createBaseVNode(`div`,_hoisted_2,[b[3]||=createBaseVNode(`div`,{class:`header-content`},[createBaseVNode(`h4`,{class:`title`},`交互式可拖拽表格`),createBaseVNode(`p`,{class:`desc`},`基于 SortableJS 实现，支持跨数据集切换并保持拖拽功能`)],-1),createBaseVNode(`div`,_hoisted_3,[createVNode(T,{modelValue:D.value,"onUpdate:modelValue":b[0]||=e=>D.value=e,onChange:O},{default:withCtx(()=>[createVNode(S,{label:`data1`},{default:withCtx(()=>b[1]||=[createTextVNode(`数据集 A`)]),_:1}),createVNode(S,{label:`data2`},{default:withCtx(()=>b[2]||=[createTextVNode(`数据集 B`)]),_:1})]),_:1},8,[`modelValue`])])]),createBaseVNode(`div`,_hoisted_4,[createVNode(j,{data:unref(C),ref_key:`dragWrapperRef`,ref:_,"row-key":`name`,border:``,stripe:``,"highlight-current-row":``},{default:withCtx(()=>[createVNode(k,{label:`排序`,width:`80`,align:`center`},{default:withCtx(()=>[createVNode(E,{class:`drag-handle`},{default:withCtx(()=>[createVNode(unref(rank_default))]),_:1})]),_:1}),createVNode(k,{label:`姓名`,prop:`name`},{default:withCtx(({row:e})=>[createBaseVNode(`span`,_hoisted_5,toDisplayString(e.name),1)]),_:1}),createVNode(k,{label:`权重/数量`,prop:`value`,align:`center`},{default:withCtx(({row:e})=>[createVNode(A,{type:e.value>3?`success`:`info`},{default:withCtx(()=>[createTextVNode(toDisplayString(e.value),1)]),_:2},1032,[`type`])]),_:1})]),_:1},8,[`data`])])])}}}),[[`__scopeId`,`data-v-7a99c773`]]);export{sortTable_default as default};