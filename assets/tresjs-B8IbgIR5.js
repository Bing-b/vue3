import{$n as e,At as t,Bt as n,Dt as r,Ft as i,Hn as a,Ht as o,Nt as s,Ot as c,Pt as l,Rt as u,S as d,St as f,Tt as p,Vt as m,Wn as h,Wt as g,_n as _,_t as v,an as y,bn as b,bt as x,cn as S,ct as C,en as w,fn as T,hn as E,in as D,jt as O,ln as k,mn as A,nn as j,pn as ee,qt as te,rn as M,un as N,wt as ne,x as re,xn as P,xt as F,yn as ie}from"./index-Ug8tEEVv.js";/* empty css            *//* empty css            */import{A as ae,C as oe,D as se,E as ce,O as le,T as ue,b as de,c as fe,f as pe,g as me,h as he,j as ge,k as _e,l as I,m as ve,n as ye,o as be,p as xe,s as Se,t as Ce,v as we,w as Te,x as Ee,y as De}from"./OrbitControls-DU7JLmsd.js";function L(e){return k()?(T(e),!0):!1}function R(){let e=new Set,t=t=>{e.delete(t)};return{on:n=>{e.add(n);let r=()=>t(n);return L(r),{off:r}},off:t,trigger:(...t)=>Promise.all(Array.from(e).map(e=>e(...t))),clear:()=>{e.clear()}}}var Oe=new WeakMap,ke=(...e)=>{let t=e[0],n=O()?.proxy;if(n==null&&!l())throw Error(`injectLocal must be called in setup`);return n&&Oe.has(n)&&t in Oe.get(n)?Oe.get(n)[t]:i(...e)},z=typeof window<`u`&&typeof document<`u`;typeof WorkerGlobalScope<`u`&&globalThis instanceof WorkerGlobalScope;var Ae=e=>e!=null,je=Object.prototype.toString,Me=e=>je.call(e)===`[object Object]`,Ne=()=>{};function Pe(e,t){function n(...n){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(r).catch(i)})}return n}function Fe(e,t={}){let n,r,i=Ne,a=e=>{clearTimeout(e),i(),i=Ne},o;return s=>{let c=b(e),l=b(t.maxWait);return n&&a(n),c<=0||l!==void 0&&l<=0?(r&&=(a(r),null),Promise.resolve(s())):new Promise((e,u)=>{i=t.rejectOnCancel?u:e,o=s,l&&!r&&(r=setTimeout(()=>{n&&a(n),r=null,e(o())},l)),n=setTimeout(()=>{r&&a(r),r=null,e(s())},c)})}}function Ie(e){return e.endsWith(`rem`)?Number.parseFloat(e)*16:Number.parseFloat(e)}function Le(e,t,n=!1){return t.reduce((t,r)=>(r in e&&(!n||e[r]!==void 0)&&(t[r]=e[r]),t),{})}function Re(e){return e||O()}function B(e){return Array.isArray(e)?e:[e]}function ze(e,t=200,n={}){return Pe(Fe(t,n),e)}function Be(e,t=200,n={}){let r=E(e.value),i=ze(()=>{r.value=e.value},t,n);return j(e,()=>i()),r}function Ve(e,t={}){if(!N(e))return ie(e);let n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(let r in e.value)n[r]=S(()=>({get(){return e.value[r]},set(n){if(b(t.replaceRef)??!0)if(Array.isArray(e.value)){let t=[...e.value];t[r]=n,e.value=t}else{let t={...e.value,[r]:n};Object.setPrototypeOf(t,Object.getPrototypeOf(e.value)),e.value=t}else e.value[r]=n}}));return n}var V=b;function He(e,t=!0,r){Re()?n(e,r):t?e():u(e)}function Ue(e,t=1e3,n={}){let{immediate:r=!0,immediateCallback:i=!1}=n,a=null,o=_(!1);function s(){a&&=(clearInterval(a),null)}function c(){o.value=!1,s()}function l(){let n=b(t);n<=0||(o.value=!0,i&&e(),s(),o.value&&(a=setInterval(e,n)))}return r&&z&&l(),(N(t)||typeof t==`function`)&&L(j(t,()=>{o.value&&z&&l()})),L(c),{isActive:o,pause:c,resume:l}}function We(e,t,n){return j(e,t,{...n,immediate:!0})}var H=z?window:void 0;z&&window.document,z&&window.navigator,z&&window.location;function U(e){let t=b(e);return t?.$el??t}function W(...e){let t=[],n=()=>{t.forEach(e=>e()),t.length=0},r=(e,t,n,r)=>(e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)),i=x(()=>{let t=B(b(e[0])).filter(e=>e!=null);return t.every(e=>typeof e!=`string`)?t:void 0}),a=We(()=>[i.value?.map(e=>U(e))??[H].filter(e=>e!=null),B(b(i.value?e[1]:e[0])),B(P(i.value?e[2]:e[1])),b(i.value?e[3]:e[2])],([e,i,a,o])=>{if(n(),!e?.length||!i?.length||!a?.length)return;let s=Me(o)?{...o}:o;t.push(...e.flatMap(e=>i.flatMap(t=>a.map(n=>r(e,t,n,s)))))},{flush:`post`});return L(n),()=>{a(),n()}}function Ge(){let e=_(!1),t=O();return t&&n(()=>{e.value=!0},t),e}function G(e){let t=Ge();return x(()=>(t.value,!!e()))}function Ke(e,t,n={}){let{window:r=H,...i}=n,a,o=G(()=>r&&`MutationObserver`in r),s=()=>{a&&=(a.disconnect(),void 0)},c=x(()=>{let t=B(b(e)).map(U).filter(Ae);return new Set(t)}),l=j(()=>c.value,e=>{s(),o.value&&e.size&&(a=new MutationObserver(t),e.forEach(e=>a.observe(e,i)))},{immediate:!0,flush:`post`}),u=()=>a?.takeRecords(),d=()=>{l(),s()};return L(d),{isSupported:o,stop:d,takeRecords:u}}function qe(e,t={}){let{immediate:n=!0,fpsLimit:r=void 0,window:i=H,once:a=!1}=t,o=_(!1),s=x(()=>r?1e3/b(r):null),c=0,l=null;function u(t){if(!o.value||!i)return;c||=t;let n=t-c;if(s.value&&n<s.value){l=i.requestAnimationFrame(u);return}if(c=t,e({delta:n,timestamp:t}),a){o.value=!1,l=null;return}l=i.requestAnimationFrame(u)}function d(){!o.value&&i&&(o.value=!0,c=0,l=i.requestAnimationFrame(u))}function f(){o.value=!1,l!=null&&i&&(i.cancelAnimationFrame(l),l=null)}return n&&d(),L(f),{isActive:A(o),pause:f,resume:d}}var Je=Symbol(`vueuse-ssr-width`);function Ye(){let e=l()?ke(Je,null):null;return typeof e==`number`?e:void 0}function Xe(e,t={}){let{window:n=H,ssrWidth:r=Ye()}=t,i=G(()=>n&&`matchMedia`in n&&typeof n.matchMedia==`function`),a=_(typeof r==`number`),o=_(),s=_(!1);return M(()=>{if(a.value){a.value=!i.value,s.value=b(e).split(`,`).some(e=>{let t=e.includes(`not all`),n=e.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),i=e.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),a=!!(n||i);return n&&a&&(a=r>=Ie(n[1])),i&&a&&(a=r<=Ie(i[1])),t?!a:a});return}i.value&&(o.value=n.matchMedia(b(e)),s.value=o.value.matches)}),W(o,`change`,e=>{s.value=e.matches},{passive:!0}),x(()=>s.value)}function Ze(e={}){let{window:t=H}=e,n=_(1),r=Xe(()=>`(resolution: ${n.value}dppx)`,e),i=Ne;return t&&(i=We(r,()=>n.value=t.devicePixelRatio)),{pixelRatio:A(n),stop:i}}function Qe(e,t,n={}){let{window:r=H,...i}=n,a,o=G(()=>r&&`ResizeObserver`in r),s=()=>{a&&=(a.disconnect(),void 0)},c=j(x(()=>{let t=b(e);return Array.isArray(t)?t.map(e=>U(e)):[U(t)]}),e=>{if(s(),o.value&&r){a=new ResizeObserver(t);for(let t of e)t&&a.observe(t,i)}},{immediate:!0,flush:`post`}),l=()=>{s(),c()};return L(l),{isSupported:o,stop:l}}function $e(e,t={}){let{reset:n=!0,windowResize:r=!0,windowScroll:i=!0,immediate:a=!0,updateTiming:o=`sync`}=t,s=_(0),c=_(0),l=_(0),u=_(0),d=_(0),f=_(0),p=_(0),m=_(0);function h(){let t=U(e);if(!t){n&&(s.value=0,c.value=0,l.value=0,u.value=0,d.value=0,f.value=0,p.value=0,m.value=0);return}let r=t.getBoundingClientRect();s.value=r.height,c.value=r.bottom,l.value=r.left,u.value=r.right,d.value=r.top,f.value=r.width,p.value=r.x,m.value=r.y}function g(){o===`sync`?h():o===`next-frame`&&requestAnimationFrame(()=>h())}return Qe(e,g),j(()=>U(e),e=>!e&&g()),Ke(e,g,{attributeFilter:[`style`,`class`]}),i&&W(`scroll`,g,{capture:!0,passive:!0}),r&&W(`resize`,g,{passive:!0}),He(()=>{a&&g()}),{height:s,bottom:c,left:l,right:u,top:d,width:f,x:p,y:m,update:g}}function et(e,t={width:0,height:0},n={}){let{window:r=H,box:i=`content-box`}=n,a=x(()=>(U(e)?.namespaceURI)?.includes(`svg`)),o=_(t.width),s=_(t.height),{stop:c}=Qe(e,([t])=>{let n=i===`border-box`?t.borderBoxSize:i===`content-box`?t.contentBoxSize:t.devicePixelContentBoxSize;if(r&&a.value){let t=U(e);if(t){let e=t.getBoundingClientRect();o.value=e.width,s.value=e.height}}else if(n){let e=B(n);o.value=e.reduce((e,{inlineSize:t})=>e+t,0),s.value=e.reduce((e,{blockSize:t})=>e+t,0)}else o.value=t.contentRect.width,s.value=t.contentRect.height},n);He(()=>{let n=U(e);n&&(o.value=`offsetWidth`in n?n.offsetWidth:t.width,s.value=`offsetHeight`in n?n.offsetHeight:t.height)});let l=j(()=>U(e),e=>{o.value=e?t.width:0,s.value=e?t.height:0});function u(){c(),l()}return{width:o,height:s,stop:u}}function tt(e){let t=_(0);if(typeof performance>`u`)return t;let n=e?.every??10,r=performance.now(),i=0;return qe(()=>{if(i+=1,i>=n){let e=performance.now(),n=e-r;t.value=Math.round(1e3/(n/i)),r=e,i=0}}),t}function nt(e={}){let t=E(),n=G(()=>typeof performance<`u`&&`memory`in performance);if(n.value){let{interval:n=1e3}=e;Ue(()=>{t.value=performance.memory},n,{immediate:e.immediate,immediateCallback:e.immediateCallback})}return{isSupported:n,memory:t}}var rt={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},it=Object.keys(rt);function at(e={}){let{target:t=H}=e,n=_(!1),r=E(e.initialValue||{});Object.assign(r.value,rt,r.value);let i=t=>{n.value=!0,!(e.pointerTypes&&!e.pointerTypes.includes(t.pointerType))&&(r.value=Le(t,it,!1))};if(t){let e={passive:!0};W(t,[`pointerdown`,`pointermove`,`pointerup`],i,e),W(t,`pointerleave`,()=>n.value=!1,e)}return{...Ve(r),isInside:n}}function ot(e={}){let{window:t=H,initialWidth:n=1/0,initialHeight:r=1/0,listenOrientation:i=!0,includeScrollbar:a=!0,type:o=`inner`}=e,s=_(n),c=_(r),l=()=>{if(t)if(o===`outer`)s.value=t.outerWidth,c.value=t.outerHeight;else if(o===`visual`&&t.visualViewport){let{width:e,height:n,scale:r}=t.visualViewport;s.value=Math.round(e*r),c.value=Math.round(n*r)}else a?(s.value=t.innerWidth,c.value=t.innerHeight):(s.value=t.document.documentElement.clientWidth,c.value=t.document.documentElement.clientHeight)};l(),He(l);let u={passive:!0};return W(`resize`,l,u),t&&o===`visual`&&t.visualViewport&&W(t.visualViewport,`resize`,l,u),i&&j(Xe(`(orientation: portrait)`),()=>l()),{width:s,height:c}}var st=Object.defineProperty,ct=(e,t,n)=>t in e?st(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lt=(e,t,n)=>ct(e,typeof t==`symbol`?t:t+``,n),ut={name:`@tresjs/core`,type:`module`,version:`4.3.5`,packageManager:`pnpm@10.6.3`,description:`Declarative ThreeJS using Vue Components`,author:`Alvaro Saburido <hola@alvarosaburido.dev> (https://github.com/alvarosabu/)`,license:`MIT`,repository:{type:`git`,url:`git+https://github.com/Tresjs/tres.git`},keywords:[`vue`,`3d`,`threejs`,`three`,`threejs-vue`],sideEffects:!1,exports:{".":{types:`./dist/index.d.ts`,import:`./dist/tres.js`,require:`./dist/tres.umd.cjs`},"./components":{types:`./dist/src/components/index.d.ts`},"./composables":{types:`./dist/src/composables/index.d.ts`},"./types":{types:`./dist/src/types/index.d.ts`},"./utils":{types:`./dist/src/utils/index.d.ts`},"./*":`./*`},main:`./dist/tres.js`,module:`./dist/tres.js`,types:`./dist/index.d.ts`,files:[`*.d.ts`,`dist`],publishConfig:{access:`public`},scripts:{dev:`pnpm --filter='./playground/vue' dev`,"dev:nuxt":`pnpm --filter='./playground/nuxt' dev`,build:`vite build`,test:`vitest`,"test:ci":`vitest run`,"test:ui":`vitest --ui --coverage.enabled=true`,release:`release-it`,coverage:`vitest run --coverage`,lint:`eslint .`,"lint:fix":`eslint . --fix`,"docs:dev":`vitepress dev docs`,"docs:build":`vitepress build docs`,"docs:serve":`vitepress serve docs`,"docs:preview":`vitepress preview docs`,"docs:contributors":`esno scripts/update-contributors.ts`},peerDependencies:{three:`>=0.133`,vue:`>=3.4`},dependencies:{"@alvarosabu/utils":`^3.2.0`,"@vue/devtools-api":`^6.6.3`,"@vueuse/core":`^12.5.0`},devDependencies:{"@release-it/conventional-changelog":`^10.0.0`,"@stackblitz/sdk":`^1.11.0`,"@tresjs/cientos":`4.1.0`,"@tresjs/eslint-config":`^1.4.0`,"@types/three":`^0.173.0`,"@typescript-eslint/eslint-plugin":`^8.23.0`,"@typescript-eslint/parser":`^8.23.0`,"@vitejs/plugin-vue":`^5.2.1`,"@vitest/coverage-c8":`^0.33.0`,"@vitest/coverage-v8":`^3.0.5`,"@vitest/ui":`^3.0.5`,"@vue/test-utils":`^2.4.6`,eslint:`^9.19.0`,"eslint-plugin-vue":`^9.32.0`,esno:`^4.8.0`,gsap:`^3.12.7`,jsdom:`^26.0.0`,kolorist:`^1.8.0`,ohmyfetch:`^0.4.21`,pathe:`^2.0.2`,"release-it":`^18.1.2`,"rollup-plugin-analyzer":`^4.0.0`,"rollup-plugin-copy":`^3.5.0`,"rollup-plugin-visualizer":`^5.14.0`,sponsorkit:`^16.3.0`,three:`^0.173.0`,unocss:`^65.4.3`,unplugin:`^2.1.2`,"unplugin-vue-components":`^28.0.0`,vite:`^6.1.0`,"vite-plugin-banner":`^0.8.0`,"vite-plugin-dts":`4.5.0`,"vite-plugin-inspect":`^10.1.0`,"vite-plugin-require-transform":`^1.0.21`,"vite-svg-loader":`^5.1.0`,vitepress:`1.6.3`,vitest:`3.0.5`,vue:`3.5.13`,"vue-demi":`^0.14.10`}},dt=class extends he{constructor(...e){super(...e),lt(this,`type`,`HightlightMesh`),lt(this,`createTime`),this.createTime=Date.now()}onBeforeRender(){let e=(Date.now()-this.createTime)/1e3,t=1+.07*Math.sin(2.5*e);this.scale.set(t,t,t)}};function ft(e){return typeof e>`u`}function pt(e){return Array.isArray(e)}function mt(e){return typeof e==`number`}function ht(e){return typeof e==`string`}function K(e){return typeof e==`function`}function q(e){return e===Object(e)&&!pt(e)&&!K(e)}function J(e){return q(e)&&!!e.isObject3D}function gt(e){return q(e)&&!!e.isColor}function _t(e){return e!=null&&(typeof e==`string`||typeof e==`number`||gt(e))}function vt(e){return typeof e==`object`&&!!e&&`set`in e&&typeof e.set==`function`}function yt(e){return vt(e)&&`copy`in e&&typeof e.copy==`function`}function bt(e){return!!(e!=null&&e.constructor)}function xt(e){return e instanceof xe}function St(e){return q(e)&&!!e.isCamera}function Ct(e){return q(e)&&!!e.isBufferGeometry}function wt(e){return q(e)&&!!e.isMaterial}function Tt(e){return q(e)&&!!e.isLight}function Et(e){return q(e)&&!!e.isFog}function Dt(e){return q(e)&&!!e.isScene}function Ot(e){return J(e)||Ct(e)||wt(e)||Et(e)}function kt(e){return q(e)&&!!e.isPrimitive}var At=(e,t)=>{for(let n of Object.keys(t))t[n]instanceof Object&&Object.assign(t[n],At(e[n],t[n]));return Object.assign(e||{},t),e},jt=It(`html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot`);function Mt(e){return e&&e.nodeType===1}function Nt(e){return e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}var Pt=/\B([A-Z])/g;function Ft(e){return e.replace(Pt,`-$1`).toLowerCase()}function It(e,t){let n=Object.create(null),r=e.split(`,`);for(let e=0;e<r.length;e++)n[r[e]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}var Lt=(e,t)=>t?(Array.isArray(t)?t:t.match(/([^[.\]])+/g))?.reduce((e,t)=>e&&e[t],e):void 0,Rt=(e,t,n)=>{let r=Array.isArray(t)?t:t.match(/([^[.\]])+/g);r&&r.reduce((e,t,i)=>(e[t]===void 0&&(e[t]={}),i===r.length-1&&(e[t]=n),e[t]),e)};function zt(e,t){if(Mt(e)&&Mt(t)){let n=e.attributes,r=t.attributes;return n.length===r.length?Array.from(n).every(({name:e,value:n})=>t.getAttribute(e)===n):!1}if(e===t)return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i of n)if(!r.includes(i)||!zt(e[i],t[i]))return!1;return!0}function Bt(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!zt(e[n],t[n]))return!1;return!0}Array.isArray;function Vt(e,t,n,r){let i=e=>{if(e.uuid===t)return e;for(let t of e.children){let e=i(t);if(e)return e}},a=i(e);if(!a){console.warn(`Object with UUID not found in the scene.`);return}let o=a;for(let e=0;e<n.length-1;e++)if(o[n[e]]!==void 0)o=o[n[e]];else{console.warn(`Property path is not valid: ${n.join(`.`)}`);return}let s=n[n.length-1];o[s]===void 0?console.warn(`Property path is not valid: ${n.join(`.`)}`):o[s]=r}function Ht(e){let t=new me({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:2});return new dt(e.geometry.clone(),t)}function Ut(e){return`map`in e}function Wt(e){Ut(e)&&e.map&&e.map.dispose(),e.dispose()}function Gt(e){var t,n;if(e.parent&&((t=e.removeFromParent)==null||t.call(e)),delete e.__tres,[...e.children].forEach(e=>Gt(e)),!(e instanceof ce)){let t=e;e&&((n=e.dispose)==null||n.call(e)),t.geometry&&t.geometry.dispose(),Array.isArray(t.material)?t.material.forEach(e=>Wt(e)):t.material&&Wt(t.material)}}function Kt(e,t){let n=0;for(let r=0;r<e.length;r++)t(e[r],r)&&(e[n]=e[r],n++);return e.length=n,e}function qt(e,t){let n=e;if(t.includes(`-`)){let e=t.split(`-`),r=e.shift();for(;n&&e.length;)r in n?(n=n[r],r=e.shift()):r=Jt(r,e.shift());return{target:n,key:Jt(r,...e)}}else return{target:n,key:t}}function Jt(...e){return e.map((e,t)=>t===0?e:e.charAt(0).toUpperCase()+e.slice(1)).join(``)}var Yt=/-\d+$/;function Xt(e,t,n){if(ht(n)){if(Yt.test(n)){let{target:t,key:r}=qt(e,n.replace(Yt,``));if(!Array.isArray(t[r])){let e=t[r],n=[];n.__tresDetach=()=>{n.every(e=>ft(e))&&(t[r]=e)},t[r]=n}}let{target:r,key:i}=qt(e,n);t.__tres.previousAttach=r[i],r[i]=X(t)}else t.__tres.previousAttach=n(e,t)}function Zt(e,t,n){var r,i,a;if(ht(n)){let{target:r,key:i}=qt(e,n),a=t.__tres.previousAttach;a===void 0?delete r[i]:r[i]=a,`__tresDetach`in r&&r.__tresDetach()}else (i=(r=t.__tres)?.previousAttach)==null||i.call(r,e,t);(a=t.__tres)==null||delete a.previousAttach}function Y(e,t,n){let r=e;return r.__tres={type:`unknown`,eventCount:0,root:n,handlers:{},memoizedProps:{},objects:[],parent:null,previousAttach:null,...t},r.__tres.attach||(r.isMaterial?r.__tres.attach=`material`:r.isBufferGeometry?r.__tres.attach=`geometry`:r.isFog&&(r.__tres.attach=`fog`)),r}function Qt(e){let t=e?.__tres?.root;t&&t.render&&t.render.canBeInvalidated.value&&t.invalidate()}function $t(e,t,n){if(!K(e.setPixelRatio))return;let r=0;if(n&&pt(n)&&n.length>=2){let[e,i]=n;r=ve.clamp(t,e,i)}else r=mt(n)?n:t;r!==e.getPixelRatio?.call(e)&&e.setPixelRatio(r)}function en(e,t,n,r,i){let a=[...t.__tres.objects],o=X(t);if(e=X(e),o===e)return!0;let s=Y(e,t.__tres??{},i),c=t.parent??t.__tres.parent??null,l={...t.__tres.memoizedProps};delete l.object;for(let e of a)tn(e,i),nn(e,i);o.__tres.objects=[],r.remove(t);for(let[e,t]of Object.entries(l))r.patchProp(s,e,s[e],t);n(e),r.insert(t,c);for(let e of a)r.insert(e,t);return!0}function X(e){return kt(e)?(e.object.__tres=e.__tres,e.object):e}function tn(e,t){var n,r,i;let a=e.__tres?.parent||t.scene.value;e.__tres&&(e.__tres.parent=null),a&&a.__tres&&`objects`in a.__tres&&Kt(a.__tres.objects,t=>t!==e),(n=e.__tres)!=null&&n.attach?Zt(a,e,e.__tres.attach):((i=(r=e.parent)?.remove)==null||i.call(r,X(e)),e.parent=null)}function nn(e,t){var n;(n=e.traverse)==null||n.call(e,e=>{var n;t.deregisterCamera(e),(n=t.eventManager)==null||n.deregisterPointerMissedObject(e)}),t.deregisterCamera(e),Qt(e)}var rn=({sizes:e})=>{let t=E([]),n=x(()=>t.value[0]),r=e=>{let n=e instanceof Se?e:t.value.find(t=>t.uuid===e);n&&(t.value=[n,...t.value.filter(({uuid:e})=>e!==n.uuid)])};return M(()=>{e.aspectRatio.value&&t.value.forEach(t=>{!t.manual&&(t instanceof Ee||an(t))&&(t instanceof Ee?t.aspect=e.aspectRatio.value:(t.left=e.width.value*-.5,t.right=e.width.value*.5,t.top=e.height.value*.5,t.bottom=e.height.value*-.5),t.updateProjectionMatrix())})}),m(()=>{t.value=[]}),{camera:n,cameras:t,registerCamera:(e,n=!1)=>{if(St(e)){let i=e;if(t.value.some(({uuid:e})=>e===i.uuid))return;n?r(i):t.value.push(i)}},deregisterCamera:e=>{if(St(e)){let n=e;t.value=t.value.filter(({uuid:e})=>e!==n.uuid)}},setCameraActive:r}};function an(e){return e.hasOwnProperty(`isOrthographicCamera`)&&e.isOrthographicCamera}var on=`[TresJS â–² â–  â—] `;function sn(...e){typeof e[0]==`string`?e[0]=on+e[0]:e.unshift(on),console.error(...e)}function cn(...e){typeof e[0]==`string`?e[0]=on+e[0]:e.unshift(on),console.warn(...e)}function ln(e,t){}function un(){return{logError:sn,logWarning:cn,logMessage:ln}}var dn=E({}),fn=e=>Object.assign(dn.value,e);function pn(){let e=new Map,t=new Set,n=0,r=!1,i=()=>{let n=Array.from(e.entries()).sort((e,t)=>{let n=e[1].priority-t[1].priority;return n===0?e[1].addI-t[1].addI:n});t.clear(),n.forEach(e=>t.add(e[0]))},a=n=>{e.delete(n),t.delete(n)};return{on:(t,i=0)=>{e.set(t,{priority:i,addI:n++});let o=()=>a(t);return L(o),r=!0,{off:o}},off:a,trigger:(...e)=>{r&&=(i(),!1),t.forEach(t=>t(...e))},dispose:()=>{e.clear(),t.clear()},get count(){return e.size}}}function mn(){let e=!0,t=!0,n=!1,r=new fe(!1),i=E(r.running),a=E(!1),o,s=ve.generateUUID(),c=null,l=pn(),u=pn(),d=pn();S();let f={};function p(e){f=e}function m(e,t,n=0){switch(t){case`before`:return l.on(e,n);case`render`:return c||=e,u.dispose(),u.on(e);case`after`:return d.on(e,n)}}function h(){t&&(t=!1,S(),x())}function g(){t=!0,S(),cancelAnimationFrame(o)}function _(){n=!1,S()}function v(){n=!0,S()}function y(){a.value=!0}function b(){a.value=!1}function x(){if(!e){o=requestAnimationFrame(x);return}let t={delta:r.getDelta(),elapsed:r.getElapsedTime(),clock:r,camera:P(f.camera),scene:P(f.scene),renderer:P(f.renderer),raycaster:P(f.raycaster),controls:P(f.controls),invalidate:f.invalidate,advance:f.advance};i.value&&l.trigger(t),a.value||(u.count?u.trigger(t):c&&c(t)),i.value&&d.trigger(t),o=requestAnimationFrame(x)}function S(){let e=!t&&!n;r.running!==e&&(r.running?r.stop():r.start()),i.value=r.running}return{loopId:s,register:(e,t,n)=>m(e,t,n),start:h,stop:g,pause:v,resume:_,pauseRender:y,resumeRender:b,isRenderPaused:a,isActive:i,setContext:p,setReady:t=>e=t}}function hn(e){let t=0;return e.traverse(e=>{if(e.isMesh&&e.geometry&&e.type!==`HightlightMesh`){let n=e.geometry,r=n.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,i=n.index?n.index.count*Uint32Array.BYTES_PER_ELEMENT:0,a=n.attributes.normal?n.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,o=n.attributes.uv?n.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,s=r+i+a+o;t+=s}}),t}function gn(e){return(e/1024).toFixed(2)}var _n=Number.parseInt(`169`);function vn(e){return e instanceof I?e:Array.isArray(e)?new I(...e):new I(e)}var yn={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:ue,toneMapping:4,toneMappingExposure:3,shadowMap:{enabled:!0,type:2}},flat:{toneMapping:0,toneMappingExposure:1}};function bn({canvas:e,options:t,contextParts:{sizes:n,render:r,invalidate:i,advance:a}}){let o=x(()=>({alpha:V(t.alpha)??!0,depth:V(t.depth),canvas:U(e),context:V(t.context),stencil:V(t.stencil),antialias:V(t.antialias)??!0,precision:V(t.precision),powerPreference:V(t.powerPreference),premultipliedAlpha:V(t.premultipliedAlpha),preserveDrawingBuffer:V(t.preserveDrawingBuffer),logarithmicDepthBuffer:V(t.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:V(t.failIfMajorPerformanceCaveat)})),s=_(new ae(o.value));function c(){t.renderMode===`on-demand`&&i()}j(o,()=>{s.value.dispose(),s.value=new ae(o.value),c()}),j([n.width,n.height],()=>{s.value.setSize(n.width.value,n.height.value),c()},{immediate:!0}),j(()=>t.clearColor,c);let{pixelRatio:l}=Ze(),{logError:u}=un(),d=(()=>{let e=new ae,t={shadowMap:{enabled:e.shadowMap.enabled,type:e.shadowMap.type},toneMapping:e.toneMapping,toneMappingExposure:e.toneMappingExposure,outputColorSpace:e.outputColorSpace};return e.dispose(),t})(),f=V(t.renderMode);return f===`on-demand`&&i(),f===`manual`&&setTimeout(()=>{a()},100),M(()=>{let e=V(t.preset);e&&(e in yn||u(`Renderer Preset must be one of these: ${Object.keys(yn).join(`, `)}`),At(s.value,yn[e])),$t(s.value,l.value,V(t.dpr)),f===`always`&&(r.frames.value=Math.max(1,r.frames.value));let n=(t,n)=>{let r=V(t),i=()=>{if(e)return Lt(yn[e],n)};if(r!==void 0)return r;let a=i();return a===void 0?Lt(d,n):a},i=(e,t)=>Rt(s.value,t,n(e,t));i(t.shadows,`shadowMap.enabled`),i(t.toneMapping??4,`toneMapping`),i(t.shadowMapType,`shadowMap.type`),_n<150&&i(!t.useLegacyLights,`physicallyCorrectLights`),i(t.outputColorSpace,`outputColorSpace`),i(t.toneMappingExposure,`toneMappingExposure`);let a=n(t.clearColor,`clearColor`);a&&s.value.setClearColor(a?vn(a):new I(0))}),m(()=>{s.value.dispose(),s.value.forceContextLoss()}),{renderer:s}}function xn(e,t,n=10){let r=V(e)?ot():et(x(()=>V(t).parentElement)),i=A(Be(r.width,n)),a=A(Be(r.height,n));return{height:a,width:i,aspectRatio:x(()=>i.value/a.value)}}var Sn=(e,t)=>{let n=x(()=>t.renderer.value.domElement),r=_([]),{x:i,y:a}=at({target:n}),o=0,{width:s,height:c,top:l,left:u}=$e(n),d=({x:e,y:t})=>{if(n.value)return{x:(e-u.value)/s.value*2-1,y:-((t-l.value)/c.value)*2+1}},f=({x:n,y:i})=>{if(t.camera.value)return t.raycaster.value.setFromCamera(new le(n,i),t.camera.value),r.value=t.raycaster.value.intersectObjects(e.value,!0),r.value},p=e=>{let t=d({x:e?.clientX??i.value,y:e?.clientY??a.value});return t&&f(t)||[]},h=R(),g=R(),v=R(),y=R(),b=R(),S=R(),C=R(),w=R();function T(e){let t={};for(let n in e)typeof n!=`function`&&(t[n]=e[n]);return t}let E=(e,n)=>{let i=T(n),a=new _e(n?.clientX,n?.clientY,0).unproject(t.camera?.value);e.trigger({...i,intersections:r.value,unprojectedPoint:a,ray:t.raycaster?.value.ray,camera:t.camera?.value,sourceEvent:n,delta:o,stopPropagating:!1})},D,O=e=>{p(e),E(v,e),D=e},k=()=>{D&&O(D)},A,j,ee,te=e=>{A=r.value[0]?.object,o=0,j=new le(e?.clientX??i.value,e?.clientY??a.value),E(b,e)},M,N=!1,ne=e=>{e instanceof PointerEvent&&(r.value.length===0&&E(S,e),A===r.value[0]?.object&&(ee=new le(e?.clientX??i.value,e?.clientY??a.value),o=j?.distanceTo(ee),e.button===0?(E(h,e),M===r.value[0]?.object?N=!0:(M=r.value[0]?.object,N=!1)):e.button===2&&E(C,e)),E(y,e))},re=e=>{N&&=(E(g,e),M=void 0,!1)},P=e=>E(v,e),F=e=>E(w,e);return n.value.addEventListener(`pointerup`,ne),n.value.addEventListener(`pointerdown`,te),n.value.addEventListener(`pointermove`,O),n.value.addEventListener(`pointerleave`,P),n.value.addEventListener(`dblclick`,re),n.value.addEventListener(`wheel`,F),m(()=>{n!=null&&n.value&&(n.value.removeEventListener(`pointerup`,ne),n.value.removeEventListener(`pointerdown`,te),n.value.removeEventListener(`pointermove`,O),n.value.removeEventListener(`pointerleave`,P),n.value.removeEventListener(`dblclick`,re),n.value.removeEventListener(`wheel`,F))}),{intersects:r,onClick:e=>h.on(e).off,onDblClick:e=>g.on(e).off,onContextMenu:e=>C.on(e).off,onPointerMove:e=>v.on(e).off,onPointerUp:e=>y.on(e).off,onPointerDown:e=>b.on(e).off,onPointerMissed:e=>S.on(e).off,onWheel:e=>w.on(e).off,forceUpdate:k}};function Cn(e,t){if(Array.isArray(e))for(let n of e)n(t);typeof e==`function`&&e(t)}function wn(e,t,n){let r=_(),i=_();e&&(r.value=e),t&&(i.value=t);let a=e=>e.__tres?.eventCount>0,o=e=>e.children?.some(e=>o(e))||a(e),s=_((r.value?.children).filter(o)||[]);function c(e,t){let r=[];t.stopPropagation=()=>t.stopPropagating=!0;for(let i of t?.intersections){if(t.stopPropagating)return;t={...t,...i};let{object:a}=i;t.eventObject=a,Cn(a[e],t),r.push(a);let o=a.parent;for(;o!==null&&!t.stopPropagating&&!r.includes(o);)t.eventObject=o,Cn(o[e],t),r.push(o),o=o.parent;n(Ft(e.slice(2)),{intersection:i,event:t})}}let{onClick:l,onDblClick:u,onContextMenu:d,onPointerMove:f,onPointerDown:p,onPointerUp:m,onPointerMissed:h,onWheel:g,forceUpdate:v}=Sn(s,t);m(e=>c(`onPointerUp`,e)),p(e=>c(`onPointerDown`,e)),l(e=>c(`onClick`,e)),u(e=>c(`onDoubleClick`,e)),d(e=>c(`onContextMenu`,e)),g(e=>c(`onWheel`,e));let y=[];f(e=>{let t=e.intersections.map(({object:e})=>e),n=e.intersections;y.forEach(({object:n})=>{t.includes(n)||(e.intersections=y,c(`onPointerLeave`,e),c(`onPointerOut`,e))}),e.intersections=n,e.intersections.forEach(({object:t})=>{y.includes(t)||(c(`onPointerEnter`,e),c(`onPointerOver`,e))}),c(`onPointerMove`,e),y=e.intersections});let b=[];h(e=>{e.stopPropagation=()=>e.stopPropagating=!0,b.forEach(t=>{e.stopPropagating||(e.eventObject=t,Cn(t.onPointerMissed,e))}),n(`pointer-missed`,{event:e})});function x(e){Ot(e)&&J(e)&&s.value.push(e)}function S(e){if(Ot(e)&&J(e)){let t=s.value.indexOf(e);t>-1&&s.value.splice(t,1)}}function C(e){Ot(e)&&J(e)&&e.onPointerMissed&&b.push(e)}function w(e){if(Ot(e)&&J(e)){let t=b.indexOf(e);t>-1&&b.splice(t,1)}}return t.eventManager={forceUpdate:v,registerObject:x,deregisterObject:S,registerPointerMissedObject:C,deregisterPointerMissedObject:w},{forceUpdate:v,registerObject:x,deregisterObject:S,registerPointerMissedObject:C,deregisterPointerMissedObject:w}}function Tn(e,t,n=100){n=n<=0?100:n;let r=R(),i=new Set,a=!1,o=!1,s=null;function c(){s&&clearTimeout(s),!o&&!a&&e()?(r.trigger(t),i.forEach(e=>e()),i.clear(),a=!0):!o&&!a&&(s=setTimeout(c,n))}function l(){o=!0,s&&clearTimeout(s)}c();let u=(e,...t)=>{e(...t)};return{on:e=>{if(a)return u(e,t),{off:()=>{}};{let t=r.on(e);return i.add(t.off),r.on(e)}},off:r.off,trigger:r.trigger,clear:r.clear,cancel:l}}var En=new WeakMap;function Dn(e){if(e||=kn(),En.has(e))return En.get(e);let t=Date.now(),n=Tn(()=>{if(Date.now()-t>=100)return!0;{let t=e.renderer.value,n=t?.domElement||{width:0,height:0};return!!(t&&n.width>0&&n.height>0)}},e);return En.set(e,n),n}function On({scene:e,canvas:t,windowSize:n,rendererOptions:r,emit:i}){let a=_(e),o=xn(n,t),{camera:s,cameras:c,registerCamera:l,deregisterCamera:u,setCameraActive:d}=rn({sizes:o}),f={mode:E(r.renderMode||`always`),priority:E(0),frames:E(0),maxFrames:60,canBeInvalidated:x(()=>f.mode.value===`on-demand`&&f.frames.value===0)};function p(e=1){r.renderMode===`on-demand`&&(f.frames.value=Math.min(f.maxFrames,f.frames.value+e))}function h(){r.renderMode===`manual`&&(f.frames.value=1)}let{renderer:v}=bn({canvas:t,options:r,contextParts:{sizes:o,render:f,invalidate:p,advance:h}}),y={sizes:o,scene:a,camera:s,cameras:A(c),renderer:v,raycaster:_(new Te),controls:E(null),perf:{maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},render:f,advance:h,extend:fn,invalidate:p,registerCamera:l,setCameraActive:d,deregisterCamera:u,loop:mn()};g(`useTres`,y),y.scene.value.__tres={root:y},y.loop.register(()=>{s.value&&f.frames.value>0&&(v.value.render(e,s.value),i(`render`,y.renderer.value)),f.priority.value=0,f.mode.value===`always`?f.frames.value=1:f.frames.value=Math.max(0,f.frames.value-1)},`render`);let{on:b,cancel:S}=Dn(y);y.loop.setReady(!1),y.loop.start(),b(()=>{i(`ready`,y),y.loop.setReady(!0),wn(e,y,i)}),m(()=>{S(),y.loop.stop()});let C=tt({every:100}),{isSupported:w,memory:T}=nt({interval:100}),D=performance.now(),O=({timestamp:e})=>{y.scene.value&&(y.perf.memory.allocatedMem=hn(y.scene.value)),e-D>=100&&(D=e,y.perf.fps.accumulator.push(C.value),y.perf.fps.accumulator.length>160&&y.perf.fps.accumulator.shift(),y.perf.fps.value=C.value,w.value&&T.value&&(y.perf.memory.accumulator.push(T.value.usedJSHeapSize/1024/1024),y.perf.memory.accumulator.length>160&&y.perf.memory.accumulator.shift(),y.perf.memory.currentMem=y.perf.memory.accumulator.reduce((e,t)=>e+t,0)/y.perf.memory.accumulator.length))},k=0,{pause:j}=qe(({delta:e})=>{window.__TRES__DEVTOOLS__&&(O({timestamp:performance.now()}),k+=e,k>=1&&(window.__TRES__DEVTOOLS__.cb(y),k=0))},{immediate:!0});return m(()=>{j()}),y}function kn(){let e=i(`useTres`);if(!e)throw Error(`useTresContext must be used together with useTresContextProvider`);return e}var An=R(),jn=R(),Mn=R(),Z=new fe,Nn=0,Pn=0,{pause:Fn,resume:In,isActive:Ln}=qe(()=>{An.trigger({delta:Nn,elapsed:Pn,clock:Z}),jn.trigger({delta:Nn,elapsed:Pn,clock:Z}),Mn.trigger({delta:Nn,elapsed:Pn,clock:Z})},{immediate:!1});Mn.on(()=>{Nn=Z.getDelta(),Pn=Z.getElapsedTime()});function Rn(e,t={},n={}){let r=e,i=e=>{r=e},a=new Proxy({},{});return a=new Proxy({},{has(e,n){return n in t||n in r},get(e,n,i){return n in t?t[n](r):r[n]},set(e,t,o){return n[t]?n[t](o,r,a,i):r[t]=o,!0}}),a}var{logError:zn}=un(),Bn=[`onClick`,`onContextMenu`,`onPointerMove`,`onPointerEnter`,`onPointerLeave`,`onPointerOver`,`onPointerOut`,`onDoubleClick`,`onPointerDown`,`onPointerUp`,`onPointerCancel`,`onPointerMissed`,`onLostPointerCapture`,`onWheel`],Vn=e=>{let t=e.scene.value;function n(t,n,o,s){if(s||={},s.args||=[],t===`template`||jt(t))return null;let c=t.replace(`Tres`,``),l;if(t===`primitive`){(!q(s.object)||N(s.object))&&zn(`Tres primitives need an 'object' prop, whose value is an object or shallowRef<object>`),c=s.object.type;let t={};l=Rn(s.object,{object:e=>e,isPrimitive:()=>!0,__tres:()=>t},{object:(t,n,o,s)=>{en(t,o,s,{patchProp:a,remove:i,insert:r},e)},__tres:e=>{Object.assign(t,e)}})}else{let e=dn.value[c];e||zn(`${c} is not defined on the THREE namespace. Use extend to add it to the catalog.`),l=new e(...s.args)}return l?(l.isCamera&&(s!=null&&s.position||l.position.set(3,3,3),s!=null&&s.lookAt||l.lookAt(0,0,0)),l=Y(l,{...l.__tres,type:c,memoizedProps:s,eventCount:0,primitive:t===`primitive`,attach:s.attach},e),l):null}function r(n,r){var i,a;if(!n)return;r||=t;let o=n.__tres?n:Y(n,{},e),s=r.__tres?r:Y(r,{},e);n=X(o),r=X(s),n.__tres&&n.__tres?.eventCount>0&&((i=e.eventManager)==null||i.registerObject(n)),e.registerCamera(n),(a=e.eventManager)==null||a.registerPointerMissedObject(n),o.__tres.attach?Xt(s,o,o.__tres.attach):J(n)&&J(s)&&(s.add(n),n.dispatchEvent({type:`added`})),o.__tres.parent=s,s.__tres.objects&&!s.__tres.objects.includes(o)&&s.__tres.objects.push(o)}function i(t,n){var r;if(!t)return;t!=null&&t.__tres&&t.__tres?.eventCount>0&&((r=e.eventManager)==null||r.deregisterObject(t)),n=ft(n)?`default`:n;let a=t.__tres?.dispose;ft(a)||(n=a===null?!1:a);let o=t.__tres?.primitive,s=n===`default`?!o:!!n;if(t.__tres&&`objects`in t.__tres&&[...t.__tres.objects].forEach(e=>i(e,n)),s&&t.children&&[...t.children].forEach(e=>i(e,n)),tn(t,e),nn(t,e),s&&!Dt(t)){if(K(n))n(t);else if(K(t.dispose))try{t.dispose()}catch{}}`__tres`in t&&delete t.__tres}function a(t,n,a,o){if(!t)return;let s=t,c=n;if(t.__tres&&(t.__tres.memoizedProps[n]=o),n===`attach`){let n=t.__tres?.parent||t.parent;i(t),Y(t,{attach:o},e),n&&r(t,n);return}if(n===`dispose`){t.__tres||(t=Y(t,{},e)),t.__tres.dispose=o;return}if(J(t)&&c===`blocks-pointer-events`){o||o===``?t[c]=o:delete t[c];return}Bn.includes(n)&&t.__tres&&(t.__tres.eventCount+=1);let l=Nt(c),u=s?.[l];if(c===`args`){let e=t,n=a??[],r=o??[],i=t.__tres?.type||t.type;i&&n.length&&!Bt(n,r)&&(s=Object.assign(e,new dn.value[i](...o)));return}if(s.type===`BufferGeometry`){if(c===`args`)return;s.setAttribute(Nt(c),new be(...o));return}if(c.includes(`-`)&&u===void 0){u=s;for(let e of c.split(`-`))l=c=Nt(e),s=u,u=u?.[c]}let d=o;if(d===``&&(d=!0),K(u)){Bn.includes(n)||(pt(d)?t[l](...d):t[l](d)),l.startsWith(`on`)&&K(d)&&(s[l]=d);return}xt(u)&&xt(d)?u.mask=d.mask:gt(u)&&_t(d)?u.set(d):yt(u)&&bt(d)&&u.constructor===d.constructor?u.copy(d):vt(u)&&Array.isArray(d)?`fromArray`in u&&typeof u.fromArray==`function`?u.fromArray(d):u.set(...d):vt(u)&&typeof d==`number`?`setScalar`in u&&typeof u.setScalar==`function`?u.setScalar(d):u.set(d):s[l]=d,Qt(t)}function o(e){return e?.__tres?.parent||null}function s(t){let n=Y(new De,{type:`Comment`},e);return n.name=t,n}function c(e){let t=o(e)?.__tres?.objects||[],n=t.indexOf(e);return n<0||n>=t.length-1?null:t[n+1]}return{insert:r,remove:i,createElement:n,patchProp:a,parentNode:o,createText:()=>void 0,createComment:s,setText:()=>void 0,setElementText:()=>void 0,nextSibling:c,querySelector:()=>void 0,setScopeId:()=>void 0,cloneNode:()=>void 0,insertStaticContent:()=>void 0}};function Hn(){return Un().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Un(){return typeof navigator<`u`&&typeof window<`u`?window:typeof globalThis<`u`?globalThis:{}}var Wn=typeof Proxy==`function`,Gn=`devtools-plugin:setup`,Kn=`plugin:settings:set`,Q,qn;function Jn(){var e;return Q!==void 0||(typeof window<`u`&&window.performance?(Q=!0,qn=window.performance):typeof globalThis<`u`&&(e=globalThis.perf_hooks)!=null&&e.performance?(Q=!0,qn=globalThis.perf_hooks.performance):Q=!1),Q}function Yn(){return Jn()?qn.now():Date.now()}var Xn=class{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;let n={};if(e.settings)for(let t in e.settings)n[t]=e.settings[t].defaultValue;let r=`__vue-devtools-plugin-settings__${e.id}`,i=Object.assign({},n);try{let e=localStorage.getItem(r),t=JSON.parse(e);Object.assign(i,t)}catch{}this.fallbacks={getSettings(){return i},setSettings(e){try{localStorage.setItem(r,JSON.stringify(e))}catch{}i=e},now(){return Yn()}},t&&t.on(Kn,(e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)}),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:t===`on`?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise(n=>{this.targetQueue.push({method:t,args:e,resolve:n})})})}async setRealTarget(e){this.target=e;for(let e of this.onQueue)this.target.on[e.method](...e.args);for(let e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}};function Zn(e,t){let n=e,r=Un(),i=Hn(),a=Wn&&n.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!a))i.emit(Gn,e,t);else{let e=a?new Xn(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}}function Qn(e,t){let n=`â–² â–  â—${e}`;typeof $n==`function`?$n(n,t):console.log(n)}function $n(e,t){throw Error(e+t)}var er=e=>{let t={id:e.uuid,label:e.type,children:[],tags:[]};e.name!==``&&t.tags.push({label:e.name,textColor:5750629,backgroundColor:15793395});let n=hn(e);return n>0&&t.tags.push({label:`${gn(n)} KB`,textColor:15707189,backgroundColor:16775644,tooltip:`Memory usage`}),e.type.includes(`Light`)&&(Tt(e)&&t.tags.push({label:`${e.intensity}`,textColor:9738662,backgroundColor:16316922,tooltip:`Intensity`}),t.tags.push({label:`#${new I(e.color).getHexString()}`,textColor:9738662,backgroundColor:16316922,tooltip:`Color`})),e.type.includes(`Camera`)&&(t.tags.push({label:`${e.fov}Â°`,textColor:9738662,backgroundColor:16316922,tooltip:`Field of view`}),t.tags.push({label:`x: ${Math.round(e.position.x)} y: ${Math.round(e.position.y)} z: ${Math.round(e.position.z)}`,textColor:9738662,backgroundColor:16316922,tooltip:`Position`})),t};function tr(e,t,n=``){e.children.forEach(e=>{if(e.type===`HightlightMesh`||n&&!e.type.includes(n)&&!e.name.includes(n))return;let r=er(e);t.children.push(r),tr(e,r,n)})}var nr=[],$=`tres:inspector`,rr=ee({sceneGraph:null});function ir(e,t){Zn({id:`dev.esm.tres`,label:`TresJS ðŸª`,logo:`https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg`,packageName:`tresjs`,homepage:`https://tresjs.org`,componentStateTypes:nr,app:e},e=>{typeof e.now!=`function`&&Qn(`You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.`),e.addInspector({id:$,label:`TresJS ðŸª`,icon:`account_tree`,treeFilterPlaceholder:`Search instances`}),setInterval(()=>{e.sendInspectorTree($)},1e3),setInterval(()=>{e.notifyComponentUpdate()},5e3),e.on.getInspectorTree(e=>{if(e.inspectorId===$){let n=er(t.scene.value);tr(t.scene.value,n,e.filter),rr.sceneGraph=n,e.rootNodes=[n]}});let n=null,r=null;e.on.getInspectorState(e=>{if(e.inspectorId===$){let[i]=t.scene.value.getObjectsByProperty(`uuid`,e.nodeId);if(!i)return;if(r&&n&&n.parent&&r.remove(n),i.isMesh){let e=Ht(i);i.add(e),n=e,r=i}e.state={object:Object.entries(i).map(([e,t])=>e===`children`?{key:e,value:t.filter(e=>e.type!==`HightlightMesh`)}:{key:e,value:t,editable:!0}).filter(({key:e})=>e!==`parent`)},i.isScene&&(e.state={...e.state,state:[{key:`Scene Info`,value:{objects:i.children.length,memory:hn(i),calls:t.renderer.value.info.render.calls,triangles:t.renderer.value.info.render.triangles,points:t.renderer.value.info.render.points,lines:t.renderer.value.info.render.lines}},{key:`Programs`,value:t.renderer.value.info.programs?.map(e=>({...e,programName:e.name}))||[]}]})}}),e.on.editInspectorState(e=>{e.inspectorId===$&&Vt(t.scene.value,e.nodeId,e.path,e.state.value)})})}var ar=[`data-scene`,`data-tres`],or=t({__name:`TresCanvas`,props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},renderMode:{default:`always`},dpr:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},enableProvideBridge:{type:Boolean,default:!0},context:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0},precision:{},logarithmicDepthBuffer:{type:Boolean,default:void 0},reverseDepthBuffer:{type:Boolean}},emits:[`render`,`click`,`double-click`,`context-menu`,`pointer-move`,`pointer-up`,`pointer-down`,`pointer-enter`,`pointer-leave`,`pointer-over`,`pointer-out`,`pointer-missed`,`wheel`,`ready`],setup(e,{expose:r,emit:i}){let c=e,l=i,u=w(),d=E(),f=_(new ce),y=O();fn(ge);let b=(e,n=!1)=>t({setup(){let t=O()?.appContext;t&&(t.app=y?.appContext.app);let r={};function i(e){e&&(e.parent&&i(e.parent),e.provides&&Object.assign(r,e.provides))}return y!=null&&y.parent&&c.enableProvideBridge&&(i(y.parent),Reflect.ownKeys(r).forEach(e=>{g(e,r[e])})),g(`useTres`,e),g(`extend`,fn),typeof window<`u`&&ir(t?.app,e),()=>s(v,null,n?[]:u.default())}}),x=(e,t=!1)=>{let n=b(e,t),{render:r}=p(Vn(e));r(s(n),f.value)},S=(e,t=!1)=>{Gt(e.scene.value),t&&(e.renderer.value.dispose(),e.renderer.value.renderLists.dispose(),e.renderer.value.forceContextLoss()),f.value.__tres={root:e}},C=_(null);return r({context:C,dispose:()=>S(C.value,!0)}),n(()=>{let e=d;C.value=On({scene:f.value,canvas:e,windowSize:c.windowSize??!1,rendererOptions:c,emit:l});let{registerCamera:t,camera:n,cameras:r,deregisterCamera:i}=C.value;x(C.value),j(()=>c.camera,(e,n)=>{e&&t(e),n&&(n.removeFromParent(),i(n))},{immediate:!0}),n.value||(()=>{let e=new Ee(45,window.innerWidth/window.innerHeight,.1,1e3);e.position.set(3,3,3),e.lookAt(0,0,0),t(e);let n=M(()=>{r.value.length>=2&&(e.removeFromParent(),i(e),n?.())})})()}),m(()=>{S(C.value),x(C.value,!0)}),(e,t)=>(o(),ne(`canvas`,{ref_key:`canvas`,ref:d,"data-scene":f.value.uuid,class:a(e.$attrs.class),"data-tres":`tresjs ${P(ut).version}`,style:h({display:`block`,width:`100%`,height:`100%`,position:e.windowSize?`fixed`:`relative`,top:0,left:0,pointerEvents:`auto`,touchAction:`none`,...e.$attrs.style})},null,14,ar))}}),{logWarning:sr}=un(),{logWarning:cr}=un(),lr=t({__name:`base`,setup(e){return fn({OrbitControls:Ce}),(e,t)=>(o(),f(P(or),{"clear-color":`#82DBC5`},{default:y(()=>t[0]||=[F(`TresPerspectiveCamera`,{position:[3,3,3],fov:45,"look-at":[0,0,0]},null,-1),F(`TresMesh`,null,[F(`TresTorusGeometry`,{args:[1,.5,16,32]}),F(`TresMeshBasicMaterial`,{color:`orange`}),F(`TresAmbientLight`,{intensity:1})],-1)]),_:1}))}}),ur={class:`h-full`},dr={class:`h-[calc(100%-50px)] p-3`},fr=C(t({__name:`index`,setup(e){return(e,t)=>{let n=re,i=d;return o(),ne(`div`,ur,[t[3]||=F(`h2`,{class:`title`},`TresJs `,-1),F(`div`,dr,[c(i,{type:`border-card`},{default:y(()=>[c(n,{label:`åŸºç¡€`},{default:y(()=>[c(lr)]),_:1}),c(n,{label:`Config`},{default:y(()=>t[0]||=[r(`Config`)]),_:1}),c(n,{label:`Role`},{default:y(()=>t[1]||=[r(`Role`)]),_:1}),c(n,{label:`Task`},{default:y(()=>t[2]||=[r(`Task`)]),_:1})]),_:1})])])}}}),[[`__scopeId`,`data-v-7d08efa2`]]);export{fr as default};