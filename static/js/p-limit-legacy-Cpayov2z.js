!function(){function e(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function t(t,r){return function(e,t){return t.get?t.get.call(e):t.value}(t,e(t,r,"get"))}function r(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function n(t,r,n){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,e(t,r,"set"),n),n}function i(t,r){return function(e,t){if(t.set){if(!t.get)throw new TypeError("attempted to read set only private field");return"__destrWrapper"in t||(t.__destrWrapper={set value(r){t.set.call(e,r)},get value(){return t.get.call(e)}}),t.__destrWrapper}if(!t.writable)throw new TypeError("attempted to set read only private field");return t}(t,e(t,r,"update"))}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}System.register(["./base-legacy-B15TsDT-.js","./el-button-legacy-DM6LSoeO.js","./ui-legacy-Dm5jL3jW.js","./core-legacy-DGIjYafI.js"],(function(e,s){"use strict";var u,o,l,c,p,v,d,f,h;return{setters:[null,null,e=>{u=e.m},e=>{o=e.x,l=e.r,c=e.y,p=e.z,v=e.A,d=e.P,f=e.H,h=e.L}],execute:function(){class s{constructor(e){a(this,"value",void 0),a(this,"next",void 0),this.value=e}}var w=new WeakMap,y=new WeakMap,m=new WeakMap;class b{enqueue(e){const r=new s(e);t(this,w)?(t(this,y).next=r,n(this,y,r)):(n(this,w,r),n(this,y,r)),i(this,m).value++}dequeue(){const e=t(this,w);if(e)return n(this,w,t(this,w).next),i(this,m).value--,e.value}peek(){if(t(this,w))return t(this,w).value}clear(){n(this,w,void 0),n(this,y,void 0),n(this,m,0)}get size(){return t(this,m)}*[Symbol.iterator](){let e=t(this,w);for(;e;)yield e.value,e=e.next}constructor(){r(this,w,{writable:!0,value:void 0}),r(this,y,{writable:!0,value:void 0}),r(this,m,{writable:!0,value:void 0}),this.clear()}}function g(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}const T={class:"flex gap-5"},_={class:"border border-[#777777] p-5"},P=["innerHTML"];e("default",o({__name:"p-limit",setup(e){const t=l(""),r=e=>new Promise((r=>{t.value=`${t.value}<br/>${e}`,setTimeout((()=>{r(e)}),2e3)})),n=async()=>{const e=function(e){g(e);const t=new b;let r=0;const n=()=>{r<e&&t.size>0&&(t.dequeue()(),r++)},i=()=>{r--,n()},a=async(e,t,r)=>{const n=(async()=>e(...r))();t(n);try{await n}catch(e){}i()},s=(i,s,u)=>{new Promise((e=>{t.enqueue(e)})).then(a.bind(void 0,i,s,u)),(async()=>{await Promise.resolve(),r<e&&n()})()},u=(e,...t)=>new Promise((r=>{s(e,r,t)}));return Object.defineProperties(u,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}},concurrency:{get:()=>e,set(i){g(i),e=i,queueMicrotask((()=>{for(;r<e&&t.size>0;)n()}))}}}),u}(1),t=[e((()=>r("foo"))),e((()=>r("bar"))),e((()=>r("s")))];await Promise.all(t)};return(e,r)=>{const i=u;return p(),c("div",T,[v("div",null,[r[1]||(r[1]=v("p",null,"p-limit 模拟并发请求发送",-1)),r[2]||(r[2]=v("p",null,"三个请求 一个一个执行",-1)),d(i,{type:"primary",onClick:n},{default:f((()=>r[0]||(r[0]=[h("发送")]))),_:1})]),v("div",_,[r[3]||(r[3]=v("p",null,"请求结果打印：",-1)),v("div",{innerHTML:t.value},null,8,P)])])}}}))}}}))}();
