System.register(["./base-legacy-B15TsDT-.js","./el-button-legacy-DM6LSoeO.js","./core-legacy-DGIjYafI.js","./main-legacy-DA2-yfmK.js","./ui-legacy-Dm5jL3jW.js"],(function(e,t){"use strict";var a,n,l,o,r,c,s,i,d,u,p,m,v,f,h,b,x;return{setters:[null,null,e=>{a=e.x,n=e.aX,l=e.az,o=e.r,r=e.S,c=e.y,s=e.z,i=e.V,d=e.A,u=e.P,p=e.O,m=e.a6,v=e.H,f=e.L,h=e.M},e=>{b=e._},e=>{x=e.m}],execute:function(){var t=document.createElement("style");t.textContent='@charset "UTF-8";#editor-box[data-v-cb66bb5c]{display:flex;flex-wrap:wrap;align-items:flex-start;gap:3px;padding:9px;min-height:100px;max-height:160px;overflow:auto;white-space:pre-wrap;word-wrap:break-word;font-size:20px;border:1px solid #e0e5eb;caret-color:#000}#editor-box[data-v-cb66bb5c]:before{content:" ";display:inline-block;width:.2px;opacity:0}#editor-box[data-v-cb66bb5c]:empty:before{content:attr(placeholder);font-size:14px;color:#ccc;line-height:21px;padding-top:0}.matchItem{display:inline-flex;gap:5px;align-items:center;padding:2px 8px;background-color:#f5f5f5;border:1px solid #e0e5eb;border-radius:2px;font-size:14px;user-select:none}.matchItem span{cursor:pointer}.matchItem span:hover{color:#337ecc}\n/*$vite$:1*/',document.head.appendChild(t);const g=a({__name:"editor",props:{matchList:{default:[]},matchListModifiers:{}},emits:n(["updateMatchList"],["update:matchList"]),setup(e,{expose:t,emit:a}){const n=a,d=l(e,"matchList"),u=o(null),p=o(!1),m=o(null),v=()=>{p.value=!0},f=e=>{p.value=!1,null!==m.value&&(clearTimeout(m.value),m.value=null),m.value=setTimeout((()=>{u.value&&(x(),d.value.forEach((e=>{g(e.matchLabel)}))),m.value=null}),0)},h=e=>{e.preventDefault()},b=e=>{e.preventDefault()},x=()=>{u.value.innerHTML=""},g=e=>{var t;const a=u.value;if(!a)return;const l=window.getSelection();0===(null==l?void 0:l.rangeCount)&&a.focus();let o=null==l?void 0:l.getRangeAt(0);if(!o||!a.contains(o.startContainer)){a.focus();const e=document.createRange();e.selectNodeContents(a),e.collapse(!1),o=e}const r=document.createElement("div");r.className="matchItem",r.contentEditable="false",r.innerHTML=`${e} <span>x</span>`,r.dataset.character=e,null===(t=r.querySelector("span"))||void 0===t||t.addEventListener("click",(e=>{e.stopPropagation();const t=r.dataset.character,a=d.value.findIndex((e=>e.matchLabel===t));-1!==a&&d.value.splice(a,1),n("updateMatchList")})),o.deleteContents();const c=document.createTextNode("​");o.insertNode(c),o.setStartAfter(c),o.setEndAfter(c),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r);const s=document.createTextNode("​");o.insertNode(s),o.setStartAfter(s),o.setEndAfter(s),null==l||l.removeAllRanges(),null==l||l.addRange(o)};return r((()=>{null!==m.value&&clearTimeout(m.value)})),t({insertMatch:g,clearValue:x}),(e,t)=>(s(),c("div",{ref_key:"inputBoxRef",ref:u,contenteditable:"true",id:"editor-box",placeholder:"请插入",class:"dark:!border-dark-border","on:beforeInput":b,onPaste:t[0]||(t[0]=i((()=>{}),["prevent"])),onCompositionstart:v,onCompositionend:f,onKeydown:h},null,544))}}),y=b(g,[["__scopeId","data-v-cb66bb5c"]]),L={class:"h-full"},w={class:"w-1/2 p-5"},k={class:"mb-5"};e("default",a({__name:"index",setup(e){const t=["香蕉","西瓜","葡萄","荔枝","橘子"],a=o([]),n=o(),l=()=>{n.value.clearValue(),a.value.forEach((e=>{n.value.insertMatch(e.matchLabel)}))};return(e,o)=>{const r=x;return s(),c("div",L,[o[1]||(o[1]=d("h2",{class:"title"},"contenteditable div 应用",-1)),d("div",w,[d("div",k,[(s(),c(p,null,m(t,((e,t)=>u(r,{onClick:t=>(e=>{a.value.push({matchLabel:e}),n.value.insertMatch(e)})(e),key:t},{default:v((()=>[f(h(e),1)])),_:2},1032,["onClick"]))),64))]),u(y,{ref_key:"editorRef",ref:n,matchList:a.value,"onUpdate:matchList":o[0]||(o[0]=e=>a.value=e),onUpdateMatchList:l},null,8,["matchList"])])])}}}))}}}));
