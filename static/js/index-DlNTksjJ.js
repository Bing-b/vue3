/* empty css             *//* empty css                 *//* empty css                  */import{x as V,aX as T,aB as D,r as p,y as M,z as k,V as S,A as _,P as L,O as $,a6 as H,H as y,L as B,M as z}from"./core-DMyUAmhm.js";import{_ as P}from"./main-C64_778W.js";import{p as U,q}from"./ui-BEU9Ux_B.js";const F=V({__name:"editor",props:{matchList:{default:[]},matchListModifiers:{}},emits:T(["updateMatchList"],["update:matchList"]),setup(w,{expose:x,emit:c}){const d=c,l=D(w,"matchList"),s=p(null),m=p(!1),r=()=>{m.value=!0},e=()=>{m.value=!1,s.value&&(b(),l.value.forEach(n=>v(n.matchLabel)))},f=n=>{n.preventDefault()},C=n=>{n.preventDefault()},t=()=>document.createTextNode("​"),v=n=>{const o=s.value;if(!o)return;const u=window.getSelection();if(!u||u.rangeCount===0)return;let a=u.getRangeAt(0);o.contains(a.commonAncestorContainer)||(o.focus(),a=document.createRange(),a.selectNodeContents(o),a.collapse(!1)),a.deleteContents();const R=t(),g=t(),i=document.createElement("span");i.className="matchItem",i.contentEditable="false",i.dataset.character=n,i.innerHTML=`${n}<span class="remove-btn">×</span>`,i.querySelector(".remove-btn")?.addEventListener("click",A=>{A.stopPropagation();const I=i.dataset.character,E=l.value.findIndex(N=>N.matchLabel===I);E!==-1&&l.value.splice(E,1),d("updateMatchList")});const h=document.createDocumentFragment();h.appendChild(R),h.appendChild(i),h.appendChild(g),a.insertNode(h),a.setStartAfter(g),a.setEndAfter(g),u.removeAllRanges(),u.addRange(a),o.scrollTop=o.scrollHeight},b=()=>{s.value&&(s.value.innerHTML="")};return x({insertMatch:v,clearValue:b}),(n,o)=>(k(),M("div",{ref_key:"inputBoxRef",ref:s,contenteditable:"true",id:"editor-box",placeholder:"请插入",class:"dark:!border-dark-border","on:beforeInput":f,onKeydown:C,onCompositionstart:r,onCompositionend:e,onPaste:o[0]||(o[0]=S(()=>{},["prevent"]))},null,544))}}),K=P(F,[["__scopeId","data-v-e6381aab"]]),O={class:"h-full"},X={class:"w-1/2 p-5"},Z={class:"mb-5 flex flex-nowrap items-center gap-4"},ee=V({__name:"index",setup(w){const x=["香蕉","西瓜","葡萄","荔枝","橘子"],c=p([]),d=p(),l=p(""),s=r=>{c.value.push({matchLabel:r}),d.value.insertMatch(r)},m=()=>{d.value.clearValue(),c.value.forEach(r=>{d.value.insertMatch(r.matchLabel)})};return(r,e)=>{const f=U,C=q;return k(),M("div",O,[e[4]||(e[4]=_("h2",{class:"title"},"contenteditable div 应用",-1)),_("div",X,[_("div",Z,[_("div",null,[(k(),M($,null,H(x,(t,v)=>L(f,{onClick:b=>s(t),key:v},{default:y(()=>[B(z(t),1)]),_:2},1032,["onClick"])),64))]),L(C,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),modelModifiers:{trim:!0},class:"!w-[180px]",placeholder:"请输入插入文本"},null,8,["modelValue"]),L(f,{onClick:e[1]||(e[1]=t=>s(l.value)),type:"primary"},{default:y(()=>e[3]||(e[3]=[B("插入")])),_:1})]),L(K,{ref_key:"editorRef",ref:d,matchList:c.value,"onUpdate:matchList":e[2]||(e[2]=t=>c.value=t),onUpdateMatchList:m},null,8,["matchList"])])])}}});export{ee as default};
