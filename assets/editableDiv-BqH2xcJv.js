import{$n as e,$t as t,At as n,Dt as r,Ht as i,It as a,Kt as o,Ot as s,Q as c,_t as l,an as u,at as d,ct as f,gt as p,hn as m,qn as h,wt as g,xt as _}from"./index-Ug8tEEVv.js";/* empty css            *//* empty css            *//* empty css            */var v=f(n({__name:`editor`,props:{matchList:{default:[]},matchListModifiers:{}},emits:a([`updateMatchList`],[`update:matchList`]),setup(e,{expose:n,emit:r}){let a=r,o=t(e,`matchList`),s=m(null),c=m(!1),l=()=>{c.value=!0},u=()=>{c.value=!1,s.value&&(v(),o.value.forEach(e=>_(e.matchLabel)))},d=e=>{e.preventDefault()},f=e=>{e.preventDefault()},h=()=>document.createTextNode(`​`),_=e=>{let t=s.value;if(!t)return;let n=window.getSelection();if(!n||n.rangeCount===0)return;let r=n.getRangeAt(0);t.contains(r.commonAncestorContainer)||(t.focus(),r=document.createRange(),r.selectNodeContents(t),r.collapse(!1)),r.deleteContents();let i=h(),c=h(),l=document.createElement(`span`);l.className=`matchItem`,l.contentEditable=`false`,l.dataset.character=e,l.innerHTML=`${e}<span class="remove-btn">×</span>`,l.querySelector(`.remove-btn`)?.addEventListener(`click`,e=>{e.stopPropagation();let t=l.dataset.character,n=o.value.findIndex(e=>e.matchLabel===t);n!==-1&&o.value.splice(n,1),a(`updateMatchList`)});let u=document.createDocumentFragment();u.appendChild(i),u.appendChild(l),u.appendChild(c),r.insertNode(u),r.setStartAfter(c),r.setEndAfter(c),n.removeAllRanges(),n.addRange(r),t.scrollTop=t.scrollHeight},v=()=>{s.value&&(s.value.innerHTML=``)};return n({insertMatch:_,clearValue:v}),(e,t)=>(i(),g(`div`,{ref_key:`inputBoxRef`,ref:s,contenteditable:`true`,id:`editor-box`,placeholder:`请插入`,class:`dark:!border-dark-border`,"on:beforeInput":d,onKeydown:f,onCompositionstart:l,onCompositionend:u,onPaste:t[0]||=p(()=>{},[`prevent`])},null,544))}}),[[`__scopeId`,`data-v-e6381aab`]]),y={class:`h-full`},b={class:`w-1/2 p-5`},x={class:`mb-5 flex flex-nowrap items-center gap-4`},S=n({__name:`index`,setup(e){let t=[`香蕉`,`西瓜`,`葡萄`,`荔枝`,`橘子`],n=m([]),a=m(),f=m(``),p=e=>{n.value.push({matchLabel:e}),a.value.insertMatch(e)},S=()=>{a.value.clearValue(),n.value.forEach(e=>{a.value.insertMatch(e.matchLabel)})};return(e,m)=>{let C=c,w=d;return i(),g(`div`,y,[m[4]||=_(`h2`,{class:`title`},`contenteditable div 应用`,-1),_(`div`,b,[_(`div`,x,[_(`div`,null,[(i(),g(l,null,o(t,(e,t)=>s(C,{onClick:t=>p(e),key:t},{default:u(()=>[r(h(e),1)]),_:2},1032,[`onClick`])),64))]),s(w,{modelValue:f.value,"onUpdate:modelValue":m[0]||=e=>f.value=e,modelModifiers:{trim:!0},class:`!w-[180px]`,placeholder:`请输入插入文本`},null,8,[`modelValue`]),s(C,{onClick:m[1]||=e=>p(f.value),type:`primary`},{default:u(()=>m[3]||=[r(`插入`)]),_:1})]),s(v,{ref_key:`editorRef`,ref:a,matchList:n.value,"onUpdate:matchList":m[2]||=e=>n.value=e,onUpdateMatchList:S},null,8,[`matchList`])])])}}});export{S as default};