/* empty css             */import{S as ct,i as Bt,P as ke,R as Dt,W as Pe,N as Rt,e as Ft,f as dt,g as zt,C as ie,h as pt,j as ft,k as Vt,l as Wt,m as Nt,n as Ut,L as $t,V as Ce,o as Gt,p as Ht,q as Yt,a as qt,O as Qt}from"./OrbitControls-CEenz3yw.js";import{aF as L,r as z,w as V,s as M,l as ze,f as Jt,o as Xt,k as Ve,n as Kt,ad as Zt,j as en,g as ce,b0 as vt,i as ht,c as R,e as de,h as we,u as H,x as ye,F as tn,y as mt,S as ne,z as We,C as nn,D as rn,b1 as on,af as Je,t as he,O as sn,X as an,G as ln,H as ee,A as J,P as Z,L as Me}from"./core-DwZ6MPRT.js";import{P as un,Q as cn}from"./ui-BeUbgTob.js";import{_ as dn}from"./main-Dcl6G1la.js";function q(e){return Jt()?(Xt(e),!0):!1}function F(){const e=new Set,t=l=>{e.delete(l)};return{on:l=>{e.add(l);const a=()=>t(l);return q(a),{off:a}},off:t,trigger:(...l)=>Promise.all(Array.from(e).map(a=>a(...l))),clear:()=>{e.clear()}}}const Ee=new WeakMap,pn=(...e)=>{var t;const n=e[0],r=(t=ce())==null?void 0:t.proxy;if(r==null&&!vt())throw new Error("injectLocal must be called in setup");return r&&Ee.has(r)&&n in Ee.get(r)?Ee.get(r)[n]:ht(...e)},Ae=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const fn=e=>e!=null,vn=Object.prototype.toString,hn=e=>vn.call(e)==="[object Object]",Le=()=>{};function mn(e,t){function n(...r){return new Promise((o,l)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(o).catch(l)})}return n}function gn(e,t={}){let n,r,o=Le;const l=u=>{clearTimeout(u),o(),o=Le};let a;return u=>{const s=L(e),d=L(t.maxWait);return n&&l(n),s<=0||d!==void 0&&d<=0?(r&&(l(r),r=null),Promise.resolve(u())):new Promise((f,c)=>{o=t.rejectOnCancel?c:f,a=u,d&&!r&&(r=setTimeout(()=>{n&&l(n),r=null,f(a())},d)),n=setTimeout(()=>{r&&l(r),r=null,f(u())},s)})}}function Xe(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function yn(e,t,n=!1){return t.reduce((r,o)=>(o in e&&(!n||e[o]!==void 0)&&(r[o]=e[o]),r),{})}function bn(e){return ce()}function le(e){return Array.isArray(e)?e:[e]}function _n(e,t=200,n={}){return mn(gn(t,n),e)}function Ke(e,t=200,n={}){const r=z(e.value),o=_n(()=>{r.value=e.value},t,n);return V(e,()=>o()),r}function wn(e,t={}){if(!ze(e))return Zt(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const r in e.value)n[r]=en(()=>({get(){return e.value[r]},set(o){var l;if((l=L(t.replaceRef))!=null?l:!0)if(Array.isArray(e.value)){const i=[...e.value];i[r]=o,e.value=i}else{const i={...e.value,[r]:o};Object.setPrototypeOf(i,Object.getPrototypeOf(e.value)),e.value=i}else e.value[r]=o}}));return n}const S=L;function Ne(e,t=!0,n){bn()?Ve(e,n):t?e():Kt(e)}function xn(e,t=1e3,n={}){const{immediate:r=!0,immediateCallback:o=!1}=n;let l=null;const a=M(!1);function i(){l&&(clearInterval(l),l=null)}function u(){a.value=!1,i()}function s(){const d=L(t);d<=0||(a.value=!0,o&&e(),i(),a.value&&(l=setInterval(e,d)))}if(r&&Ae&&s(),ze(t)||typeof t=="function"){const d=V(t,()=>{a.value&&Ae&&s()});q(d)}return q(u),{isActive:a,pause:u,resume:s}}function gt(e,t,n){return V(e,t,{...n,immediate:!0})}const G=Ae?window:void 0;function N(e){var t;const n=L(e);return(t=n==null?void 0:n.$el)!=null?t:n}function X(...e){const t=[],n=()=>{t.forEach(i=>i()),t.length=0},r=(i,u,s,d)=>(i.addEventListener(u,s,d),()=>i.removeEventListener(u,s,d)),o=R(()=>{const i=le(L(e[0])).filter(u=>u!=null);return i.every(u=>typeof u!="string")?i:void 0}),l=gt(()=>{var i,u;return[(u=(i=o.value)==null?void 0:i.map(s=>N(s)))!=null?u:[G].filter(s=>s!=null),le(L(o.value?e[1]:e[0])),le(H(o.value?e[2]:e[1])),L(o.value?e[3]:e[2])]},([i,u,s,d])=>{if(n(),!(i!=null&&i.length)||!(u!=null&&u.length)||!(s!=null&&s.length))return;const f=hn(d)?{...d}:d;t.push(...i.flatMap(c=>u.flatMap(v=>s.map(p=>r(c,v,p,f)))))},{flush:"post"}),a=()=>{l(),n()};return q(n),a}function Pn(){const e=M(!1),t=ce();return t&&Ve(()=>{e.value=!0},t),e}function xe(e){const t=Pn();return R(()=>(t.value,!!e()))}function Cn(e,t,n={}){const{window:r=G,...o}=n;let l;const a=xe(()=>r&&"MutationObserver"in r),i=()=>{l&&(l.disconnect(),l=void 0)},u=R(()=>{const c=L(e),v=le(c).map(N).filter(fn);return new Set(v)}),s=V(()=>u.value,c=>{i(),a.value&&c.size&&(l=new MutationObserver(t),c.forEach(v=>l.observe(v,o)))},{immediate:!0,flush:"post"}),d=()=>l==null?void 0:l.takeRecords(),f=()=>{s(),i()};return q(f),{isSupported:a,stop:f,takeRecords:d}}function Ue(e,t={}){const{immediate:n=!0,fpsLimit:r=void 0,window:o=G,once:l=!1}=t,a=M(!1),i=R(()=>r?1e3/L(r):null);let u=0,s=null;function d(v){if(!a.value||!o)return;u||(u=v);const p=v-u;if(i.value&&p<i.value){s=o.requestAnimationFrame(d);return}if(u=v,e({delta:p,timestamp:v}),l){a.value=!1,s=null;return}s=o.requestAnimationFrame(d)}function f(){!a.value&&o&&(a.value=!0,u=0,s=o.requestAnimationFrame(d))}function c(){a.value=!1,s!=null&&o&&(o.cancelAnimationFrame(s),s=null)}return n&&f(),q(c),{isActive:de(a),pause:c,resume:f}}const Mn=Symbol("vueuse-ssr-width");function En(){const e=vt()?pn(Mn,null):null;return typeof e=="number"?e:void 0}function yt(e,t={}){const{window:n=G,ssrWidth:r=En()}=t,o=xe(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function"),l=M(typeof r=="number"),a=M(),i=M(!1),u=s=>{i.value=s.matches};return we(()=>{if(l.value){l.value=!o.value;const s=L(e).split(",");i.value=s.some(d=>{const f=d.includes("not all"),c=d.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),v=d.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let p=!!(c||v);return c&&p&&(p=r>=Xe(c[1])),v&&p&&(p=r<=Xe(v[1])),f?!p:p});return}o.value&&(a.value=n.matchMedia(L(e)),i.value=a.value.matches)}),X(a,"change",u,{passive:!0}),R(()=>i.value)}function jn(e={}){const{window:t=G}=e,n=M(1),r=yt(()=>"(resolution: ".concat(n.value,"dppx)"),e);let o=Le;return t&&(o=gt(r,()=>n.value=t.devicePixelRatio)),{pixelRatio:de(n),stop:o}}function bt(e,t,n={}){const{window:r=G,...o}=n;let l;const a=xe(()=>r&&"ResizeObserver"in r),i=()=>{l&&(l.disconnect(),l=void 0)},u=R(()=>{const f=L(e);return Array.isArray(f)?f.map(c=>N(c)):[N(f)]}),s=V(u,f=>{if(i(),a.value&&r){l=new ResizeObserver(t);for(const c of f)c&&l.observe(c,o)}},{immediate:!0,flush:"post"}),d=()=>{i(),s()};return q(d),{isSupported:a,stop:d}}function On(e,t={}){const{reset:n=!0,windowResize:r=!0,windowScroll:o=!0,immediate:l=!0,updateTiming:a="sync"}=t,i=M(0),u=M(0),s=M(0),d=M(0),f=M(0),c=M(0),v=M(0),p=M(0);function g(){const x=N(e);if(!x){n&&(i.value=0,u.value=0,s.value=0,d.value=0,f.value=0,c.value=0,v.value=0,p.value=0);return}const y=x.getBoundingClientRect();i.value=y.height,u.value=y.bottom,s.value=y.left,d.value=y.right,f.value=y.top,c.value=y.width,v.value=y.x,p.value=y.y}function h(){a==="sync"?g():a==="next-frame"&&requestAnimationFrame(()=>g())}return bt(e,h),V(()=>N(e),x=>!x&&h()),Cn(e,h,{attributeFilter:["style","class"]}),o&&X("scroll",h,{capture:!0,passive:!0}),r&&X("resize",h,{passive:!0}),Ne(()=>{l&&h()}),{height:i,bottom:u,left:s,right:d,top:f,width:c,x:v,y:p,update:h}}function Sn(e,t={width:0,height:0},n={}){const{window:r=G,box:o="content-box"}=n,l=R(()=>{var f,c;return(c=(f=N(e))==null?void 0:f.namespaceURI)==null?void 0:c.includes("svg")}),a=M(t.width),i=M(t.height),{stop:u}=bt(e,([f])=>{const c=o==="border-box"?f.borderBoxSize:o==="content-box"?f.contentBoxSize:f.devicePixelContentBoxSize;if(r&&l.value){const v=N(e);if(v){const p=v.getBoundingClientRect();a.value=p.width,i.value=p.height}}else if(c){const v=le(c);a.value=v.reduce((p,{inlineSize:g})=>p+g,0),i.value=v.reduce((p,{blockSize:g})=>p+g,0)}else a.value=f.contentRect.width,i.value=f.contentRect.height},n);Ne(()=>{const f=N(e);f&&(a.value="offsetWidth"in f?f.offsetWidth:t.width,i.value="offsetHeight"in f?f.offsetHeight:t.height)});const s=V(()=>N(e),f=>{a.value=f?t.width:0,i.value=f?t.height:0});function d(){u(),s()}return{width:a,height:i,stop:d}}function Tn(e){var t;const n=M(0);if(typeof performance>"u")return n;const r=(t=e==null?void 0:e.every)!=null?t:10;let o=performance.now(),l=0;return Ue(()=>{if(l+=1,l>=r){const a=performance.now(),i=a-o;n.value=Math.round(1e3/(i/l)),o=a,l=0}}),n}function kn(e={}){const t=z(),n=xe(()=>typeof performance<"u"&&"memory"in performance);if(n.value){const{interval:r=1e3}=e;xn(()=>{t.value=performance.memory},r,{immediate:e.immediate,immediateCallback:e.immediateCallback})}return{isSupported:n,memory:t}}const _t={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},An=Object.keys(_t);function Ln(e={}){const{target:t=G}=e,n=M(!1),r=z(e.initialValue||{});Object.assign(r.value,_t,r.value);const o=l=>{n.value=!0,!(e.pointerTypes&&!e.pointerTypes.includes(l.pointerType))&&(r.value=yn(l,An,!1))};if(t){const l={passive:!0};X(t,["pointerdown","pointermove","pointerup"],o,l),X(t,"pointerleave",()=>n.value=!1,l)}return{...wn(r),isInside:n}}function In(e={}){const{window:t=G,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:o=!0,includeScrollbar:l=!0,type:a="inner"}=e,i=M(n),u=M(r),s=()=>{if(t)if(a==="outer")i.value=t.outerWidth,u.value=t.outerHeight;else if(a==="visual"&&t.visualViewport){const{width:f,height:c,scale:v}=t.visualViewport;i.value=Math.round(f*v),u.value=Math.round(c*v)}else l?(i.value=t.innerWidth,u.value=t.innerHeight):(i.value=t.document.documentElement.clientWidth,u.value=t.document.documentElement.clientHeight)};s(),Ne(s);const d={passive:!0};if(X("resize",s,d),t&&a==="visual"&&t.visualViewport&&X(t.visualViewport,"resize",s,d),o){const f=yt("(orientation: portrait)");V(f,()=>s())}return{width:i,height:u}}var Bn=Object.defineProperty,Dn=(e,t,n)=>t in e?Bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ze=(e,t,n)=>Dn(e,typeof t!="symbol"?t+"":t,n);const Rn="@tresjs/core",Fn="module",zn="4.3.5",Vn="pnpm@10.6.3",Wn="Declarative ThreeJS using Vue Components",Nn="Alvaro Saburido <hola@alvarosaburido.dev> (https://github.com/alvarosabu/)",Un="MIT",$n={type:"git",url:"git+https://github.com/Tresjs/tres.git"},Gn=["vue","3d","threejs","three","threejs-vue"],Hn=!1,Yn={".":{types:"./dist/index.d.ts",import:"./dist/tres.js",require:"./dist/tres.umd.cjs"},"./components":{types:"./dist/src/components/index.d.ts"},"./composables":{types:"./dist/src/composables/index.d.ts"},"./types":{types:"./dist/src/types/index.d.ts"},"./utils":{types:"./dist/src/utils/index.d.ts"},"./*":"./*"},qn="./dist/tres.js",Qn="./dist/tres.js",Jn="./dist/index.d.ts",Xn=["*.d.ts","dist"],Kn={access:"public"},Zn={dev:"pnpm --filter='./playground/vue' dev","dev:nuxt":"pnpm --filter='./playground/nuxt' dev",build:"vite build",test:"vitest","test:ci":"vitest run","test:ui":"vitest --ui --coverage.enabled=true",release:"release-it",coverage:"vitest run --coverage",lint:"eslint .","lint:fix":"eslint . --fix","docs:dev":"vitepress dev docs","docs:build":"vitepress build docs","docs:serve":"vitepress serve docs","docs:preview":"vitepress preview docs","docs:contributors":"esno scripts/update-contributors.ts"},er={three:">=0.133",vue:">=3.4"},tr={"@alvarosabu/utils":"^3.2.0","@vue/devtools-api":"^6.6.3","@vueuse/core":"^12.5.0"},nr={"@release-it/conventional-changelog":"^10.0.0","@stackblitz/sdk":"^1.11.0","@tresjs/cientos":"4.1.0","@tresjs/eslint-config":"^1.4.0","@types/three":"^0.173.0","@typescript-eslint/eslint-plugin":"^8.23.0","@typescript-eslint/parser":"^8.23.0","@vitejs/plugin-vue":"^5.2.1","@vitest/coverage-c8":"^0.33.0","@vitest/coverage-v8":"^3.0.5","@vitest/ui":"^3.0.5","@vue/test-utils":"^2.4.6",eslint:"^9.19.0","eslint-plugin-vue":"^9.32.0",esno:"^4.8.0",gsap:"^3.12.7",jsdom:"^26.0.0",kolorist:"^1.8.0",ohmyfetch:"^0.4.21",pathe:"^2.0.2","release-it":"^18.1.2","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-copy":"^3.5.0","rollup-plugin-visualizer":"^5.14.0",sponsorkit:"^16.3.0",three:"^0.173.0",unocss:"^65.4.3",unplugin:"^2.1.2","unplugin-vue-components":"^28.0.0",vite:"^6.1.0","vite-plugin-banner":"^0.8.0","vite-plugin-dts":"4.5.0","vite-plugin-inspect":"^10.1.0","vite-plugin-require-transform":"^1.0.21","vite-svg-loader":"^5.1.0",vitepress:"1.6.3",vitest:"3.0.5",vue:"3.5.13","vue-demi":"^0.14.10"},rr={name:Rn,type:Fn,version:zn,packageManager:Vn,description:Wn,author:Nn,license:Un,repository:$n,keywords:Gn,sideEffects:Hn,exports:Yn,main:qn,module:Qn,types:Jn,files:Xn,publishConfig:Kn,scripts:Zn,peerDependencies:er,dependencies:tr,devDependencies:nr};class or extends qt{constructor(...t){super(...t),Ze(this,"type","HightlightMesh"),Ze(this,"createTime"),this.createTime=Date.now()}onBeforeRender(){const t=(Date.now()-this.createTime)/1e3,n=1+.07*Math.sin(2.5*t);this.scale.set(n,n,n)}}function Ie(e){return typeof e>"u"}function $e(e){return Array.isArray(e)}function sr(e){return typeof e=="number"}function wt(e){return typeof e=="string"}function te(e){return typeof e=="function"}function U(e){return e===Object(e)&&!$e(e)&&!te(e)}function Y(e){return U(e)&&!!e.isObject3D}function xt(e){return U(e)&&!!e.isColor}function ar(e){return e!=null&&(typeof e=="string"||typeof e=="number"||xt(e))}function Be(e){return e!==null&&typeof e=="object"&&"set"in e&&typeof e.set=="function"}function ir(e){return Be(e)&&"copy"in e&&typeof e.copy=="function"}function lr(e){return!!(e!=null&&e.constructor)}function et(e){return e instanceof $t}function tt(e){return U(e)&&!!e.isCamera}function ur(e){return U(e)&&!!e.isBufferGeometry}function cr(e){return U(e)&&!!e.isMaterial}function dr(e){return U(e)&&!!e.isLight}function pr(e){return U(e)&&!!e.isFog}function fr(e){return U(e)&&!!e.isScene}function fe(e){return Y(e)||ur(e)||cr(e)||pr(e)}function vr(e){return U(e)&&!!e.isPrimitive}const Pt=(e,t)=>{for(const n of Object.keys(t))t[n]instanceof Object&&Object.assign(t[n],Pt(e[n],t[n]));return Object.assign(e||{},t),e},hr="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",mr=br(hr);function nt(e){return e&&e.nodeType===1}function je(e){return e.replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}const gr=/\B([A-Z])/g;function yr(e){return e.replace(gr,"-$1").toLowerCase()}function br(e,t){const n=Object.create(null),r=e.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const rt=(e,t)=>{if(!t)return;const n=Array.isArray(t)?t:t.match(/([^[.\]])+/g);return n==null?void 0:n.reduce((r,o)=>r&&r[o],e)},_r=(e,t,n)=>{const r=Array.isArray(t)?t:t.match(/([^[.\]])+/g);r&&r.reduce((o,l,a)=>(o[l]===void 0&&(o[l]={}),a===r.length-1&&(o[l]=n),o[l]),e)};function Ct(e,t){if(nt(e)&&nt(t)){const o=e.attributes,l=t.attributes;return o.length!==l.length?!1:Array.from(o).every(({name:a,value:i})=>t.getAttribute(a)===i)}if(e===t)return!0;if(e===null||typeof e!="object"||t===null||typeof t!="object")return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!r.includes(o)||!Ct(e[o],t[o]))return!1;return!0}function wr(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Ct(e[n],t[n]))return!1;return!0}function xr(e,t,n,r){const o=u=>{if(u.uuid===t)return u;for(const s of u.children){const d=o(s);if(d)return d}},l=o(e);if(!l){console.warn("Object with UUID not found in the scene.");return}let a=l;for(let u=0;u<n.length-1;u++)if(a[n[u]]!==void 0)a=a[n[u]];else{console.warn("Property path is not valid: ".concat(n.join(".")));return}const i=n[n.length-1];a[i]!==void 0?a[i]=r:console.warn("Property path is not valid: ".concat(n.join(".")))}function Pr(e){const t=new Ht({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:Yt});return new or(e.geometry.clone(),t)}function Cr(e){return"map"in e}function ot(e){Cr(e)&&e.map&&e.map.dispose(),e.dispose()}function Mt(e){var t,n;if(e.parent&&((t=e.removeFromParent)==null||t.call(e)),delete e.__tres,[...e.children].forEach(r=>Mt(r)),!(e instanceof ct)){const r=e;e&&((n=e.dispose)==null||n.call(e)),r.geometry&&r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(o=>ot(o)):r.material&&ot(r.material)}}function Mr(e,t){let n=0;for(let r=0;r<e.length;r++)t(e[r],r)&&(e[n]=e[r],n++);return e.length=n,e}function De(e,t){let n=e;if(t.includes("-")){const r=t.split("-");let o=r.shift();for(;n&&r.length;)o in n?(n=n[o],o=r.shift()):o=st(o,r.shift());return{target:n,key:st(o,...r)}}else return{target:n,key:t}}function st(...e){return e.map((t,n)=>n===0?t:t.charAt(0).toUpperCase()+t.slice(1)).join("")}const at=/-\d+$/;function Er(e,t,n){if(wt(n)){if(at.test(n)){const l=n.replace(at,""),{target:a,key:i}=De(e,l);if(!Array.isArray(a[i])){const u=a[i],s=[];s.__tresDetach=()=>{s.every(d=>Ie(d))&&(a[i]=u)},a[i]=s}}const{target:r,key:o}=De(e,n);t.__tres.previousAttach=r[o],r[o]=re(t)}else t.__tres.previousAttach=n(e,t)}function jr(e,t,n){var r,o,l;if(wt(n)){const{target:a,key:i}=De(e,n),u=t.__tres.previousAttach;u===void 0?delete a[i]:a[i]=u,"__tresDetach"in a&&a.__tresDetach()}else(o=(r=t.__tres)==null?void 0:r.previousAttach)==null||o.call(r,e,t);(l=t.__tres)==null||delete l.previousAttach}function Q(e,t,n){const r=e;return r.__tres={type:"unknown",eventCount:0,root:n,handlers:{},memoizedProps:{},objects:[],parent:null,previousAttach:null,...t},r.__tres.attach||(r.isMaterial?r.__tres.attach="material":r.isBufferGeometry?r.__tres.attach="geometry":r.isFog&&(r.__tres.attach="fog")),r}function Et(e){var t;const n=(t=e==null?void 0:e.__tres)==null?void 0:t.root;n&&n.render&&n.render.canBeInvalidated.value&&n.invalidate()}function Or(e,t,n){var r;if(!te(e.setPixelRatio))return;let o=0;if(n&&$e(n)&&n.length>=2){const[l,a]=n;o=ft.clamp(t,l,a)}else sr(n)?o=n:o=t;o!==((r=e.getPixelRatio)==null?void 0:r.call(e))&&e.setPixelRatio(o)}function Sr(e,t,n,r,o){var d,f,c;const l=[...t.__tres.objects],a=re(t);if(e=re(e),a===e)return!0;const i=Q(e,(d=t.__tres)!=null?d:{},o),u=(c=(f=t.parent)!=null?f:t.__tres.parent)!=null?c:null,s={...t.__tres.memoizedProps};delete s.object;for(const v of l)jt(v,o),Ot(v,o);a.__tres.objects=[],r.remove(t);for(const[v,p]of Object.entries(s))r.patchProp(i,v,i[v],p);n(e),r.insert(t,u);for(const v of l)r.insert(v,t);return!0}function re(e){return vr(e)?(e.object.__tres=e.__tres,e.object):e}function jt(e,t){var n,r,o,l;const a=((n=e.__tres)==null?void 0:n.parent)||t.scene.value;e.__tres&&(e.__tres.parent=null),a&&a.__tres&&"objects"in a.__tres&&Mr(a.__tres.objects,i=>i!==e),(r=e.__tres)!=null&&r.attach?jr(a,e,e.__tres.attach):((l=(o=e.parent)==null?void 0:o.remove)==null||l.call(o,re(e)),e.parent=null)}function Ot(e,t){var n;(n=e.traverse)==null||n.call(e,r=>{var o;t.deregisterCamera(r),(o=t.eventManager)==null||o.deregisterPointerMissedObject(r)}),t.deregisterCamera(e),Et(e)}const Tr=({sizes:e})=>{const t=z([]),n=R(()=>t.value[0]),r=a=>{const i=a instanceof Nt?a:t.value.find(s=>s.uuid===a);if(!i)return;const u=t.value.filter(({uuid:s})=>s!==i.uuid);t.value=[i,...u]},o=(a,i=!1)=>{if(tt(a)){const u=a;if(t.value.some(({uuid:s})=>s===u.uuid))return;i?r(u):t.value.push(u)}},l=a=>{if(tt(a)){const i=a;t.value=t.value.filter(({uuid:u})=>u!==i.uuid)}};return we(()=>{e.aspectRatio.value&&t.value.forEach(a=>{!a.manual&&(a instanceof ke||kr(a))&&(a instanceof ke?a.aspect=e.aspectRatio.value:(a.left=e.width.value*-.5,a.right=e.width.value*.5,a.top=e.height.value*.5,a.bottom=e.height.value*-.5),a.updateProjectionMatrix())})}),ne(()=>{t.value=[]}),{camera:n,cameras:t,registerCamera:o,deregisterCamera:l,setCameraActive:r}};function kr(e){return e.hasOwnProperty("isOrthographicCamera")&&e.isOrthographicCamera}const be="[TresJS ▲ ■ ●] ";function Ar(...e){typeof e[0]=="string"?e[0]=be+e[0]:e.unshift(be),console.error(...e)}function Lr(...e){typeof e[0]=="string"?e[0]=be+e[0]:e.unshift(be),console.warn(...e)}function Ir(e,t){}function St(){return{logError:Ar,logWarning:Lr,logMessage:Ir}}const Re=z({}),_e=e=>Object.assign(Re.value,e);function Oe(){const e=new Map,t=new Set;let n=0,r=!1;const o=()=>{const a=Array.from(e.entries()).sort((i,u)=>{const s=i[1].priority-u[1].priority;return s===0?i[1].addI-u[1].addI:s});t.clear(),a.forEach(i=>t.add(i[0]))},l=a=>{e.delete(a),t.delete(a)};return{on:(a,i=0)=>{e.set(a,{priority:i,addI:n++});const u=()=>l(a);return q(u),r=!0,{off:u}},off:l,trigger:(...a)=>{r&&(o(),r=!1),t.forEach(i=>i(...a))},dispose:()=>{e.clear(),t.clear()},get count(){return e.size}}}function Br(){let e=!0,t=!0,n=!1;const r=new pt(!1),o=z(r.running),l=z(!1);let a;const i=ft.generateUUID();let u=null;const s=Oe(),d=Oe(),f=Oe();j();let c={};function v(C){c=C}function p(C,T,m=0){switch(T){case"before":return s.on(C,m);case"render":return u||(u=C),d.dispose(),d.on(C);case"after":return f.on(C,m)}}function g(){t&&(t=!1,j(),E())}function h(){t=!0,j(),cancelAnimationFrame(a)}function x(){n=!1,j()}function y(){n=!0,j()}function _(){l.value=!0}function P(){l.value=!1}function E(){if(!e){a=requestAnimationFrame(E);return}const C=r.getDelta(),T=r.getElapsedTime(),m={camera:H(c.camera),scene:H(c.scene),renderer:H(c.renderer),raycaster:H(c.raycaster),controls:H(c.controls),invalidate:c.invalidate,advance:c.advance},w={delta:C,elapsed:T,clock:r,...m};o.value&&s.trigger(w),l.value||(d.count?d.trigger(w):u&&u(w)),o.value&&f.trigger(w),a=requestAnimationFrame(E)}function j(){const C=!t&&!n;r.running!==C&&(r.running?r.stop():r.start()),o.value=r.running}return{loopId:i,register:(C,T,m)=>p(C,T,m),start:g,stop:h,pause:y,resume:x,pauseRender:_,resumeRender:P,isRenderPaused:l,isActive:o,setContext:v,setReady:C=>e=C}}function Ge(e){let t=0;return e.traverse(n=>{if(n.isMesh&&n.geometry&&n.type!=="HightlightMesh"){const r=n.geometry,o=r.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,l=r.index?r.index.count*Uint32Array.BYTES_PER_ELEMENT:0,a=r.attributes.normal?r.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,i=r.attributes.uv?r.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,u=o+l+a+i;t+=u}}),t}function Dr(e){return(e/1024).toFixed(2)}const Rr=Number.parseInt(Ut.replace("dev",""));function Fr(e){return e instanceof ie?e:Array.isArray(e)?new ie(...e):new ie(e)}const ve={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:zt,toneMapping:dt,toneMappingExposure:3,shadowMap:{enabled:!0,type:Ft}},flat:{toneMapping:Rt,toneMappingExposure:1}};function zr({canvas:e,options:t,contextParts:{sizes:n,render:r,invalidate:o,advance:l}}){const a=R(()=>{var v,p;return{alpha:(v=S(t.alpha))!=null?v:!0,depth:S(t.depth),canvas:N(e),context:S(t.context),stencil:S(t.stencil),antialias:(p=S(t.antialias))!=null?p:!0,precision:S(t.precision),powerPreference:S(t.powerPreference),premultipliedAlpha:S(t.premultipliedAlpha),preserveDrawingBuffer:S(t.preserveDrawingBuffer),logarithmicDepthBuffer:S(t.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:S(t.failIfMajorPerformanceCaveat)}}),i=M(new Pe(a.value));function u(){t.renderMode==="on-demand"&&o()}V(a,()=>{i.value.dispose(),i.value=new Pe(a.value),u()}),V([n.width,n.height],()=>{i.value.setSize(n.width.value,n.height.value),u()},{immediate:!0}),V(()=>t.clearColor,u);const{pixelRatio:s}=jn(),{logError:d}=St(),f=(()=>{const v=new Pe,p={shadowMap:{enabled:v.shadowMap.enabled,type:v.shadowMap.type},toneMapping:v.toneMapping,toneMappingExposure:v.toneMappingExposure,outputColorSpace:v.outputColorSpace};return v.dispose(),p})(),c=S(t.renderMode);return c==="on-demand"&&o(),c==="manual"&&setTimeout(()=>{l()},100),we(()=>{var x;const v=S(t.preset);v&&(v in ve||d("Renderer Preset must be one of these: ".concat(Object.keys(ve).join(", "))),Pt(i.value,ve[v])),Or(i.value,s.value,S(t.dpr)),c==="always"&&(r.frames.value=Math.max(1,r.frames.value));const p=(y,_)=>{const P=S(y),E=()=>{if(v)return rt(ve[v],_)};if(P!==void 0)return P;const j=E();return j!==void 0?j:rt(f,_)},g=(y,_)=>_r(i.value,_,p(y,_));g(t.shadows,"shadowMap.enabled"),g((x=t.toneMapping)!=null?x:dt,"toneMapping"),g(t.shadowMapType,"shadowMap.type"),Rr<150&&g(!t.useLegacyLights,"physicallyCorrectLights"),g(t.outputColorSpace,"outputColorSpace"),g(t.toneMappingExposure,"toneMappingExposure");const h=p(t.clearColor,"clearColor");h&&i.value.setClearColor(h?Fr(h):new ie(0))}),ne(()=>{i.value.dispose(),i.value.forceContextLoss()}),{renderer:i}}function Vr(e,t,n=10){const r=S(e)?In():Sn(R(()=>S(t).parentElement)),o=de(Ke(r.width,n)),l=de(Ke(r.height,n)),a=R(()=>o.value/l.value);return{height:l,width:o,aspectRatio:a}}const Wr=(e,t)=>{const n=R(()=>t.renderer.value.domElement),r=M([]),{x:o,y:l}=Ln({target:n});let a=0;const{width:i,height:u,top:s,left:d}=On(n),f=({x:b,y:O})=>{if(n.value)return{x:(b-d.value)/i.value*2-1,y:-((O-s.value)/u.value)*2+1}},c=({x:b,y:O})=>{if(t.camera.value)return t.raycaster.value.setFromCamera(new Ce(b,O),t.camera.value),r.value=t.raycaster.value.intersectObjects(e.value,!0),r.value},v=b=>{var A,W;const O=f({x:(A=b==null?void 0:b.clientX)!=null?A:o.value,y:(W=b==null?void 0:b.clientY)!=null?W:l.value});return O?c(O)||[]:[]},p=F(),g=F(),h=F(),x=F(),y=F(),_=F(),P=F(),E=F();function j(b){const O={};for(const A in b)typeof A!="function"&&(O[A]=b[A]);return O}const C=(b,O)=>{var A,W,oe;const pe=j(O),It=new Gt(O==null?void 0:O.clientX,O==null?void 0:O.clientY,0).unproject((A=t.camera)==null?void 0:A.value);b.trigger({...pe,intersections:r.value,unprojectedPoint:It,ray:(W=t.raycaster)==null?void 0:W.value.ray,camera:(oe=t.camera)==null?void 0:oe.value,sourceEvent:O,delta:a,stopPropagating:!1})};let T;const m=b=>{v(b),C(h,b),T=b},w=()=>{T&&m(T)};let k,I,B;const $=b=>{var A,W;var O;k=(O=r.value[0])==null?void 0:O.object,a=0,I=new Ce((A=b==null?void 0:b.clientX)!=null?A:o.value,(W=b==null?void 0:b.clientY)!=null?W:l.value),C(y,b)};let D,K=!1;const He=b=>{var oe,pe;var O,A,W;b instanceof PointerEvent&&(r.value.length===0&&C(_,b),k===((O=r.value[0])==null?void 0:O.object)&&(B=new Ce((oe=b==null?void 0:b.clientX)!=null?oe:o.value,(pe=b==null?void 0:b.clientY)!=null?pe:l.value),a=I==null?void 0:I.distanceTo(B),b.button===0?(C(p,b),D===((A=r.value[0])==null?void 0:A.object)?K=!0:(D=(W=r.value[0])==null?void 0:W.object,K=!1)):b.button===2&&C(P,b)),C(x,b))},Ye=b=>{K&&(C(g,b),D=void 0,K=!1)},qe=b=>C(h,b),Qe=b=>C(E,b);return n.value.addEventListener("pointerup",He),n.value.addEventListener("pointerdown",$),n.value.addEventListener("pointermove",m),n.value.addEventListener("pointerleave",qe),n.value.addEventListener("dblclick",Ye),n.value.addEventListener("wheel",Qe),ne(()=>{n!=null&&n.value&&(n.value.removeEventListener("pointerup",He),n.value.removeEventListener("pointerdown",$),n.value.removeEventListener("pointermove",m),n.value.removeEventListener("pointerleave",qe),n.value.removeEventListener("dblclick",Ye),n.value.removeEventListener("wheel",Qe))}),{intersects:r,onClick:b=>p.on(b).off,onDblClick:b=>g.on(b).off,onContextMenu:b=>P.on(b).off,onPointerMove:b=>h.on(b).off,onPointerUp:b=>x.on(b).off,onPointerDown:b=>y.on(b).off,onPointerMissed:b=>_.on(b).off,onWheel:b=>E.on(b).off,forceUpdate:w}};function Se(e,t){if(Array.isArray(e))for(const n of e)n(t);typeof e=="function"&&e(t)}function Nr(e,t,n){var r;const o=M(),l=M();e&&(o.value=e),t&&(l.value=t);const a=m=>{var w;return((w=m.__tres)==null?void 0:w.eventCount)>0},i=m=>{var w;return((w=m.children)==null?void 0:w.some(k=>i(k)))||a(m)},u=M(((r=o.value)==null?void 0:r.children).filter(i)||[]);function s(m,w){const k=[],I=()=>w.stopPropagating=!0;w.stopPropagation=I;for(const B of w==null?void 0:w.intersections){if(w.stopPropagating)return;w={...w,...B};const{object:$}=B;w.eventObject=$,Se($[m],w),k.push($);let D=$.parent;for(;D!==null&&!w.stopPropagating&&!k.includes(D);)w.eventObject=D,Se(D[m],w),k.push(D),D=D.parent;const K=yr(m.slice(2));n(K,{intersection:B,event:w})}}const{onClick:d,onDblClick:f,onContextMenu:c,onPointerMove:v,onPointerDown:p,onPointerUp:g,onPointerMissed:h,onWheel:x,forceUpdate:y}=Wr(u,t);g(m=>s("onPointerUp",m)),p(m=>s("onPointerDown",m)),d(m=>s("onClick",m)),f(m=>s("onDoubleClick",m)),c(m=>s("onContextMenu",m)),x(m=>s("onWheel",m));let _=[];v(m=>{const w=m.intersections.map(({object:I})=>I),k=m.intersections;_.forEach(({object:I})=>{w.includes(I)||(m.intersections=_,s("onPointerLeave",m),s("onPointerOut",m))}),m.intersections=k,m.intersections.forEach(({object:I})=>{_.includes(I)||(s("onPointerEnter",m),s("onPointerOver",m))}),s("onPointerMove",m),_=m.intersections});const P=[];h(m=>{const w=()=>m.stopPropagating=!0;m.stopPropagation=w,P.forEach(k=>{m.stopPropagating||(m.eventObject=k,Se(k.onPointerMissed,m))}),n("pointer-missed",{event:m})});function E(m){fe(m)&&Y(m)&&u.value.push(m)}function j(m){if(fe(m)&&Y(m)){const w=u.value.indexOf(m);w>-1&&u.value.splice(w,1)}}function C(m){fe(m)&&Y(m)&&m.onPointerMissed&&P.push(m)}function T(m){if(fe(m)&&Y(m)){const w=P.indexOf(m);w>-1&&P.splice(w,1)}}return t.eventManager={forceUpdate:y,registerObject:E,deregisterObject:j,registerPointerMissedObject:C,deregisterPointerMissedObject:T},{forceUpdate:y,registerObject:E,deregisterObject:j,registerPointerMissedObject:C,deregisterPointerMissedObject:T}}function Ur(e,t,n=100){n=n<=0?100:n;const r=F(),o=new Set;let l=!1,a=!1,i=null;function u(){i&&clearTimeout(i),!a&&!l&&e()?(r.trigger(t),o.forEach(f=>f()),o.clear(),l=!0):!a&&!l&&(i=setTimeout(u,n))}function s(){a=!0,i&&clearTimeout(i)}u();const d=(f,...c)=>{f(...c)};return{on:f=>{if(l)return d(f,t),{off:()=>{}};{const c=r.on(f);return o.add(c.off),r.on(f)}},off:r.off,trigger:r.trigger,clear:r.clear,cancel:s}}const Te=new WeakMap;function $r(e){if(e=e||Hr(),Te.has(e))return Te.get(e);const t=100,n=Date.now(),r=Ur(()=>{if(Date.now()-n>=t)return!0;{const o=e.renderer.value,l=(o==null?void 0:o.domElement)||{width:0,height:0};return!!(o&&l.width>0&&l.height>0)}},e);return Te.set(e,r),r}function Gr({scene:e,canvas:t,windowSize:n,rendererOptions:r,emit:o}){const l=M(e),a=Vr(n,t),{camera:i,cameras:u,registerCamera:s,deregisterCamera:d,setCameraActive:f}=Tr({sizes:a}),c={mode:z(r.renderMode||"always"),priority:z(0),frames:z(0),maxFrames:60,canBeInvalidated:R(()=>c.mode.value==="on-demand"&&c.frames.value===0)};function v(B=1){r.renderMode==="on-demand"&&(c.frames.value=Math.min(c.maxFrames,c.frames.value+B))}function p(){r.renderMode==="manual"&&(c.frames.value=1)}const{renderer:g}=zr({canvas:t,options:r,contextParts:{sizes:a,render:c,invalidate:v,advance:p}}),h={sizes:a,scene:l,camera:i,cameras:de(u),renderer:g,raycaster:M(new Dt),controls:z(null),perf:{maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},render:c,advance:p,extend:_e,invalidate:v,registerCamera:s,setCameraActive:f,deregisterCamera:d,loop:Br()};he("useTres",h),h.scene.value.__tres={root:h},h.loop.register(()=>{i.value&&c.frames.value>0&&(g.value.render(e,i.value),o("render",h.renderer.value)),c.priority.value=0,c.mode.value==="always"?c.frames.value=1:c.frames.value=Math.max(0,c.frames.value-1)},"render");const{on:x,cancel:y}=$r(h);h.loop.setReady(!1),h.loop.start(),x(()=>{o("ready",h),h.loop.setReady(!0),Nr(e,h,o)}),ne(()=>{y(),h.loop.stop()});const _=100,P=Tn({every:_}),{isSupported:E,memory:j}=kn({interval:_}),C=160;let T=performance.now();const m=({timestamp:B})=>{h.scene.value&&(h.perf.memory.allocatedMem=Ge(h.scene.value)),B-T>=_&&(T=B,h.perf.fps.accumulator.push(P.value),h.perf.fps.accumulator.length>C&&h.perf.fps.accumulator.shift(),h.perf.fps.value=P.value,E.value&&j.value&&(h.perf.memory.accumulator.push(j.value.usedJSHeapSize/1024/1024),h.perf.memory.accumulator.length>C&&h.perf.memory.accumulator.shift(),h.perf.memory.currentMem=h.perf.memory.accumulator.reduce(($,D)=>$+D,0)/h.perf.memory.accumulator.length))};let w=0;const k=1,{pause:I}=Ue(({delta:B})=>{window.__TRES__DEVTOOLS__&&(m({timestamp:performance.now()}),w+=B,w>=k&&(window.__TRES__DEVTOOLS__.cb(h),w=0))},{immediate:!0});return ne(()=>{I()}),h}function Hr(){const e=ht("useTres");if(!e)throw new Error("useTresContext must be used together with useTresContextProvider");return e}const Yr=F(),qr=F(),Tt=F(),ue=new pt;let me=0,ge=0;Ue(()=>{Yr.trigger({delta:me,elapsed:ge,clock:ue}),qr.trigger({delta:me,elapsed:ge,clock:ue}),Tt.trigger({delta:me,elapsed:ge,clock:ue})},{immediate:!1});Tt.on(()=>{me=ue.getDelta(),ge=ue.getElapsedTime()});function Qr(e,t={},n={}){let r=e;const o=i=>{r=i};let l=new Proxy({},{});const a={has(i,u){return u in t||u in r},get(i,u,s){return u in t?t[u](r):r[u]},set(i,u,s){return n[u]?n[u](s,r,l,o):r[u]=s,!0}};return l=new Proxy({},a),l}const{logError:it}=St(),lt=["onClick","onContextMenu","onPointerMove","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onDoubleClick","onPointerDown","onPointerUp","onPointerCancel","onPointerMissed","onLostPointerCapture","onWheel"],Jr=e=>{const t=e.scene.value;function n(s,d,f,c){if(c||(c={}),c.args||(c.args=[]),s==="template"||mr(s))return null;let v=s.replace("Tres",""),p;if(s==="primitive"){(!U(c.object)||ze(c.object))&&it("Tres primitives need an 'object' prop, whose value is an object or shallowRef<object>"),v=c.object.type;const g={};p=Qr(c.object,{object:h=>h,isPrimitive:()=>!0,__tres:()=>g},{object:(h,x,y,_)=>{Sr(h,y,_,{patchProp:l,remove:o,insert:r},e)},__tres:h=>{Object.assign(g,h)}})}else{const g=Re.value[v];g||it("".concat(v," is not defined on the THREE namespace. Use extend to add it to the catalog.")),p=new g(...c.args)}return p?(p.isCamera&&(c!=null&&c.position||p.position.set(3,3,3),c!=null&&c.lookAt||p.lookAt(0,0,0)),p=Q(p,{...p.__tres,type:v,memoizedProps:c,eventCount:0,primitive:s==="primitive",attach:c.attach},e),p):null}function r(s,d){var f,c,v;if(!s)return;d=d||t;const p=s.__tres?s:Q(s,{},e),g=d.__tres?d:Q(d,{},e);s=re(p),d=re(g),s.__tres&&((f=s.__tres)==null?void 0:f.eventCount)>0&&((c=e.eventManager)==null||c.registerObject(s)),e.registerCamera(s),(v=e.eventManager)==null||v.registerPointerMissedObject(s),p.__tres.attach?Er(g,p,p.__tres.attach):Y(s)&&Y(g)&&(g.add(s),s.dispatchEvent({type:"added"})),p.__tres.parent=g,g.__tres.objects&&!g.__tres.objects.includes(p)&&g.__tres.objects.push(p)}function o(s,d){var f,c,v,p;if(!s)return;s!=null&&s.__tres&&((f=s.__tres)==null?void 0:f.eventCount)>0&&((c=e.eventManager)==null||c.deregisterObject(s)),d=Ie(d)?"default":d;const g=(v=s.__tres)==null?void 0:v.dispose;Ie(g)||(g===null?d=!1:d=g);const h=(p=s.__tres)==null?void 0:p.primitive,x=d==="default"?!h:!!d;if(s.__tres&&"objects"in s.__tres&&[...s.__tres.objects].forEach(y=>o(y,d)),x&&s.children&&[...s.children].forEach(y=>o(y,d)),jt(s,e),Ot(s,e),x&&!fr(s)){if(te(d))d(s);else if(te(s.dispose))try{s.dispose()}catch(y){}}"__tres"in s&&delete s.__tres}function l(s,d,f,c){var v,p;if(!s)return;let g=s,h=d;if(s.__tres&&(s.__tres.memoizedProps[d]=c),d==="attach"){const P=((v=s.__tres)==null?void 0:v.parent)||s.parent;o(s),Q(s,{attach:c},e),P&&r(s,P);return}if(d==="dispose"){s.__tres||(s=Q(s,{},e)),s.__tres.dispose=c;return}if(Y(s)&&h==="blocks-pointer-events"){c||c===""?s[h]=c:delete s[h];return}lt.includes(d)&&s.__tres&&(s.__tres.eventCount+=1);let x=je(h),y=g==null?void 0:g[x];if(h==="args"){const P=s,E=f!=null?f:[],j=c!=null?c:[],C=((p=s.__tres)==null?void 0:p.type)||s.type;C&&E.length&&!wr(E,j)&&(g=Object.assign(P,new Re.value[C](...c)));return}if(g.type==="BufferGeometry"){if(h==="args")return;g.setAttribute(je(h),new Wt(...c));return}if(h.includes("-")&&y===void 0){y=g;for(const P of h.split("-"))x=h=je(P),g=y,y=y==null?void 0:y[h]}let _=c;if(_===""&&(_=!0),te(y)){lt.includes(d)||($e(_)?s[x](..._):s[x](_)),x.startsWith("on")&&te(_)&&(g[x]=_);return}et(y)&&et(_)?y.mask=_.mask:xt(y)&&ar(_)?y.set(_):ir(y)&&lr(_)&&y.constructor===_.constructor?y.copy(_):Be(y)&&Array.isArray(_)?"fromArray"in y&&typeof y.fromArray=="function"?y.fromArray(_):y.set(..._):Be(y)&&typeof _=="number"?"setScalar"in y&&typeof y.setScalar=="function"?y.setScalar(_):y.set(_):g[x]=_,Et(s)}function a(s){var d;return((d=s==null?void 0:s.__tres)==null?void 0:d.parent)||null}function i(s){const d=Q(new Vt,{type:"Comment"},e);return d.name=s,d}function u(s){var d;const f=a(s),c=((d=f==null?void 0:f.__tres)==null?void 0:d.objects)||[],v=c.indexOf(s);return v<0||v>=c.length-1?null:c[v+1]}return{insert:r,remove:o,createElement:n,patchProp:l,parentNode:a,createText:()=>{},createComment:i,setText:()=>{},setElementText:()=>{},nextSibling:u,querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}}};function Xr(){return kt().__VUE_DEVTOOLS_GLOBAL_HOOK__}function kt(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const Kr=typeof Proxy=="function",Zr="devtools-plugin:setup",eo="plugin:settings:set";let se,Fe;function to(){var e;return se!==void 0||(typeof window<"u"&&window.performance?(se=!0,Fe=window.performance):typeof globalThis<"u"&&!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance?(se=!0,Fe=globalThis.perf_hooks.performance):se=!1),se}function no(){return to()?Fe.now():Date.now()}class ro{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const r={};if(t.settings)for(const a in t.settings){const i=t.settings[a];r[a]=i.defaultValue}const o="__vue-devtools-plugin-settings__".concat(t.id);let l=Object.assign({},r);try{const a=localStorage.getItem(o),i=JSON.parse(a);Object.assign(l,i)}catch(a){}this.fallbacks={getSettings(){return l},setSettings(a){try{localStorage.setItem(o,JSON.stringify(a))}catch(i){}l=a},now(){return no()}},n&&n.on(eo,(a,i)=>{a===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(a,i)=>this.target?this.target.on[i]:(...u)=>{this.onQueue.push({method:i,args:u})}}),this.proxiedTarget=new Proxy({},{get:(a,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...u)=>(this.targetQueue.push({method:i,args:u,resolve:()=>{}}),this.fallbacks[i](...u)):(...u)=>new Promise(s=>{this.targetQueue.push({method:i,args:u,resolve:s})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function oo(e,t){const n=e,r=kt(),o=Xr(),l=Kr&&n.enableEarlyProxy;if(o&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!l))o.emit(Zr,e,t);else{const a=l?new ro(n,o):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}function so(e,t){const n="▲ ■ ●".concat(e);typeof ut=="function"?ut(n,t):console.log(n)}function ut(e,t){throw new Error(e+t)}const At=e=>{const t={id:e.uuid,label:e.type,children:[],tags:[]};e.name!==""&&t.tags.push({label:e.name,textColor:5750629,backgroundColor:15793395});const n=Ge(e);return n>0&&t.tags.push({label:"".concat(Dr(n)," KB"),textColor:15707189,backgroundColor:16775644,tooltip:"Memory usage"}),e.type.includes("Light")&&(dr(e)&&t.tags.push({label:"".concat(e.intensity),textColor:9738662,backgroundColor:16316922,tooltip:"Intensity"}),t.tags.push({label:"#".concat(new ie(e.color).getHexString()),textColor:9738662,backgroundColor:16316922,tooltip:"Color"})),e.type.includes("Camera")&&(t.tags.push({label:"".concat(e.fov,"°"),textColor:9738662,backgroundColor:16316922,tooltip:"Field of view"}),t.tags.push({label:"x: ".concat(Math.round(e.position.x)," y: ").concat(Math.round(e.position.y)," z: ").concat(Math.round(e.position.z)),textColor:9738662,backgroundColor:16316922,tooltip:"Position"})),t};function Lt(e,t,n=""){e.children.forEach(r=>{if(r.type==="HightlightMesh"||n&&!r.type.includes(n)&&!r.name.includes(n))return;const o=At(r);t.children.push(o),Lt(r,o,n)})}const ao=[],ae="tres:inspector",io=an({sceneGraph:null});function lo(e,t){oo({id:"dev.esm.tres",label:"TresJS 🪐",logo:"https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg",packageName:"tresjs",homepage:"https://tresjs.org",componentStateTypes:ao,app:e},n=>{typeof n.now!="function"&&so("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addInspector({id:ae,label:"TresJS 🪐",icon:"account_tree",treeFilterPlaceholder:"Search instances"}),setInterval(()=>{n.sendInspectorTree(ae)},1e3),setInterval(()=>{n.notifyComponentUpdate()},5e3),n.on.getInspectorTree(l=>{if(l.inspectorId===ae){const a=At(t.scene.value);Lt(t.scene.value,a,l.filter),io.sceneGraph=a,l.rootNodes=[a]}});let r=null,o=null;n.on.getInspectorState(l=>{var a;if(l.inspectorId===ae){const[i]=t.scene.value.getObjectsByProperty("uuid",l.nodeId);if(!i)return;if(o&&r&&r.parent&&o.remove(r),i.isMesh){const u=Pr(i);i.add(u),r=u,o=i}l.state={object:Object.entries(i).map(([u,s])=>u==="children"?{key:u,value:s.filter(d=>d.type!=="HightlightMesh")}:{key:u,value:s,editable:!0}).filter(({key:u})=>u!=="parent")},i.isScene&&(l.state={...l.state,state:[{key:"Scene Info",value:{objects:i.children.length,memory:Ge(i),calls:t.renderer.value.info.render.calls,triangles:t.renderer.value.info.render.triangles,points:t.renderer.value.info.render.points,lines:t.renderer.value.info.render.lines}},{key:"Programs",value:((a=t.renderer.value.info.programs)==null?void 0:a.map(u=>({...u,programName:u.name})))||[]}]})}}),n.on.editInspectorState(l=>{l.inspectorId===ae&&xr(t.scene.value,l.nodeId,l.path,l.state.value)})})}const uo=["data-scene","data-tres"],co=ye({__name:"TresCanvas",props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},renderMode:{default:"always"},dpr:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},enableProvideBridge:{type:Boolean,default:!0},context:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0},precision:{},logarithmicDepthBuffer:{type:Boolean,default:void 0},reverseDepthBuffer:{type:Boolean}},emits:["render","click","double-click","context-menu","pointer-move","pointer-up","pointer-down","pointer-enter","pointer-leave","pointer-over","pointer-out","pointer-missed","wheel","ready"],setup(e,{expose:t,emit:n}){const r=e,o=n,l=tn(),a=z(),i=M(new ct),u=ce();_e(Bt);const s=(p,g=!1)=>ye({setup(){var h;const x=(h=ce())==null?void 0:h.appContext;x&&(x.app=u==null?void 0:u.appContext.app);const y={};function _(P){P&&(P.parent&&_(P.parent),P.provides&&Object.assign(y,P.provides))}return u!=null&&u.parent&&r.enableProvideBridge&&(_(u.parent),Reflect.ownKeys(y).forEach(P=>{he(P,y[P])})),he("useTres",p),he("extend",_e),typeof window<"u"&&lo(x==null?void 0:x.app,p),()=>Je(sn,null,g?[]:l.default())}}),d=(p,g=!1)=>{const h=s(p,g),{render:x}=on(Jr(p));x(Je(h),i.value)},f=(p,g=!1)=>{Mt(p.scene.value),g&&(p.renderer.value.dispose(),p.renderer.value.renderLists.dispose(),p.renderer.value.forceContextLoss()),i.value.__tres={root:p}},c=M(null);t({context:c,dispose:()=>f(c.value,!0)});const v=()=>{f(c.value),d(c.value,!0)};return Ve(()=>{var P;const p=a;c.value=Gr({scene:i.value,canvas:p,windowSize:(P=r.windowSize)!=null?P:!1,rendererOptions:r,emit:o});const{registerCamera:g,camera:h,cameras:x,deregisterCamera:y}=c.value;d(c.value);const _=()=>{const E=new ke(45,window.innerWidth/window.innerHeight,.1,1e3);E.position.set(3,3,3),E.lookAt(0,0,0),g(E);const j=we(()=>{x.value.length>=2&&(E.removeFromParent(),y(E),j==null||j())})};V(()=>r.camera,(E,j)=>{E&&g(E),j&&(j.removeFromParent(),y(j))},{immediate:!0}),h.value||_()}),ne(v),(p,g)=>(We(),mt("canvas",{ref_key:"canvas",ref:a,"data-scene":i.value.uuid,class:rn(p.$attrs.class),"data-tres":"tresjs ".concat(H(rr).version),style:nn({display:"block",width:"100%",height:"100%",position:p.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",...p.$attrs.style})},null,14,uo))}}),po=ye({__name:"base",setup(e){return _e({OrbitControls:Qt}),(t,n)=>(We(),ln(H(co),{"clear-color":"#82DBC5"},{default:ee(()=>n[0]||(n[0]=[J("TresPerspectiveCamera",{position:[3,3,3],fov:45,"look-at":[0,0,0]},null,-1),J("TresMesh",null,[J("TresTorusGeometry",{args:[1,.5,16,32]}),J("TresMeshBasicMaterial",{color:"orange"}),J("TresAmbientLight",{intensity:1})],-1)])),_:1}))}}),fo={class:"h-full"},vo={class:"h-[calc(100%-50px)] p-3"},ho=ye({__name:"index",setup(e){return(t,n)=>{const r=un,o=cn;return We(),mt("div",fo,[n[3]||(n[3]=J("h2",{class:"title"},"TresJs ",-1)),J("div",vo,[Z(o,{type:"border-card"},{default:ee(()=>[Z(r,{label:"基础"},{default:ee(()=>[Z(po)]),_:1}),Z(r,{label:"Config"},{default:ee(()=>n[0]||(n[0]=[Me("Config")])),_:1}),Z(r,{label:"Role"},{default:ee(()=>n[1]||(n[1]=[Me("Role")])),_:1}),Z(r,{label:"Task"},{default:ee(()=>n[2]||(n[2]=[Me("Task")])),_:1})]),_:1})])])}}}),wo=dn(ho,[["__scopeId","data-v-7d08efa2"]]);export{wo as default};
