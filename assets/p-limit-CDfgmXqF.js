import{$n as e,At as t,Dt as n,Ht as r,Ot as i,Q as a,an as o,hn as s,wt as c,xt as l}from"./index-Ug8tEEVv.js";/* empty css            *//* empty css            */var u=class{value;next;constructor(e){this.value=e}},d=class{#e;#t;#n;constructor(){this.clear()}enqueue(e){let t=new u(e);this.#e?(this.#t.next=t,this.#t=t):(this.#e=t,this.#t=t),this.#n++}dequeue(){let e=this.#e;if(e)return this.#e=this.#e.next,this.#n--,e.value}peek(){if(this.#e)return this.#e.value}clear(){this.#e=void 0,this.#t=void 0,this.#n=0}get size(){return this.#n}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e.value,e=e.next}};function f(e){p(e);let t=new d,n=0,r=()=>{n<e&&t.size>0&&(t.dequeue()(),n++)},i=()=>{n--,r()},a=async(e,t,n)=>{let r=(async()=>e(...n))();t(r);try{await r}catch{}i()},o=(i,o,s)=>{new Promise(e=>{t.enqueue(e)}).then(a.bind(void 0,i,o,s)),(async()=>{await Promise.resolve(),n<e&&r()})()},s=(e,...t)=>new Promise(n=>{o(e,n,t)});return Object.defineProperties(s,{activeCount:{get:()=>n},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}},concurrency:{get:()=>e,set(i){p(i),e=i,queueMicrotask(()=>{for(;n<e&&t.size>0;)r()})}}}),s}function p(e){if(!((Number.isInteger(e)||e===1/0)&&e>0))throw TypeError("Expected `concurrency` to be a number from 1 and up")}var m={class:`flex gap-5`},h={class:`border border-[#777777] p-5`},g=[`innerHTML`],_=t({__name:`p-limit`,setup(e){let t=s(``),u=e=>new Promise(n=>{t.value=`${t.value}<br/>${e}`,setTimeout(()=>{n(e)},2e3)}),d=async()=>{let e=f(1),t=[e(()=>u(`foo`)),e(()=>u(`bar`)),e(()=>u(`s`))];await Promise.all(t)};return(e,s)=>{let u=a;return r(),c(`div`,m,[l(`div`,null,[s[1]||=l(`p`,null,`p-limit 模拟并发请求发送`,-1),s[2]||=l(`p`,null,`三个请求 一个一个执行`,-1),i(u,{type:`primary`,onClick:d},{default:o(()=>s[0]||=[n(`发送`)]),_:1})]),l(`div`,h,[s[3]||=l(`p`,null,`请求结果打印：`,-1),l(`div`,{innerHTML:t.value},null,8,g)])])}}});export{_ as default};