typeof console>`u`&&((void 0).console={log:function(e){}}),L.Control.OSMGeocoder=L.Control.extend({options:{collapsed:!1,position:`topright`,text:`搜索`,placeholder:``,bounds:null,email:null,callback:function(e){if(e.length!=0){var t=e[0].boundingbox,n=new L.LatLng(t[0],t[2]),r=new L.LatLng(t[1],t[3]),i=new L.LatLngBounds([n,r]);this._map.fitBounds(i),e.forEach(e=>{e.geojson&&L.geoJSON(e.geojson,{style:{color:`#4CAF50`,weight:8,opacity:.75}}).addTo(this._map)})}}},_callbackId:0,initialize:function(e){L.Util.setOptions(this,e)},onAdd:function(e){this._map=e;var t=`leaflet-control-geocoder`,n=this._container=L.DomUtil.create(`div`,t);L.DomEvent.disableClickPropagation(n);var r=this._form=L.DomUtil.create(`form`,t+`-form`),i=this._input=document.createElement(`input`);i.type=`text`,i.placeholder=this.options.placeholder||``;var a=document.createElement(`input`);if(a.type=`submit`,a.value=this.options.text,r.appendChild(i),r.appendChild(a),L.DomEvent.addListener(r,`submit`,this._geocode,this),this.options.collapsed){L.DomEvent.addListener(n,`mouseover`,this._expand,this),L.DomEvent.addListener(n,`mouseout`,this._collapse,this);var o=this._layersLink=L.DomUtil.create(`a`,t+`-toggle`,n);o.href=`#`,o.title=`Nominatim Geocoder`,L.DomEvent.addListener(o,L.Browser.touch?`click`:`focus`,this._expand,this),this._map.on(`movestart`,this._collapse,this)}else this._expand();return n.appendChild(r),n},_createSearchResult:function(e,t){var n=.005,r=[];return r[0]={},r[0].boundingbox=[parseFloat(e)-n,parseFloat(e)+n,parseFloat(t)-n,parseFloat(t)+n],r[0].class=`boundary`,r[0].display_name=`Position: `+e+` `+t,r[0].lat=e,r[0].lon=t,r},_isLatLon:function(e){if(t=/(-?\d+\.\d+)\s(-?\d+\.\d+)/,n=t.exec(e),n!=null)return n;var t=/lat\D*(-?\d+\.\d+)\D*lon\D*(-?\d+\.\d+)/,n=t.exec(e);return n??null},_isLatLon_decMin:function(e){return/([ns])\s*(\d+)\D*(\d+\.\d+).?\s*([ew])\s*(\d+)\D*(\d+\.\d+)/i.exec(e.toLowerCase())??null},_geocode:function(e){L.DomEvent.preventDefault(e);var t=this._input.value;if(this._isLatLon(t)!=null){var n=this._isLatLon(t);this.options.callback.call(this,this._createSearchResult(n[1],n[2]));return}else if(this._isLatLon_decMin(t)!=null){var n=this._isLatLon_decMin(t),r=[];r.n=1,r.s=-1,r.e=1,r.w=-1,this.options.callback.call(this,this._createSearchResult(r[n[1]]*(Number(n[2])+n[3]/60),r[n[4]]*(Number(n[5])+n[6]/60)));return}window[`_l_osmgeocoder_`+this._callbackId]=L.Util.bind(this.options.callback,this);var i={q:this._input.value,json_callback:`_l_osmgeocoder_`+ this._callbackId++,format:`json`,polygon_geojson:1};if(this.options.bounds&&this.options.bounds!=null)if(this.options.bounds instanceof L.LatLngBounds)i.viewbox=this.options.bounds.toBBoxString(),i.bounded=1;else return;this.options.email&&this.options.email!=null&&typeof this.options.email==`string`&&(i.email=this.options.email);var a=location.protocol;a==`file:`&&(a=`https:`);var o=a+`//nominatim.openstreetmap.org/search`+L.Util.getParamString(i),s=document.createElement(`script`);s.type=`text/javascript`,s.src=o,s.id=this._callbackId,document.getElementsByTagName(`head`)[0].appendChild(s)},_expand:function(){L.DomUtil.addClass(this._container,`leaflet-control-geocoder-expanded`)},_collapse:function(){this._container.className=this._container.className.replace(` leaflet-control-geocoder-expanded`,``)}});