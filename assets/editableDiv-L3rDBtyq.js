import{$ as ElButton,$t as _plugin_vue_export_helper_default,B as ElDivider,J as ElTag,Lr as toDisplayString,Lt as price_tag_default,Nt as plus_default,On as mergeModels,Ot as memo_default,Pn as openBlock,Rn as renderList,Sn as defineComponent,Ur as __toESM,Wn as useModel,Yn as withCtx,Zt as ElIcon,_t as delete_default,bn as createVNode,cn as withModifiers,dr as unref,gn as createElementBlock,hn as createCommentVNode,ir as ref,ln as Fragment,mn as createBlock,pn as createBaseVNode,sn as withKeys,st as ElInput,yn as createTextVNode}from"./index-DzasR-yf.js";/* empty css            */import"./css-pkVQ7h14.js";/* empty css            *//* empty css            *//* empty css            *//* empty css            */var editor_default=_plugin_vue_export_helper_default(defineComponent({__name:`editor`,props:{matchList:{default:[]},matchListModifiers:{}},emits:mergeModels([`updateMatchList`],[`update:matchList`]),setup(e,{expose:O,emit:k}){let A=k,j=useModel(e,`matchList`),M=ref(null),N=ref(!1),P=()=>{N.value=!0},F=()=>{N.value=!1,M.value&&(H(),j.value.forEach(e=>V(e.matchLabel)))},L=e=>{e.preventDefault()},R=e=>{e.preventDefault()},z=()=>document.createTextNode(`​`),V=e=>{let O=M.value;if(!O)return;let k=window.getSelection();if(!k||k.rangeCount===0)return;let N=k.getRangeAt(0);O.contains(N.commonAncestorContainer)||(O.focus(),N=document.createRange(),N.selectNodeContents(O),N.collapse(!1)),N.deleteContents();let P=z(),F=z(),I=document.createElement(`span`);I.className=`matchItem`,I.contentEditable=`false`,I.dataset.character=e,I.innerHTML=`${e}<span class="remove-btn">×</span>`,I.querySelector(`.remove-btn`)?.addEventListener(`click`,e=>{e.stopPropagation();let O=I.dataset.character,k=j.value.findIndex(e=>e.matchLabel===O);k!==-1&&j.value.splice(k,1),A(`updateMatchList`)});let L=document.createDocumentFragment();L.appendChild(P),L.appendChild(I),L.appendChild(F),N.insertNode(L),N.setStartAfter(F),N.setEndAfter(F),k.removeAllRanges(),k.addRange(N),O.scrollTop=O.scrollHeight},H=()=>{M.value&&(M.value.innerHTML=``)};return O({insertMatch:V,clearValue:H}),(e,O)=>(openBlock(),createElementBlock(`div`,{ref_key:`inputBoxRef`,ref:M,contenteditable:`true`,id:`editor-box`,placeholder:`请插入`,class:`dark:!border-dark-border`,"on:beforeInput":L,onKeydown:R,onCompositionstart:P,onCompositionend:F,onPaste:O[0]||=withModifiers(()=>{},[`prevent`])},null,544))}}),[[`__scopeId`,`data-v-e6381aab`]]),_hoisted_1={class:`demo-card tag-studio-container`},_hoisted_2={class:`demo-content`},_hoisted_3={class:`studio-layout p-8 h-full flex flex-col gap-8`},_hoisted_4={class:`controls-area flex flex-wrap items-center gap-6 p-6 bg-white rounded-2xl border border-slate-100 shadow-sm`},_hoisted_5={class:`control-group`},_hoisted_6={class:`flex flex-wrap gap-2`},_hoisted_7={class:`control-group flex-1 min-width-[240px]`},_hoisted_8={class:`flex gap-2`},_hoisted_9={class:`editor-area flex-1 flex flex-col min-h-0`},_hoisted_10={class:`area-header flex items-center justify-between mb-4`},_hoisted_11={class:`text-sm font-bold text-slate-700 flex items-center gap-2`},_hoisted_12={class:`flex gap-2`},_hoisted_13={class:`editor-viewport flex-1 bg-white rounded-2xl border border-slate-200 shadow-inner overflow-hidden flex flex-col`},_hoisted_14={class:`viewport-toolbar px-4 py-2 border-b border-slate-50 bg-slate-50/30 flex justify-end`},_hoisted_15={class:`flex-1 overflow-auto p-6`},editableDiv_default=_plugin_vue_export_helper_default(defineComponent({__name:`index`,setup(O){let P=[`香蕉`,`西瓜`,`葡萄`,`荔枝`,`橘子`],R=ref([]),z=ref(),B=ref(``),U=e=>{e&&(R.value.push({matchLabel:e}),z.value.insertMatch(e),B.value=``)},G=()=>{z.value.clearValue(),R.value.forEach(e=>{z.value.insertMatch(e.matchLabel)})},K=()=>{z.value.clearValue(),R.value=[]};return(O,W)=>{let q=ElButton,J=ElDivider,Y=ElIcon,X=ElInput,Z=ElTag;return openBlock(),createElementBlock(`div`,_hoisted_1,[W[8]||=createBaseVNode(`div`,{class:`demo-info`},[createBaseVNode(`h4`,{class:`title`},`智能标签编辑工坊`),createBaseVNode(`p`,{class:`desc`},`基于 contenteditable 的富文本标签编辑器，支持自定义实体插入与动态同步`)],-1),createBaseVNode(`div`,_hoisted_2,[createBaseVNode(`div`,_hoisted_3,[createBaseVNode(`section`,_hoisted_4,[createBaseVNode(`div`,_hoisted_5,[W[4]||=createBaseVNode(`span`,{class:`text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block`},`快捷实体`,-1),createBaseVNode(`div`,_hoisted_6,[(openBlock(),createElementBlock(Fragment,null,renderList(P,e=>createVNode(q,{key:e,size:`small`,round:``,class:`hover:!border-indigo-400 hover:!text-indigo-600 transition-all`,onClick:O=>U(e)},{default:withCtx(()=>[createTextVNode(toDisplayString(e),1)]),_:2},1032,[`onClick`])),64))])]),createVNode(J,{direction:`vertical`,class:`!h-12 hidden md:block`}),createBaseVNode(`div`,_hoisted_7,[W[6]||=createBaseVNode(`span`,{class:`text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block`},`自定义插入`,-1),createBaseVNode(`div`,_hoisted_8,[createVNode(X,{modelValue:B.value,"onUpdate:modelValue":W[0]||=e=>B.value=e,modelModifiers:{trim:!0},placeholder:`键入内容后回车...`,class:`premium-input`,onKeyup:W[1]||=withKeys(e=>U(B.value),[`enter`])},{prefix:withCtx(()=>[createVNode(Y,null,{default:withCtx(()=>[createVNode(unref(price_tag_default))]),_:1})]),_:1},8,[`modelValue`]),createVNode(q,{type:`primary`,icon:unref(plus_default),onClick:W[2]||=e=>U(B.value),round:``},{default:withCtx(()=>W[5]||=[createTextVNode(`插入`)]),_:1},8,[`icon`])])])]),createBaseVNode(`section`,_hoisted_9,[createBaseVNode(`div`,_hoisted_10,[createBaseVNode(`h5`,_hoisted_11,[createVNode(Y,null,{default:withCtx(()=>[createVNode(unref(memo_default))]),_:1}),W[7]||=createTextVNode(` 实时编辑区域 `)]),createBaseVNode(`div`,_hoisted_12,[R.value.length?(openBlock(),createBlock(Z,{key:0,effect:`plain`,round:``,size:`small`,type:`info`},{default:withCtx(()=>[createTextVNode(`已检测到 `+toDisplayString(R.value.length)+` 个实体`,1)]),_:1})):createCommentVNode(``,!0)])]),createBaseVNode(`div`,_hoisted_13,[createBaseVNode(`header`,_hoisted_14,[createVNode(q,{icon:unref(delete_default),circle:``,size:`small`,type:`danger`,plain:``,onClick:K},null,8,[`icon`])]),createBaseVNode(`main`,_hoisted_15,[createVNode(editor_default,{ref_key:`editorRef`,ref:z,matchList:R.value,"onUpdate:matchList":W[3]||=e=>R.value=e,onUpdateMatchList:G},null,8,[`matchList`])])])])])])])}}}),[[`__scopeId`,`data-v-6bd0d915`]]);export{editableDiv_default as default};