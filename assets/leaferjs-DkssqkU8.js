import{Hr as __toESM,Ir as toDisplayString,Jn as withCtx,Mn as onUnmounted,Nn as openBlock,Qt as _plugin_vue_export_helper_default,b as ElTabPane,fn as createBaseVNode,hn as createElementBlock,jn as onMounted,or as shallowRef,rr as ref,x as ElTabs,xn as defineComponent,yn as createVNode}from"./index-_fc2eCpQ.js";/* empty css            *//* empty css            */var t;(function(a){a[a.No=0]=`No`,a[a.Yes=1]=`Yes`,a[a.NoAndSkip=2]=`NoAndSkip`,a[a.YesAndSkip=3]=`YesAndSkip`})(t||={});var e={};function s(a){return a===void 0}function r(a){return a==null}function i(a){return typeof a==`string`}var{isFinite:n}=Number;function o(a){return typeof a==`number`}var{isArray:l}=Array;function d(a){return a&&typeof a==`object`}function c(a){return JSON.stringify(a)===`{}`}var _={default:(a,u)=>(p(u,a),p(a,u),a),assign(a,u,h){let xC;Object.keys(u).forEach(SC=>{if(xC=u[SC],xC?.constructor===Object&&a[SC]?.constructor===Object)return p(a[SC],u[SC],h&&h[SC]);h&&SC in h?h[SC]?.constructor===Object&&p(a[SC]={},u[SC],h[SC]):a[SC]=u[SC]})},copyAttrs:(a,u,h)=>(h.forEach(h=>{s(u[h])||(a[h]=u[h])}),a),clone:a=>JSON.parse(JSON.stringify(a)),toMap(a){let u={};for(let h=0,xC=a.length;h<xC;h++)u[a[h]]=!0;return u},stintSet(a,u,h){h||=void 0,a[u]!==h&&(a[u]=h)}},{assign:p}=_,f=class{get __useNaturalRatio(){return!0}get __isLinePath(){let{path:a}=this;return a&&a.length===6&&a[0]===1}get __usePathBox(){return this.__pathInputed}get __blendMode(){if(this.eraser&&this.eraser!==`path`)return`destination-out`;let{blendMode:a}=this;return a===`pass-through`?null:a}constructor(a){this.__leaf=a}__get(a){if(this.__input){let u=this.__input[a];if(!s(u))return u}return this[a]}__getData(){let a={tag:this.__leaf.tag},{__input:u}=this,h;for(let xC in this)xC[0]!==`_`&&(h=u?u[xC]:void 0,a[xC]=s(h)?this[xC]:h);return a}__setInput(a,u){this.__input||={},this.__input[a]=u}__getInput(a){if(this.__input){let u=this.__input[a];if(!s(u))return u}if(a!==`path`||this.__pathInputed)return this[`_`+a]}__removeInput(a){this.__input&&!s(this.__input[a])&&(this.__input[a]=void 0)}__getInputData(a,u){let h={};if(a)if(l(a))for(let u of a)h[u]=this.__getInput(u);else for(let u in a)h[u]=this.__getInput(u);else{let a,u,{__input:xC}=this;for(let SC in h.tag=this.__leaf.tag,this)if(SC[0]!==`_`&&(a=this[`_`+SC],!s(a))){if(SC===`path`&&!this.__pathInputed)continue;u=xC?xC[SC]:void 0,h[SC]=s(u)?a:u}}if(u&&u.matrix){let{a,b:u,c:xC,d:SC,e:CC,f:wC}=this.__leaf.__localMatrix;h.matrix={a,b:u,c:xC,d:SC,e:CC,f:wC}}return h}__setMiddle(a,u){this.__middle||={},this.__middle[a]=u}__getMiddle(a){return this.__middle&&this.__middle[a]}__checkSingle(){let a=this;if(a.blendMode===`pass-through`){let u=this.__leaf;a.opacity<1&&(u.isBranch||a.__hasMultiPaint)||u.__hasEraser||a.eraser||a.filter?a.__single=!0:a.__single&&=!1}else a.__single=!0}__removeNaturalSize(){this.__naturalWidth=this.__naturalHeight=void 0}destroy(){this.__input=this.__middle=null}},{floor:g,max:y}=Math,m={toURL(a,u){let h=encodeURIComponent(a);return u===`text`?h=`data:text/plain;charset=utf-8,`+h:u===`svg`&&(h=`data:image/svg+xml,`+h),h},image:{hitCanvasSize:100,maxCacheSize:4096e3,maxPatternSize:8847360,crossOrigin:`anonymous`,isLarge:(a,u,h,xC)=>a.width*a.height*(u?u*h:1)>(xC||x.maxCacheSize),isSuperLarge:(a,u,h)=>x.isLarge(a,u,h,x.maxPatternSize),getRealURL(a){let{prefix:u,suffix:h}=m.image;return!h||a.startsWith(`data:`)||a.startsWith(`blob:`)||(a+=(a.includes(`?`)?`&`:`?`)+h),u&&a[0]===`/`&&(a=u+a),a},resize(a,u,h,xC,SC,CC,wC,TC,EC){let DC=m.origin.createCanvas(y(g(u+(xC||0)),1),y(g(h+(SC||0)),1)),OC=DC.getContext(`2d`);if(TC&&(OC.globalAlpha=TC),OC.imageSmoothingEnabled=!1!==wC,CC){let xC=u/CC.width,SC=h/CC.height;OC.setTransform(xC,0,0,SC,-CC.x*xC,-CC.y*SC),OC.drawImage(a,0,0,a.width,a.height)}else OC.drawImage(a,0,0,u,h);return DC},setPatternTransform(a,u,h){try{u&&a.setTransform&&(a.setTransform(u),u=void 0)}catch{}h&&_.stintSet(h,`transform`,u)}}},{image:x}=m,w={RUNTIME:`runtime`,LEAF:`leaf`,TASK:`task`,CNAVAS:`canvas`,IMAGE:`image`,types:{},create(a){let{types:u}=b;return u[a]?u[a]++:(u[a]=1,0)}},b=w,B,v,k,{max:C}=Math,O=[0,0,0,0],T={zero:[...O],tempFour:O,set:(a,u,h,xC,SC)=>(h===void 0&&(h=xC=SC=u),a[0]=u,a[1]=h,a[2]=xC,a[3]=SC,a),setTemp:(a,u,h,xC)=>P(O,a,u,h,xC),toTempAB(a,u,h){k=h?o(a)?u:a:[],o(a)?(B=R(a),v=u):o(u)?(B=a,v=R(u)):(B=a,v=u),B.length!==4&&(B=S(B)),v.length!==4&&(v=S(v))},get(a,u){let h;if(!o(a))switch(a.length){case 4:h=s(u)?a:[...a];break;case 2:h=[a[0],a[1],a[0],a[1]];break;case 3:h=[a[0],a[1],a[2],a[1]];break;case 1:a=a[0];break;default:a=0}if(h||=[a,a,a,a],!s(u))for(let a=0;a<4;a++)h[a]>u&&(h[a]=u);return h},max:(a,u,h)=>o(a)&&o(u)?C(a,u):(L(a,u,h),P(k,C(B[0],v[0]),C(B[1],v[1]),C(B[2],v[2]),C(B[3],v[3]))),add:(a,u,h)=>o(a)&&o(u)?a+u:(L(a,u,h),P(k,B[0]+v[0],B[1]+v[1],B[2]+v[2],B[3]+v[3])),swapAndScale(a,u,h,xC){if(o(a))return u===h?a*u:[a*h,a*u];let SC=xC?a:[],[CC,wC,TC,EC]=a.length===4?a:S(a);return P(SC,TC*h,EC*u,CC*h,wC*u)}},{set:P,get:S,setTemp:R,toTempAB:L}=T,{round:E,pow:I$1,max:M,floor:A,PI:W$1}=Math,N$1={within:(a,u,h)=>(d(u)&&(h=u.max,u=u.min),!s(u)&&a<u&&(a=u),!s(h)&&a>h&&(a=h),a),fourNumber:T.get,formatRotation:(a,u)=>(a%=360,u?a<0&&(a+=360):(a>180&&(a-=360),a<-180&&(a+=360)),N$1.float(a)),getGapRotation(a,u,h=0){let xC=a+h;if(u>1){let a=Math.abs(xC%u);(a<1||a>u-1)&&(xC=Math.round(xC/u)*u)}return xC-h},float(a,u){let h=s(u)?0xe8d4a51000:I$1(10,u);return(a=E(a*h)/h)===-0?0:a},sign:a=>a<0?-1:1,getScaleData(a,u,h,xC){if(xC||={},u){let a=(o(u)?u:u.width||0)/h.width,SC=(o(u)?u:u.height||0)/h.height;xC.scaleX=a||SC||1,xC.scaleY=SC||a||1}else a&&N$1.assignScale(xC,a);return xC},assignScale(a,u){o(u)?a.scaleX=a.scaleY=u:(a.scaleX=u.x,a.scaleY=u.y)},getFloorScale:(a,u=1)=>M(A(a),u)/a,randInt:Y$1,randColor:a=>`rgba(${Y$1(255)},${Y$1(255)},${Y$1(255)},${a||1})`};function Y$1(a){return Math.round(Math.random()*a)}var D=W$1/180,X$1=2*W$1,z$1=W$1/2;function F$1(){return{x:0,y:0}}function U$1(){return{x:0,y:0,width:0,height:0}}function j$1(){return{a:1,b:0,c:0,d:1,e:0,f:0}}var{sin:H,cos:G$1,acos:V$1,sqrt:q$1}=Math,{float:Q$1}=N$1,J$2={};function Z$2(){return Object.assign(Object.assign(Object.assign({},{a:1,b:0,c:0,d:1,e:0,f:0}),{x:0,y:0,width:0,height:0}),{scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0})}var $$1={defaultMatrix:{a:1,b:0,c:0,d:1,e:0,f:0},defaultWorld:Z$2(),tempMatrix:{},set(a,u=1,h=0,xC=0,SC=1,CC=0,wC=0){a.a=u,a.b=h,a.c=xC,a.d=SC,a.e=CC,a.f=wC},get:j$1,getWorld:Z$2,copy(a,u){a.a=u.a,a.b=u.b,a.c=u.c,a.d=u.d,a.e=u.e,a.f=u.f},translate(a,u,h){a.e+=u,a.f+=h},translateInner(a,u,h,xC){a.e+=a.a*u+a.c*h,a.f+=a.b*u+a.d*h,xC&&(a.e-=u,a.f-=h)},scale(a,u,h=u){a.a*=u,a.b*=u,a.c*=h,a.d*=h},pixelScale(a,u,h){h||=a,h.a=a.a*u,h.b=a.b*u,h.c=a.c*u,h.d=a.d*u,h.e=a.e*u,h.f=a.f*u},scaleOfOuter(a,u,h,xC){K$1.toInnerPoint(a,u,J$2),K$1.scaleOfInner(a,J$2,h,xC)},scaleOfInner(a,u,h,xC=h){K$1.translateInner(a,u.x,u.y),K$1.scale(a,h,xC),K$1.translateInner(a,-u.x,-u.y)},rotate(a,u){let{a:h,b:xC,c:SC,d:CC}=a,wC=G$1(u*=D),TC=H(u);a.a=h*wC-xC*TC,a.b=h*TC+xC*wC,a.c=SC*wC-CC*TC,a.d=SC*TC+CC*wC},rotateOfOuter(a,u,h){K$1.toInnerPoint(a,u,J$2),K$1.rotateOfInner(a,J$2,h)},rotateOfInner(a,u,h){K$1.translateInner(a,u.x,u.y),K$1.rotate(a,h),K$1.translateInner(a,-u.x,-u.y)},skew(a,u,h){let{a:xC,b:SC,c:CC,d:wC}=a;h&&(h*=D,a.a=xC+CC*h,a.b=SC+wC*h),u&&(u*=D,a.c=CC+xC*u,a.d=wC+SC*u)},skewOfOuter(a,u,h,xC){K$1.toInnerPoint(a,u,J$2),K$1.skewOfInner(a,J$2,h,xC)},skewOfInner(a,u,h,xC=0){K$1.translateInner(a,u.x,u.y),K$1.skew(a,h,xC),K$1.translateInner(a,-u.x,-u.y)},multiply(a,u){let{a:h,b:xC,c:SC,d:CC,e:wC,f:TC}=a;a.a=u.a*h+u.b*SC,a.b=u.a*xC+u.b*CC,a.c=u.c*h+u.d*SC,a.d=u.c*xC+u.d*CC,a.e=u.e*h+u.f*SC+wC,a.f=u.e*xC+u.f*CC+TC},multiplyParent(a,u,h,xC,SC){let{e:CC,f:wC}=a;if(h||=a,s(xC)&&(xC=a.a!==1||a.b||a.c||a.d!==1),xC){let{a:xC,b:CC,c:wC,d:TC}=a;h.a=xC*u.a+CC*u.c,h.b=xC*u.b+CC*u.d,h.c=wC*u.a+TC*u.c,h.d=wC*u.b+TC*u.d,SC&&(h.scaleX=u.scaleX*SC.scaleX,h.scaleY=u.scaleY*SC.scaleY)}else h.a=u.a,h.b=u.b,h.c=u.c,h.d=u.d,SC&&(h.scaleX=u.scaleX,h.scaleY=u.scaleY);h.e=CC*u.a+wC*u.c+u.e,h.f=CC*u.b+wC*u.d+u.f},divide(a,u){K$1.multiply(a,K$1.tempInvert(u))},divideParent(a,u){K$1.multiplyParent(a,K$1.tempInvert(u))},tempInvert(a){let{tempMatrix:u}=K$1;return K$1.copy(u,a),K$1.invert(u),u},invert(a){let{a:u,b:h,c:xC,d:SC,e:CC,f:wC}=a;if(h||xC){let TC=1/(u*SC-h*xC);a.a=SC*TC,a.b=-h*TC,a.c=-xC*TC,a.d=u*TC,a.e=-(CC*SC-wC*xC)*TC,a.f=-(wC*u-CC*h)*TC}else if(u===1&&SC===1)a.e=-CC,a.f=-wC;else{let h=1/(u*SC);a.a=SC*h,a.d=u*h,a.e=-CC*SC*h,a.f=-wC*u*h}},toOuterPoint(a,u,h,xC){let{x:SC,y:CC}=u;h||=u,h.x=SC*a.a+CC*a.c,h.y=SC*a.b+CC*a.d,xC||(h.x+=a.e,h.y+=a.f)},toInnerPoint(a,u,h,xC){let{a:SC,b:CC,c:wC,d:TC}=a,EC=1/(SC*TC-CC*wC),{x:DC,y:OC}=u;if(h||=u,h.x=(DC*TC-OC*wC)*EC,h.y=(OC*SC-DC*CC)*EC,!xC){let{e:u,f:xC}=a;h.x-=(u*TC-xC*wC)*EC,h.y-=(xC*SC-u*CC)*EC}},setLayout(a,u,h,xC,SC){let{x:CC,y:wC,scaleX:TC,scaleY:EC}=u;if(s(SC)&&(SC=u.rotation||u.skewX||u.skewY),SC){let{rotation:h,skewX:xC,skewY:SC}=u,CC=h*D,wC=G$1(CC),DC=H(CC);if(xC||SC){let u=xC*D,h=SC*D;a.a=(wC+h*-DC)*TC,a.b=(DC+h*wC)*TC,a.c=(u*wC-DC)*EC,a.d=(wC+u*DC)*EC}else a.a=wC*TC,a.b=DC*TC,a.c=-DC*EC,a.d=wC*EC}else a.a=TC,a.b=0,a.c=0,a.d=EC;a.e=CC,a.f=wC,(h||=xC)&&K$1.translateInner(a,-h.x,-h.y,!xC)},getLayout(a,u,h,xC){let{a:SC,b:CC,c:wC,d:TC,e:EC,f:DC}=a,OC,kC,AC,jC,MC,NC=EC,PC=DC;if(CC||wC){let a=SC*TC-CC*wC;if(wC&&!xC){OC=q$1(SC*SC+CC*CC),kC=a/OC;let u=SC/OC;AC=CC>0?V$1(u):-V$1(u)}else{kC=q$1(wC*wC+TC*TC),OC=a/kC;let u=wC/kC;AC=z$1-(TC>0?V$1(-u):-V$1(u))}let u=Q$1(G$1(AC)),h=H(AC);OC=Q$1(OC),kC=Q$1(kC),jC=u?Q$1((wC/kC+h)/u/D,9):0,MC=u?Q$1((CC/OC-h)/u/D,9):0,AC=Q$1(AC/D)}else OC=SC,kC=TC,AC=jC=MC=0;return(u=h||u)&&(NC+=u.x*SC+u.y*wC,PC+=u.x*CC+u.y*TC,h||(NC-=u.x,PC-=u.y)),{x:NC,y:PC,scaleX:OC,scaleY:kC,rotation:AC,skewX:jC,skewY:MC}},withScale(a,u,h=u){let xC=a;if(!u||!h){let{a:xC,b:SC,c:CC,d:wC}=a;SC||CC?h=(xC*wC-SC*CC)/(u=q$1(xC*xC+SC*SC)):(u=xC,h=wC)}return xC.scaleX=u,xC.scaleY=h,xC},reset(a){K$1.set(a)}},K$1=$$1,{toInnerPoint:tt$2,toOuterPoint:et$2}=$$1,{sin:st$2,cos:rt$1,abs:it$2,sqrt:nt$2,atan2:ot$2,min:at$2,round:ht$2}=Math,lt$2={defaultPoint:{x:0,y:0},tempPoint:{},tempRadiusPoint:{},set(a,u=0,h=0){a.x=u,a.y=h},setRadius(a,u,h){a.radiusX=u,a.radiusY=s(h)?u:h},copy(a,u){a.x=u.x,a.y=u.y},copyFrom(a,u,h){a.x=u,a.y=h},round(a,u){a.x=u?ht$2(a.x-.5)+.5:ht$2(a.x),a.y=u?ht$2(a.y-.5)+.5:ht$2(a.y)},move(a,u,h){d(u)?(a.x+=u.x,a.y+=u.y):(a.x+=u,a.y+=h)},scale(a,u,h=u){a.x&&(a.x*=u),a.y&&(a.y*=h)},scaleOf(a,u,h,xC=h){a.x+=(a.x-u.x)*(h-1),a.y+=(a.y-u.y)*(xC-1)},rotate(a,u,h){h||=dt$2.defaultPoint;let xC=rt$1(u*=D),SC=st$2(u),CC=a.x-h.x,wC=a.y-h.y;a.x=h.x+CC*xC-wC*SC,a.y=h.y+CC*SC+wC*xC},tempToInnerOf(a,u){let{tempPoint:h}=dt$2;return ct$2(h,a),tt$2(u,h,h),h},tempToOuterOf(a,u){let{tempPoint:h}=dt$2;return ct$2(h,a),et$2(u,h,h),h},tempToInnerRadiusPointOf(a,u){let{tempRadiusPoint:h}=dt$2;return ct$2(h,a),dt$2.toInnerRadiusPointOf(a,u,h),h},toInnerRadiusPointOf(a,u,h){h||=a,tt$2(u,a,h),h.radiusX=Math.abs(a.radiusX/u.scaleX),h.radiusY=Math.abs(a.radiusY/u.scaleY)},toInnerOf(a,u,h){tt$2(u,a,h)},toOuterOf(a,u,h){et$2(u,a,h)},getCenter:(a,u)=>({x:a.x+(u.x-a.x)/2,y:a.y+(u.y-a.y)/2}),getCenterX:(a,u)=>a+(u-a)/2,getCenterY:(a,u)=>a+(u-a)/2,getDistance:(a,u)=>ut$2(a.x,a.y,u.x,u.y),getDistanceFrom(a,u,h,xC){let SC=it$2(h-a),CC=it$2(xC-u);return nt$2(SC*SC+CC*CC)},getMinDistanceFrom:(a,u,h,xC,SC,CC)=>at$2(ut$2(a,u,h,xC),ut$2(h,xC,SC,CC)),getAngle:(a,u)=>_t$2(a,u)/D,getRotation:(a,u,h,xC)=>(xC||=u,dt$2.getRadianFrom(a.x,a.y,u.x,u.y,h.x,h.y,xC.x,xC.y)/D),getRadianFrom(a,u,h,xC,SC,CC,wC,TC){s(wC)&&(wC=h,TC=xC);let EC=a-h,DC=u-xC,OC=SC-wC,kC=CC-TC;return Math.atan2(EC*kC-DC*OC,EC*OC+DC*kC)},getAtan2:(a,u)=>ot$2(u.y-a.y,u.x-a.x),getDistancePoint(a,u,h,xC){let SC=_t$2(a,u);return(u=xC?u:{}).x=a.x+rt$1(SC)*h,u.y=a.y+st$2(SC)*h,u},toNumberPoints(a){let u=a;return d(a[0])&&(u=[],a.forEach(a=>u.push(a.x,a.y))),u},reset(a){dt$2.reset(a)}},dt$2=lt$2,{getDistanceFrom:ut$2,copy:ct$2,getAtan2:_t$2}=dt$2;new class a{constructor(a,u){this.set(a,u)}set(a,u){return d(a)?lt$2.copy(this,a):lt$2.set(this,a,u),this}get(){let{x:a,y:u}=this;return{x:a,y:u}}clone(){return new a(this)}move(a,u){return lt$2.move(this,a,u),this}scale(a,u){return lt$2.scale(this,a,u),this}scaleOf(a,u,h){return lt$2.scaleOf(this,a,u,h),this}rotate(a,u){return lt$2.rotate(this,a,u),this}rotateOf(a,u){return lt$2.rotate(this,u,a),this}getRotation(a,u,h){return lt$2.getRotation(this,a,u,h)}toInnerOf(a,u){return lt$2.toInnerOf(this,a,u),this}toOuterOf(a,u){return lt$2.toOuterOf(this,a,u),this}getCenter(u){return new a(lt$2.getCenter(this,u))}getDistance(a){return lt$2.getDistance(this,a)}getDistancePoint(u,h,xC){return new a(lt$2.getDistancePoint(this,u,h,xC))}getAngle(a){return lt$2.getAngle(this,a)}getAtan2(a){return lt$2.getAtan2(this,a)}reset(){return lt$2.reset(this),this}};var gt$1=class a{constructor(a,u,h,xC,SC,CC){this.set(a,u,h,xC,SC,CC)}set(a,u,h,xC,SC,CC){return d(a)?$$1.copy(this,a):$$1.set(this,a,u,h,xC,SC,CC),this}setWith(a){return $$1.copy(this,a),this.scaleX=a.scaleX,this.scaleY=a.scaleY,this}get(){let{a,b:u,c:h,d:xC,e:SC,f:CC}=this;return{a,b:u,c:h,d:xC,e:SC,f:CC}}clone(){return new a(this)}translate(a,u){return $$1.translate(this,a,u),this}translateInner(a,u){return $$1.translateInner(this,a,u),this}scale(a,u){return $$1.scale(this,a,u),this}scaleWith(a,u){return $$1.scale(this,a,u),this.scaleX*=a,this.scaleY*=u||a,this}pixelScale(a){return $$1.pixelScale(this,a),this}scaleOfOuter(a,u,h){return $$1.scaleOfOuter(this,a,u,h),this}scaleOfInner(a,u,h){return $$1.scaleOfInner(this,a,u,h),this}rotate(a){return $$1.rotate(this,a),this}rotateOfOuter(a,u){return $$1.rotateOfOuter(this,a,u),this}rotateOfInner(a,u){return $$1.rotateOfInner(this,a,u),this}skew(a,u){return $$1.skew(this,a,u),this}skewOfOuter(a,u,h){return $$1.skewOfOuter(this,a,u,h),this}skewOfInner(a,u,h){return $$1.skewOfInner(this,a,u,h),this}multiply(a){return $$1.multiply(this,a),this}multiplyParent(a){return $$1.multiplyParent(this,a),this}divide(a){return $$1.divide(this,a),this}divideParent(a){return $$1.divideParent(this,a),this}invert(){return $$1.invert(this),this}invertWith(){return $$1.invert(this),this.scaleX=1/this.scaleX,this.scaleY=1/this.scaleY,this}toOuterPoint(a,u,h){$$1.toOuterPoint(this,a,u,h)}toInnerPoint(a,u,h){$$1.toInnerPoint(this,a,u,h)}setLayout(a,u,h){return $$1.setLayout(this,a,u,h),this}getLayout(a,u,h){return $$1.getLayout(this,a,u,h)}withScale(a,u){return $$1.withScale(this,a,u)}reset(){$$1.reset(this)}};new gt$1;var mt$3={tempPointBounds:{},setPoint(a,u,h){a.minX=a.maxX=u,a.minY=a.maxY=h},addPoint(a,u,h){a.minX=u<a.minX?u:a.minX,a.minY=h<a.minY?h:a.minY,a.maxX=u>a.maxX?u:a.maxX,a.maxY=h>a.maxY?h:a.maxY},addBounds(a,u,h,xC,SC){xt$3(a,u,h),xt$3(a,u+xC,h+SC)},copy(a,u){a.minX=u.minX,a.minY=u.minY,a.maxX=u.maxX,a.maxY=u.maxY},addPointBounds(a,u){a.minX=u.minX<a.minX?u.minX:a.minX,a.minY=u.minY<a.minY?u.minY:a.minY,a.maxX=u.maxX>a.maxX?u.maxX:a.maxX,a.maxY=u.maxY>a.maxY?u.maxY:a.maxY},toBounds(a,u){u.x=a.minX,u.y=a.minY,u.width=a.maxX-a.minX,u.height=a.maxY-a.minY}},{addPoint:xt$3}=mt$3,wt$2,bt$3;(function(a){a[a.top=0]=`top`,a[a.right=1]=`right`,a[a.bottom=2]=`bottom`,a[a.left=3]=`left`})(wt$2||={}),function(a){a[a.topLeft=0]=`topLeft`,a[a.top=1]=`top`,a[a.topRight=2]=`topRight`,a[a.right=3]=`right`,a[a.bottomRight=4]=`bottomRight`,a[a.bottom=5]=`bottom`,a[a.bottomLeft=6]=`bottomLeft`,a[a.left=7]=`left`,a[a.center=8]=`center`,a[a[`top-left`]=0]=`top-left`,a[a[`top-right`]=2]=`top-right`,a[a[`bottom-right`]=4]=`bottom-right`,a[a[`bottom-left`]=6]=`bottom-left`}(bt$3||={});var Bt$3=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:1,y:.5},{x:1,y:1},{x:.5,y:1},{x:0,y:1},{x:0,y:.5},{x:.5,y:.5}];Bt$3.forEach(a=>a.type=`percent`);var vt$2={directionData:Bt$3,tempPoint:{},get:kt$2,toPoint(a,u,h,xC,SC,CC){let wC=kt$2(a);h.x=wC.x,h.y=wC.y,wC.type===`percent`&&(h.x*=u.width,h.y*=u.height,SC&&(CC||(h.x-=SC.x,h.y-=SC.y),wC.x&&(h.x-=wC.x===1?SC.width:wC.x===.5?wC.x*SC.width:0),wC.y&&(h.y-=wC.y===1?SC.height:wC.y===.5?wC.y*SC.height:0))),xC||(h.x+=u.x,h.y+=u.y)},getPoint:(a,u,h)=>(h||={},vt$2.toPoint(a,u,h,!0),h)};function kt$2(a){return i(a)?Bt$3[bt$3[a]]:a}var{toPoint:Ct$3}=vt$2,Ot$3={toPoint(a,u,h,xC,SC,CC){Ct$3(a,h,xC,SC,u,CC)}},{tempPointBounds:Tt$3,setPoint:Pt$3,addPoint:St$3,toBounds:Rt$3}=mt$3,{toOuterPoint:Lt$3}=$$1,{float:Et$3,fourNumber:It$3}=N$1,{floor:Mt$3,ceil:At$3}=Math,Wt$3,Nt$3,Yt$3,Dt$3,Xt$3={},zt$3={},Ft$3={},Ut$3={tempBounds:Ft$3,set(a,u=0,h=0,xC=0,SC=0){a.x=u,a.y=h,a.width=xC,a.height=SC},copy(a,u){a.x=u.x,a.y=u.y,a.width=u.width,a.height=u.height},copyAndSpread(a,u,h,xC,SC){let{x:CC,y:wC,width:TC,height:EC}=u;if(l(h)){let u=It$3(h);xC?jt$3.set(a,CC+u[3],wC+u[0],TC-u[1]-u[3],EC-u[2]-u[0]):jt$3.set(a,CC-u[3],wC-u[0],TC+u[1]+u[3],EC+u[2]+u[0])}else xC&&(h=-h),jt$3.set(a,CC-h,wC-h,TC+2*h,EC+2*h);SC&&(SC===`width`?(a.y=wC,a.height=EC):(a.x=CC,a.width=TC))},minX:a=>a.width>0?a.x:a.x+a.width,minY:a=>a.height>0?a.y:a.y+a.height,maxX:a=>a.width>0?a.x+a.width:a.x,maxY:a=>a.height>0?a.y+a.height:a.y,move(a,u,h){a.x+=u,a.y+=h},scroll(a,u){a.x+=u.scrollX,a.y+=u.scrollY},getByMove:(a,u,h)=>(a=Object.assign({},a),jt$3.move(a,u,h),a),toOffsetOutBounds(a,u,h){u?Gt$2(u,a):u=a,h||=a,u.offsetX=jt$3.maxX(h),u.offsetY=jt$3.maxY(h),jt$3.move(u,-u.offsetX,-u.offsetY)},scale(a,u,h=u,xC){xC||lt$2.scale(a,u,h),a.width*=u,a.height*=h},scaleOf(a,u,h,xC=h){lt$2.scaleOf(a,u,h,xC),a.width*=h,a.height*=xC},tempToOuterOf:(a,u)=>(jt$3.copy(Ft$3,a),jt$3.toOuterOf(Ft$3,u),Ft$3),getOuterOf:(a,u)=>(a=Object.assign({},a),jt$3.toOuterOf(a,u),a),toOuterOf(a,u,h){if(h||=a,u.b===0&&u.c===0){let{a:xC,d:SC,e:CC,f:wC}=u;xC>0?(h.width=a.width*xC,h.x=CC+a.x*xC):(h.width=a.width*-xC,h.x=CC+a.x*xC-h.width),SC>0?(h.height=a.height*SC,h.y=wC+a.y*SC):(h.height=a.height*-SC,h.y=wC+a.y*SC-h.height)}else Xt$3.x=a.x,Xt$3.y=a.y,Lt$3(u,Xt$3,zt$3),Pt$3(Tt$3,zt$3.x,zt$3.y),Xt$3.x=a.x+a.width,Lt$3(u,Xt$3,zt$3),St$3(Tt$3,zt$3.x,zt$3.y),Xt$3.y=a.y+a.height,Lt$3(u,Xt$3,zt$3),St$3(Tt$3,zt$3.x,zt$3.y),Xt$3.x=a.x,Lt$3(u,Xt$3,zt$3),St$3(Tt$3,zt$3.x,zt$3.y),Rt$3(Tt$3,h)},toInnerOf(a,u,h){h||=a,jt$3.move(h,-u.e,-u.f),jt$3.scale(h,1/u.a,1/u.d)},getFitMatrix(a,u,h=1){let xC=Math.min(h,jt$3.getFitScale(a,u));return new gt$1(xC,0,0,xC,-u.x*xC,-u.y*xC)},getFitScale(a,u,h){let xC=a.width/u.width,SC=a.height/u.height;return h?Math.max(xC,SC):Math.min(xC,SC)},put(a,u,h=`center`,xC=1,SC=!0,CC){CC||=u,i(xC)&&(xC=jt$3.getFitScale(a,u,xC===`cover`)),Ft$3.width=SC?u.width*=xC:u.width*xC,Ft$3.height=SC?u.height*=xC:u.height*xC,Ot$3.toPoint(h,Ft$3,a,CC,!0,!0)},getSpread(a,u,h){let xC={};return jt$3.copyAndSpread(xC,a,u,!1,h),xC},spread(a,u,h){jt$3.copyAndSpread(a,a,u,!1,h)},shrink(a,u,h){jt$3.copyAndSpread(a,a,u,!0,h)},ceil(a){let{x:u,y:h}=a;a.x=Mt$3(a.x),a.y=Mt$3(a.y),a.width=u>a.x?At$3(a.width+u-a.x):At$3(a.width),a.height=h>a.y?At$3(a.height+h-a.y):At$3(a.height)},unsign(a){a.width<0&&(a.x+=a.width,a.width=-a.width),a.height<0&&(a.y+=a.height,a.height=-a.height)},float(a,u){a.x=Et$3(a.x,u),a.y=Et$3(a.y,u),a.width=Et$3(a.width,u),a.height=Et$3(a.height,u)},add(a,u,h){Wt$3=a.x+a.width,Nt$3=a.y+a.height,Yt$3=u.x,Dt$3=u.y,h||(Yt$3+=u.width,Dt$3+=u.height),Wt$3=Wt$3>Yt$3?Wt$3:Yt$3,Nt$3=Nt$3>Dt$3?Nt$3:Dt$3,a.x=a.x<u.x?a.x:u.x,a.y=a.y<u.y?a.y:u.y,a.width=Wt$3-a.x,a.height=Nt$3-a.y},addList(a,u){jt$3.setListWithFn(a,u,void 0,!0)},setList(a,u,h=!1){jt$3.setListWithFn(a,u,void 0,h)},addListWithFn(a,u,h){jt$3.setListWithFn(a,u,h,!0)},setListWithFn(a,u,h,xC=!1){let SC,CC=!0;for(let wC=0,TC=u.length;wC<TC;wC++)SC=h?h(u[wC],wC):u[wC],SC&&(SC.width||SC.height)&&(CC?(CC=!1,xC||Gt$2(a,SC)):Ht$3(a,SC));CC&&jt$3.reset(a)},setPoints(a,u){u.forEach((a,u)=>u===0?Pt$3(Tt$3,a.x,a.y):St$3(Tt$3,a.x,a.y)),Rt$3(Tt$3,a)},setPoint(a,u){jt$3.set(a,u.x,u.y)},addPoint(a,u){Ht$3(a,u,!0)},getPoints(a){let{x:u,y:h,width:xC,height:SC}=a;return[{x:u,y:h},{x:u+xC,y:h},{x:u+xC,y:h+SC},{x:u,y:h+SC}]},hitRadiusPoint:(a,u,h)=>(h&&(u=lt$2.tempToInnerRadiusPointOf(u,h)),u.x>=a.x-u.radiusX&&u.x<=a.x+a.width+u.radiusX&&u.y>=a.y-u.radiusY&&u.y<=a.y+a.height+u.radiusY),hitPoint:(a,u,h)=>(h&&(u=lt$2.tempToInnerOf(u,h)),u.x>=a.x&&u.x<=a.x+a.width&&u.y>=a.y&&u.y<=a.y+a.height),hit:(a,u,h)=>(h&&(u=jt$3.tempToOuterOf(u,h)),!(a.y+a.height<u.y||u.y+u.height<a.y||a.x+a.width<u.x||u.x+u.width<a.x)),includes:(a,u,h)=>(h&&(u=jt$3.tempToOuterOf(u,h)),a.x<=u.x&&a.y<=u.y&&a.x+a.width>=u.x+u.width&&a.y+a.height>=u.y+u.height),getIntersectData(a,u,h){if(h&&(u=jt$3.tempToOuterOf(u,h)),!jt$3.hit(a,u))return{x:0,y:0,width:0,height:0};let{x:xC,y:SC,width:CC,height:wC}=u;return Wt$3=xC+CC,Nt$3=SC+wC,Yt$3=a.x+a.width,Dt$3=a.y+a.height,xC=xC>a.x?xC:a.x,SC=SC>a.y?SC:a.y,Wt$3=Wt$3<Yt$3?Wt$3:Yt$3,Nt$3=Nt$3<Dt$3?Nt$3:Dt$3,CC=Wt$3-xC,wC=Nt$3-SC,{x:xC,y:SC,width:CC,height:wC}},intersect(a,u,h){jt$3.copy(a,jt$3.getIntersectData(a,u,h))},isSame:(a,u)=>a.x===u.x&&a.y===u.y&&a.width===u.width&&a.height===u.height,isEmpty:a=>a.x===0&&a.y===0&&a.width===0&&a.height===0,reset(a){jt$3.set(a)}},jt$3=Ut$3,{add:Ht$3,copy:Gt$2}=jt$3,Vt$3=class a{get minX(){return Ut$3.minX(this)}get minY(){return Ut$3.minY(this)}get maxX(){return Ut$3.maxX(this)}get maxY(){return Ut$3.maxY(this)}constructor(a,u,h,xC){this.set(a,u,h,xC)}set(a,u,h,xC){return d(a)?Ut$3.copy(this,a):Ut$3.set(this,a,u,h,xC),this}get(){let{x:a,y:u,width:h,height:xC}=this;return{x:a,y:u,width:h,height:xC}}clone(){return new a(this)}move(a,u){return Ut$3.move(this,a,u),this}scale(a,u,h){return Ut$3.scale(this,a,u,h),this}scaleOf(a,u,h){return Ut$3.scaleOf(this,a,u,h),this}toOuterOf(a,u){return Ut$3.toOuterOf(this,a,u),this}toInnerOf(a,u){return Ut$3.toInnerOf(this,a,u),this}getFitMatrix(a,u){return Ut$3.getFitMatrix(this,a,u)}put(a,u,h){Ut$3.put(this,a,u,h)}spread(a,u){return Ut$3.spread(this,a,u),this}shrink(a,u){return Ut$3.shrink(this,a,u),this}ceil(){return Ut$3.ceil(this),this}unsign(){return Ut$3.unsign(this),this}float(a){return Ut$3.float(this,a),this}add(a){return Ut$3.add(this,a),this}addList(a){return Ut$3.setList(this,a,!0),this}setList(a){return Ut$3.setList(this,a),this}addListWithFn(a,u){return Ut$3.setListWithFn(this,a,u,!0),this}setListWithFn(a,u){return Ut$3.setListWithFn(this,a,u),this}setPoint(a){return Ut$3.setPoint(this,a),this}setPoints(a){return Ut$3.setPoints(this,a),this}addPoint(a){return Ut$3.addPoint(this,a),this}getPoints(){return Ut$3.getPoints(this)}hitPoint(a,u){return Ut$3.hitPoint(this,a,u)}hitRadiusPoint(a,u){return Ut$3.hitRadiusPoint(this,a,u)}hit(a,u){return Ut$3.hit(this,a,u)}includes(a,u){return Ut$3.includes(this,a,u)}intersect(a,u){return Ut$3.intersect(this,a,u),this}getIntersect(u,h){return new a(Ut$3.getIntersectData(this,u,h))}isSame(a){return Ut$3.isSame(this,a)}isEmpty(){return Ut$3.isEmpty(this)}reset(){Ut$3.reset(this)}},qt$2=new Vt$3,Qt$2=class{constructor(a,u,h,xC,SC,CC){d(a)?this.copy(a):this.set(a,u,h,xC,SC,CC)}set(a=0,u=0,h=0,xC=0,SC=0,CC=0){this.top=a,this.right=u,this.bottom=h,this.left=xC,this.width=SC,this.height=CC}copy(a){let{top:u,right:h,bottom:xC,left:SC,width:CC,height:wC}=a;this.set(u,h,xC,SC,CC,wC)}getBoundsFrom(a){let{top:u,right:h,bottom:xC,left:SC,width:CC,height:wC}=this;return new Vt$3(SC,u,CC||a.width-SC-h,wC||a.height-u-xC)}},Jt$2={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,".":1,e:1,E:1},{randColor:Zt$2}=N$1,$t$2=class a{constructor(a){this.repeatMap={},this.name=a}static get(u){return new a(u)}static set filter(a){this.filterList=Kt$3(a)}static set exclude(a){this.excludeList=Kt$3(a)}static drawRepaint(a,u){let h=Zt$2();a.fillWorld(u,h.replace(`1)`,`.1)`)),a.strokeWorld(u,h)}static drawBounds(u,h,xC){let SC=a.showBounds===`hit`,CC=u.__nowWorld,wC=Zt$2();SC&&(h.setWorld(CC),u.__drawHitPath(h),h.fillStyle=wC.replace(`1)`,`.2)`),h.fill()),h.resetTransform(),h.setStroke(wC,2),SC?h.stroke():h.strokeWorld(CC,wC)}log(...a){te$2.enable&&(te$2.filterList.length&&te$2.filterList.every(a=>a!==this.name)||te$2.excludeList.length&&te$2.excludeList.some(a=>a===this.name))}tip(...a){te$2.enable&&this.warn(...a)}warn(...a){te$2.showWarn}repeat(a,...u){this.repeatMap[a]||(this.warn(`repeat:`+a,...u),this.repeatMap[a]=!0)}error(...a){try{throw Error()}catch{}}};function Kt$3(a){return a?i(a)&&(a=[a]):a=[],a}$t$2.filterList=[],$t$2.excludeList=[],$t$2.showWarn=!0;var te$2=$t$2,ee$2=$t$2.get(`RunTime`),se$2={currentId:0,currentName:``,idMap:{},nameMap:{},nameToIdMap:{},start(a,u){let h=w.create(w.RUNTIME);return re$2.currentId=re$2.idMap[h]=u?performance.now():Date.now(),re$2.currentName=re$2.nameMap[h]=a,re$2.nameToIdMap[a]=h,h},end(a,u){let h=re$2.idMap[a],xC=re$2.nameMap[a],SC=u?(performance.now()-h)/1e3:Date.now()-h;re$2.idMap[a]=re$2.nameMap[a]=re$2.nameToIdMap[xC]=void 0,ee$2.log(xC,SC,`ms`)},endOfName(a,u){let h=re$2.nameToIdMap[a];s(h)||re$2.end(h,u)}},re$2=se$2,ie$2=[],ne$2={list:{},add(a,...u){this.list[a]=!0,ie$2.push(...u)},has(a,u){let h=this.list[a];return!h&&u&&this.need(a),h},need(a){}};setTimeout(()=>ie$2.forEach(a=>ne$2.has(a,!0)));var oe$2={editor:a=>ne$2.need(`editor`)},ae$2=$t$2.get(`UICreator`),he$2={list:{},register(a){let{__tag:u}=a.prototype;le$2[u]&&ae$2.repeat(u),le$2[u]=a},get(a,u,h,xC,SC,CC){le$2[a]||ae$2.error(`not register `+a);let wC=new le$2[a](u);return s(h)||(wC.x=h,xC&&(wC.y=xC),SC&&(wC.width=SC),CC&&(wC.height=CC)),wC}},{list:le$2}=he$2,de$2=$t$2.get(`EventCreator`),ue$2={nameList:{},register(a){let u;Object.keys(a).forEach(h=>{u=a[h],i(u)&&(ce$2[u]&&de$2.repeat(u),ce$2[u]=a)})},changeName(a,u){let h=ce$2[a];if(h){let xC=Object.keys(h).find(u=>h[u]===a);xC&&(h[xC]=u,ce$2[u]=h)}},has(a){return!!this.nameList[a]},get:(a,...u)=>new ce$2[a](...u)},{nameList:ce$2}=ue$2,_e$2=class{constructor(){this.list=[]}add(a){a.manager=this,this.list.push(a)}get(a){let u,{list:h}=this;for(let xC=0,SC=h.length;xC<SC;xC++)if(u=h[xC],u.recycled&&u.isSameSize(a))return u.recycled=!1,u.manager||=this,u;let xC=oe$2.canvas(a);return this.add(xC),xC}recycle(a){a.recycled=!0}clearRecycled(){let a,u=[];for(let h=0,xC=this.list.length;h<xC;h++)a=this.list[h],a.recycled?a.destroy():u.push(a);this.list=u}clear(){this.list.forEach(a=>{a.destroy()}),this.list.length=0}destroy(){this.clear()}};function pe$2(a,u,h,xC){var SC,CC=arguments.length,wC=CC<3?u:xC===null?xC=Object.getOwnPropertyDescriptor(u,h):xC;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)wC=Reflect.decorate(a,u,h,xC);else for(var TC=a.length-1;TC>=0;TC--)(SC=a[TC])&&(wC=(CC<3?SC(wC):CC>3?SC(u,h,wC):SC(u,h))||wC);return CC>3&&wC&&Object.defineProperty(u,h,wC),wC}function fe$2(a,u,h,xC){return new(h||=Promise)(function(SC,CC){function wC(a){try{EC(xC.next(a))}catch(a){CC(a)}}function TC(a){try{EC(xC.throw(a))}catch(a){CC(a)}}function EC(a){var u;a.done?SC(a.value):(u=a.value,u instanceof h?u:new h(function(a){a(u)})).then(wC,TC)}EC((xC=xC.apply(a,u||[])).next())})}function ge$2(a){return(u,h)=>{a||=h;let xC={get(){return this.context[a]},set(u){this.context[a]=u}};h===`strokeCap`&&(xC.set=function(u){this.context[a]=u===`none`?`butt`:u}),Object.defineProperty(u,h,xC)}}var ye$2=[];function me$2(){return(a,u)=>{ye$2.push(u)}}var xe$2=[],we$2=class{set blendMode(a){a===`normal`&&(a=`source-over`),this.context.globalCompositeOperation=a}get blendMode(){return this.context.globalCompositeOperation}set dashPattern(a){this.context.setLineDash(a||xe$2)}get dashPattern(){return this.context.getLineDash()}__bindContext(){let a;ye$2.forEach(u=>{a=this.context[u],a&&(this[u]=a.bind(this.context))}),this.textBaseline=`alphabetic`}setTransform(a,u,h,xC,SC,CC){}resetTransform(){}getTransform(){}save(){}restore(){}transform(a,u,h,xC,SC,CC){d(a)?this.context.transform(a.a,a.b,a.c,a.d,a.e,a.f):this.context.transform(a,u,h,xC,SC,CC)}translate(a,u){}scale(a,u){}rotate(a){}fill(a,u){}stroke(a){}clip(a,u){}fillRect(a,u,h,xC){}strokeRect(a,u,h,xC){}clearRect(a,u,h,xC){}drawImage(a,u,h,xC,SC,CC,wC,TC,EC){switch(arguments.length){case 9:if(u<0){let a=-u/xC*TC;xC+=u,u=0,CC+=a,TC-=a}if(h<0){let a=-h/SC*EC;SC+=h,h=0,wC+=a,EC-=a}this.context.drawImage(a,u,h,xC,SC,CC,wC,TC,EC);break;case 5:this.context.drawImage(a,u,h,xC,SC);break;case 3:this.context.drawImage(a,u,h)}}beginPath(){}moveTo(a,u){}lineTo(a,u){}bezierCurveTo(a,u,h,xC,SC,CC){}quadraticCurveTo(a,u,h,xC){}closePath(){}arc(a,u,h,xC,SC,CC){}arcTo(a,u,h,xC,SC){}ellipse(a,u,h,xC,SC,CC,wC,TC){}rect(a,u,h,xC){}roundRect(a,u,h,xC,SC){}createConicGradient(a,u,h){}createLinearGradient(a,u,h,xC){}createPattern(a,u){}createRadialGradient(a,u,h,xC,SC,CC){}fillText(a,u,h,xC){}measureText(a){}strokeText(a,u,h,xC){}destroy(){this.context=null}};pe$2([ge$2(`imageSmoothingEnabled`)],we$2.prototype,`smooth`,void 0),pe$2([ge$2(`imageSmoothingQuality`)],we$2.prototype,`smoothLevel`,void 0),pe$2([ge$2(`globalAlpha`)],we$2.prototype,`opacity`,void 0),pe$2([ge$2()],we$2.prototype,`fillStyle`,void 0),pe$2([ge$2()],we$2.prototype,`strokeStyle`,void 0),pe$2([ge$2(`lineWidth`)],we$2.prototype,`strokeWidth`,void 0),pe$2([ge$2(`lineCap`)],we$2.prototype,`strokeCap`,void 0),pe$2([ge$2(`lineJoin`)],we$2.prototype,`strokeJoin`,void 0),pe$2([ge$2(`lineDashOffset`)],we$2.prototype,`dashOffset`,void 0),pe$2([ge$2()],we$2.prototype,`miterLimit`,void 0),pe$2([ge$2()],we$2.prototype,`shadowBlur`,void 0),pe$2([ge$2()],we$2.prototype,`shadowColor`,void 0),pe$2([ge$2()],we$2.prototype,`shadowOffsetX`,void 0),pe$2([ge$2()],we$2.prototype,`shadowOffsetY`,void 0),pe$2([ge$2()],we$2.prototype,`filter`,void 0),pe$2([ge$2()],we$2.prototype,`font`,void 0),pe$2([ge$2()],we$2.prototype,`fontKerning`,void 0),pe$2([ge$2()],we$2.prototype,`fontStretch`,void 0),pe$2([ge$2()],we$2.prototype,`fontVariantCaps`,void 0),pe$2([ge$2()],we$2.prototype,`textAlign`,void 0),pe$2([ge$2()],we$2.prototype,`textBaseline`,void 0),pe$2([ge$2()],we$2.prototype,`textRendering`,void 0),pe$2([ge$2()],we$2.prototype,`wordSpacing`,void 0),pe$2([ge$2()],we$2.prototype,`letterSpacing`,void 0),pe$2([ge$2()],we$2.prototype,`direction`,void 0),pe$2([me$2()],we$2.prototype,`setTransform`,null),pe$2([me$2()],we$2.prototype,`resetTransform`,null),pe$2([me$2()],we$2.prototype,`getTransform`,null),pe$2([me$2()],we$2.prototype,`save`,null),pe$2([me$2()],we$2.prototype,`restore`,null),pe$2([me$2()],we$2.prototype,`translate`,null),pe$2([me$2()],we$2.prototype,`scale`,null),pe$2([me$2()],we$2.prototype,`rotate`,null),pe$2([me$2()],we$2.prototype,`fill`,null),pe$2([me$2()],we$2.prototype,`stroke`,null),pe$2([me$2()],we$2.prototype,`clip`,null),pe$2([me$2()],we$2.prototype,`fillRect`,null),pe$2([me$2()],we$2.prototype,`strokeRect`,null),pe$2([me$2()],we$2.prototype,`clearRect`,null),pe$2([me$2()],we$2.prototype,`beginPath`,null),pe$2([me$2()],we$2.prototype,`moveTo`,null),pe$2([me$2()],we$2.prototype,`lineTo`,null),pe$2([me$2()],we$2.prototype,`bezierCurveTo`,null),pe$2([me$2()],we$2.prototype,`quadraticCurveTo`,null),pe$2([me$2()],we$2.prototype,`closePath`,null),pe$2([me$2()],we$2.prototype,`arc`,null),pe$2([me$2()],we$2.prototype,`arcTo`,null),pe$2([me$2()],we$2.prototype,`ellipse`,null),pe$2([me$2()],we$2.prototype,`rect`,null),pe$2([me$2()],we$2.prototype,`roundRect`,null),pe$2([me$2()],we$2.prototype,`createConicGradient`,null),pe$2([me$2()],we$2.prototype,`createLinearGradient`,null),pe$2([me$2()],we$2.prototype,`createPattern`,null),pe$2([me$2()],we$2.prototype,`createRadialGradient`,null),pe$2([me$2()],we$2.prototype,`fillText`,null),pe$2([me$2()],we$2.prototype,`measureText`,null),pe$2([me$2()],we$2.prototype,`strokeText`,null);var{copy:be$2,multiplyParent:Be$2,pixelScale:ve$2}=$$1,{round:ke$2}=Math,Ce$2=new Vt$3,Oe$2=new Vt$3,Te$2={width:1,height:1,pixelRatio:1},Pe$2=[`width`,`height`,`pixelRatio`],Se$2=class extends we$2{get width(){return this.size.width}get height(){return this.size.height}get pixelRatio(){return this.size.pixelRatio}get pixelWidth(){return this.width*this.pixelRatio||0}get pixelHeight(){return this.height*this.pixelRatio||0}get pixelSnap(){return this.config.pixelSnap}set pixelSnap(a){this.config.pixelSnap=a}get allowBackgroundColor(){return this.view&&this.parentView}constructor(a,u){super(),this.size={},this.worldTransform={},a||=Te$2,this.manager=u,this.innerId=w.create(w.CNAVAS);let{width:h,height:xC,pixelRatio:SC}=a;this.autoLayout=!h||!xC,this.size.pixelRatio=SC||m.devicePixelRatio,this.config=a,this.init()}init(){}__createContext(){let{view:a}=this,{contextSettings:u}=this.config;this.context=u?a.getContext(`2d`,u):a.getContext(`2d`),this.__bindContext()}export(a,u){}toBlob(a,u){}toDataURL(a,u){}saveAs(a,u){}resize(a,u=!0){if(this.isSameSize(a))return;let h;this.context&&!this.unreal&&u&&this.width&&(h=this.getSameCanvas(),h.copyWorld(this));let xC=this.size;_.copyAttrs(xC,a,Pe$2),Pe$2.forEach(a=>xC[a]||(xC[a]=1)),this.bounds=new Vt$3(0,0,this.width,this.height),this.updateViewSize(),this.updateClientBounds(),this.context&&(this.smooth=this.config.smooth,!this.unreal&&h&&(this.clearWorld(h.bounds),this.copyWorld(h),h.recycle()))}updateViewSize(){}updateClientBounds(){}getClientBounds(a){return a&&this.updateClientBounds(),this.clientBounds||this.bounds}startAutoLayout(a,u){}stopAutoLayout(){}setCursor(a){}setWorld(a,u){let{pixelRatio:h,pixelSnap:xC}=this,SC=this.worldTransform;u&&Be$2(a,u,SC),ve$2(a,h,SC),xC&&!a.ignorePixelSnap&&(a.half&&a.half*h%2?(SC.e=ke$2(SC.e-.5)+.5,SC.f=ke$2(SC.f-.5)+.5):(SC.e=ke$2(SC.e),SC.f=ke$2(SC.f))),this.setTransform(SC.a,SC.b,SC.c,SC.d,SC.e,SC.f)}useWorldTransform(a){a&&(this.worldTransform=a);let u=this.worldTransform;u&&this.setTransform(u.a,u.b,u.c,u.d,u.e,u.f)}setStroke(a,u,h,xC){u&&(this.strokeWidth=u),a&&(this.strokeStyle=a),h&&this.setStrokeOptions(h,xC)}setStrokeOptions(a,u){let{strokeCap:h,strokeJoin:xC,dashPattern:SC,dashOffset:CC,miterLimit:wC}=a;u&&(u.strokeCap&&(h=u.strokeCap),u.strokeJoin&&(xC=u.strokeJoin),s(u.dashPattern)||(SC=u.dashPattern),s(u.dashOffset)||(CC=u.dashOffset),u.miterLimit&&(wC=u.miterLimit)),this.strokeCap=h,this.strokeJoin=xC,this.dashPattern=SC,this.dashOffset=CC,this.miterLimit=wC}saveBlendMode(a){this.savedBlendMode=this.blendMode,this.blendMode=a}restoreBlendMode(){this.blendMode=this.savedBlendMode}hitFill(a,u){return!0}hitStroke(a,u){return!0}hitPixel(a,u,h=1){return!0}setWorldShadow(a,u,h,xC){let{pixelRatio:SC}=this;this.shadowOffsetX=a*SC,this.shadowOffsetY=u*SC,this.shadowBlur=h*SC,this.shadowColor=xC||`black`}setWorldBlur(a){let{pixelRatio:u}=this;this.filter=`blur(${a*u}px)`}copyWorld(a,u,h,xC,SC=!0){xC&&(this.blendMode=xC),u?(this.setTempPixelBounds(u,SC),h?(this.setTempPixelBounds2(h,SC),h=Oe$2):h=Ce$2,this.drawImage(a.view,Ce$2.x,Ce$2.y,Ce$2.width,Ce$2.height,h.x,h.y,h.width,h.height)):this.drawImage(a.view,0,0),xC&&(this.blendMode=`source-over`)}copyWorldToInner(a,u,h,xC,SC=!0){u.b||u.c?(this.save(),this.resetTransform(),this.copyWorld(a,u,Ut$3.tempToOuterOf(h,u),xC,SC),this.restore()):(xC&&(this.blendMode=xC),this.setTempPixelBounds(u,SC),this.drawImage(a.view,Ce$2.x,Ce$2.y,Ce$2.width,Ce$2.height,h.x,h.y,h.width,h.height),xC&&(this.blendMode=`source-over`))}copyWorldByReset(a,u,h,xC,SC,CC=!0){this.resetTransform(),this.copyWorld(a,u,h,xC,CC),SC||this.useWorldTransform()}useGrayscaleAlpha(a){let u,h;this.setTempPixelBounds(a,!0,!0);let{context:xC}=this,SC=xC.getImageData(Ce$2.x,Ce$2.y,Ce$2.width,Ce$2.height),{data:CC}=SC;for(let a=0,xC=CC.length;a<xC;a+=4)h=.299*CC[a]+.587*CC[a+1]+.114*CC[a+2],(u=CC[a+3])&&(CC[a+3]=u===255?h:h/255*u);xC.putImageData(SC,Ce$2.x,Ce$2.y)}useMask(a,u,h){this.copyWorld(a,u,h,`destination-in`)}useEraser(a,u,h){this.copyWorld(a,u,h,`destination-out`)}fillWorld(a,u,h,xC){h&&(this.blendMode=h),this.fillStyle=u,this.setTempPixelBounds(a,xC),this.fillRect(Ce$2.x,Ce$2.y,Ce$2.width,Ce$2.height),h&&(this.blendMode=`source-over`)}strokeWorld(a,u,h,xC){h&&(this.blendMode=h),this.strokeStyle=u,this.setTempPixelBounds(a,xC),this.strokeRect(Ce$2.x,Ce$2.y,Ce$2.width,Ce$2.height),h&&(this.blendMode=`source-over`)}clipWorld(a,u=!0){this.beginPath(),this.setTempPixelBounds(a,u),this.rect(Ce$2.x,Ce$2.y,Ce$2.width,Ce$2.height),this.clip()}clipUI(a){a.windingRule?this.clip(a.windingRule):this.clip()}clearWorld(a,u=!0){this.setTempPixelBounds(a,u),this.clearRect(Ce$2.x,Ce$2.y,Ce$2.width,Ce$2.height)}clear(){let{pixelRatio:a}=this;this.clearRect(0,0,this.width*a+2,this.height*a+2)}setTempPixelBounds(a,u,h){this.copyToPixelBounds(Ce$2,a,u,h)}setTempPixelBounds2(a,u,h){this.copyToPixelBounds(Oe$2,a,u,h)}copyToPixelBounds(a,u,h,xC){a.set(u),xC&&a.intersect(this.bounds),a.scale(this.pixelRatio),h&&a.ceil()}isSameSize(a){return this.width===a.width&&this.height===a.height&&(!a.pixelRatio||this.pixelRatio===a.pixelRatio)}getSameCanvas(a,u){let{size:h,pixelSnap:xC}=this,SC=this.manager?this.manager.get(h):oe$2.canvas(Object.assign({},h));return SC.save(),a&&(be$2(SC.worldTransform,this.worldTransform),SC.useWorldTransform()),u&&(SC.smooth=this.smooth),SC.pixelSnap!==xC&&(SC.pixelSnap=xC),SC}recycle(a){this.recycled||(this.restore(),a?this.clearWorld(a):this.clear(),this.manager?this.manager.recycle(this):this.destroy())}updateRender(a){}unrealCanvas(){}destroy(){this.manager=this.view=this.parentView=null}},Re$2={creator:{},parse(a,u){},convertToCanvasData(a,u){}},Le$2={N:21,D:22,X:23,G:24,F:25,O:26,P:27,U:28},Ee$2=Object.assign({M:1,m:10,L:2,l:20,H:3,h:30,V:4,v:40,C:5,c:50,S:6,s:60,Q:7,q:70,T:8,t:80,A:9,a:90,Z:11,z:11,R:12},Le$2),Ie$2={M:3,m:3,L:3,l:3,H:2,h:2,V:2,v:2,C:7,c:7,S:5,s:5,Q:5,q:5,T:3,t:3,A:8,a:8,Z:1,z:1,N:5,D:9,X:6,G:9,F:5,O:7,P:4,U:6},Me$2={m:10,l:20,H:3,h:30,V:4,v:40,c:50,S:6,s:60,q:70,T:8,t:80,A:9,a:90},Ae$2=Object.assign(Object.assign({},Me$2),Le$2),We$2=Ee$2,Ne$2={};for(let a in We$2)Ne$2[We$2[a]]=a;var Ye$2={};for(let a in We$2)Ye$2[We$2[a]]=Ie$2[a];var De$2={drawRoundRect(a,u,h,xC,SC,CC){let wC=N$1.fourNumber(CC,Math.min(xC/2,SC/2)),TC=u+xC,EC=h+SC;wC[0]?a.moveTo(u+wC[0],h):a.moveTo(u,h),wC[1]?a.arcTo(TC,h,TC,EC,wC[1]):a.lineTo(TC,h),wC[2]?a.arcTo(TC,EC,u,EC,wC[2]):a.lineTo(TC,EC),wC[3]?a.arcTo(u,EC,u,h,wC[3]):a.lineTo(u,EC),wC[0]?a.arcTo(u,h,TC,h,wC[0]):a.lineTo(u,h)}},{sin:Xe$2,cos:ze$2,hypot:Fe$2,atan2:Ue$2,ceil:je$2,abs:He$2,PI:Ge$2,sqrt:Ve$2,pow:qe$2}=Math,{setPoint:Qe$2,addPoint:Je$1}=mt$3,{set:Ze$2,toNumberPoints:$e$2}=lt$2,{M:Ke$2,L:ts$1,C:es$1,Q:ss$1,Z:rs}=Ee$2,is$1={},ns$1={points(a,u,h,xC){let SC=$e$2(u);if(a.push(Ke$2,SC[0],SC[1]),h&&SC.length>5){let u,CC,wC,TC,EC,DC,OC,kC,AC,jC,MC,NC,PC,FC=SC.length,IC=!0===h?.5:h;xC&&(SC=[SC[FC-2],SC[FC-1],...SC,SC[0],SC[1],SC[2],SC[3]],FC=SC.length);for(let h=2;h<FC-2;h+=2)u=SC[h-2],CC=SC[h-1],wC=SC[h],TC=SC[h+1],EC=SC[h+2],DC=SC[h+3],MC=Ve$2(qe$2(wC-u,2)+qe$2(TC-CC,2)),NC=Ve$2(qe$2(EC-wC,2)+qe$2(DC-TC,2)),(MC||NC)&&(PC=MC+NC,MC=IC*MC/PC,NC=IC*NC/PC,EC-=u,DC-=CC,OC=wC-MC*EC,kC=TC-MC*DC,h===2?xC||a.push(ss$1,OC,kC,wC,TC):a.push(es$1,AC,jC,OC,kC,wC,TC),AC=wC+NC*EC,jC=TC+NC*DC);xC||a.push(ss$1,AC,jC,SC[FC-2],SC[FC-1])}else for(let u=2,h=SC.length;u<h;u+=2)a.push(ts$1,SC[u],SC[u+1]);xC&&a.push(rs)},rect(a,u,h,xC,SC){Re$2.creator.path=a,Re$2.creator.moveTo(u,h).lineTo(u+xC,h).lineTo(u+xC,h+SC).lineTo(u,h+SC).lineTo(u,h)},roundRect(a,u,h,xC,SC,CC){Re$2.creator.path=[],De$2.drawRoundRect(Re$2.creator,u,h,xC,SC,CC),a.push(...Re$2.convertToCanvasData(Re$2.creator.path,!0))},arcTo(a,u,h,xC,SC,CC,wC,TC,EC,DC,OC){let kC=xC-u,AC=SC-h,jC=CC-xC,MC=wC-SC,NC=Ue$2(AC,kC),PC=Ue$2(MC,jC),FC=Fe$2(kC,AC),IC=Fe$2(jC,MC),LC=PC-NC;if(LC<0&&(LC+=X$1),FC<1e-12||IC<1e-12||LC<1e-12||He$2(LC-Ge$2)<1e-12)return a&&a.push(ts$1,xC,SC),EC&&(Qe$2(EC,u,h),Je$1(EC,xC,SC)),OC&&Ze$2(OC,u,h),void(DC&&Ze$2(DC,xC,SC));let RC=kC*MC-jC*AC<0,zC=RC?-1:1,BC=TC/ze$2(LC/2),VC=xC+BC*ze$2(NC+LC/2+z$1*zC),HC=SC+BC*Xe$2(NC+LC/2+z$1*zC);return NC-=z$1*zC,PC-=z$1*zC,hs(a,VC,HC,TC,TC,0,NC/D,PC/D,RC,EC,DC,OC)},arc:(a,u,h,xC,SC,CC,wC,TC,EC,DC)=>hs(a,u,h,xC,xC,0,SC,CC,wC,TC,EC,DC),ellipse(a,u,h,xC,SC,CC,wC,TC,EC,DC,OC,kC){let AC=CC*D,jC=Xe$2(AC),MC=ze$2(AC),NC=wC*D,PC=TC*D;NC>Ge$2&&(NC-=X$1),PC<0&&(PC+=X$1);let FC=PC-NC;FC<0?FC+=X$1:FC>X$1&&(FC-=X$1),EC&&(FC-=X$1);let IC=je$2(He$2(FC/z$1)),LC=FC/IC,RC=Xe$2(LC/4),zC=8/3*RC*RC/Xe$2(LC/2);PC=NC+LC;let BC,VC,HC,UC,WC,GC,KC,qC,JC=ze$2(NC),YC=Xe$2(NC),XC=HC=MC*xC*JC-jC*SC*YC,ZC=UC=jC*xC*JC+MC*SC*YC,QC=u+HC,$C=h+UC;a&&a.push(a.length?ts$1:Ke$2,QC,$C),DC&&Qe$2(DC,QC,$C),kC&&Ze$2(kC,QC,$C);for(let CC=0;CC<IC;CC++)BC=ze$2(PC),VC=Xe$2(PC),HC=MC*xC*BC-jC*SC*VC,UC=jC*xC*BC+MC*SC*VC,WC=u+XC-zC*(MC*xC*YC+jC*SC*JC),GC=h+ZC-zC*(jC*xC*YC-MC*SC*JC),KC=u+HC+zC*(MC*xC*VC+jC*SC*BC),qC=h+UC+zC*(jC*xC*VC-MC*SC*BC),a&&a.push(es$1,WC,GC,KC,qC,u+HC,h+UC),DC&&as(u+XC,h+ZC,WC,GC,KC,qC,u+HC,h+UC,DC,!0),XC=HC,ZC=UC,JC=BC,YC=VC,NC=PC,PC+=LC;OC&&Ze$2(OC,u+HC,h+UC)},quadraticCurveTo(a,u,h,xC,SC,CC,wC){a.push(es$1,(u+2*xC)/3,(h+2*SC)/3,(CC+2*xC)/3,(wC+2*SC)/3,CC,wC)},toTwoPointBoundsByQuadraticCurve(a,u,h,xC,SC,CC,wC,TC){as(a,u,(a+2*h)/3,(u+2*xC)/3,(SC+2*h)/3,(CC+2*xC)/3,SC,CC,wC,TC)},toTwoPointBounds(a,u,h,xC,SC,CC,wC,TC,EC,DC){let OC=[],kC,AC,jC,MC,NC,PC,FC,IC,LC=a,RC=h,zC=SC,BC=wC;for(let a=0;a<2;++a)if(a==1&&(LC=u,RC=xC,zC=CC,BC=TC),kC=-3*LC+9*RC-9*zC+3*BC,AC=6*LC-12*RC+6*zC,jC=3*RC-3*LC,Math.abs(kC)<1e-12){if(Math.abs(AC)<1e-12)continue;MC=-jC/AC,0<MC&&MC<1&&OC.push(MC)}else FC=AC*AC-4*jC*kC,IC=Math.sqrt(FC),FC<0||(NC=(-AC+IC)/(2*kC),0<NC&&NC<1&&OC.push(NC),PC=(-AC-IC)/(2*kC),0<PC&&PC<1&&OC.push(PC));DC?Je$1(EC,a,u):Qe$2(EC,a,u),Je$1(EC,wC,TC);for(let DC=0,kC=OC.length;DC<kC;DC++)os(OC[DC],a,u,h,xC,SC,CC,wC,TC,is$1),Je$1(EC,is$1.x,is$1.y)},getPointAndSet(a,u,h,xC,SC,CC,wC,TC,EC,DC){let OC=1-a,kC=OC*OC*OC,AC=3*OC*OC*a,jC=3*OC*a*a,MC=a*a*a;DC.x=kC*u+AC*xC+jC*CC+MC*TC,DC.y=kC*h+AC*SC+jC*wC+MC*EC},getPoint(a,u,h,xC,SC,CC,wC,TC,EC){let DC={};return os(a,u,h,xC,SC,CC,wC,TC,EC,DC),DC},getDerivative(a,u,h,xC,SC){let CC=1-a;return 3*CC*CC*(h-u)+6*CC*a*(xC-h)+3*a*a*(SC-xC)}},{getPointAndSet:os,toTwoPointBounds:as,ellipse:hs}=ns$1,{sin:ls,cos:ds,sqrt:us,atan2:cs}=Math,{ellipse:_s}=ns$1,ps={ellipticalArc(a,u,h,xC,SC,CC,wC,TC,EC,DC,OC){let kC=(EC-u)/2,AC=(DC-h)/2,jC=CC*D,MC=ls(jC),NC=ds(jC),PC=-NC*kC-MC*AC,FC=-NC*AC+MC*kC,IC=xC*xC,LC=SC*SC,RC=FC*FC,zC=PC*PC,BC=IC*LC-IC*RC-LC*zC,VC=0;if(BC<0){let a=us(1-BC/(IC*LC));xC*=a,SC*=a}else VC=(wC===TC?-1:1)*us(BC/(IC*RC+LC*zC));let HC=VC*xC*FC/SC,UC=-VC*SC*PC/xC,WC=cs((FC-UC)/SC,(PC-HC)/xC),GC=cs((-FC-UC)/SC,(-PC-HC)/xC),KC=GC-WC;TC===0&&KC>0?KC-=X$1:TC===1&&KC<0&&(KC+=X$1);let qC=u+kC+NC*HC-MC*UC,YC=h+AC+MC*HC+NC*UC,XC=KC<0?1:0;OC||m.ellipseToCurve?_s(a,qC,YC,xC,SC,CC,WC/D,GC/D,XC):xC!==SC||CC?a.push(Ee$2.G,qC,YC,xC,SC,CC,WC/D,GC/D,XC):a.push(Ee$2.O,qC,YC,xC,WC/D,GC/D,XC)}},{M:fs,m:gs,L:ys,l:ms,H:xs,h:ws,V:bs,v:Bs,C:vs,c:ks,S:Cs,s:Os,Q:Ts,q:Ps,T:Ss,t:Rs,A:Ls,a:Es,Z:Is,z:Ms,N:As,D:Ws,X:Ns,G:Ys,F:Ds,O:Xs,P:zs,U:Fs}=Ee$2,{rect:Us,roundRect:js,arcTo:Hs,arc:Gs,ellipse:Vs,quadraticCurveTo:qs}=ns$1,{ellipticalArc:Qs}=ps,Js=$t$2.get(`PathConvert`),Zs={},$s={current:{dot:0},stringify(a,u){let h,xC,SC,CC=0,wC=a.length,TC=``;for(;CC<wC;){xC=a[CC],h=Ye$2[xC],TC+=xC===SC?` `:Ne$2[xC];for(let xC=1;xC<h;xC++)TC+=N$1.float(a[CC+xC],u),xC===h-1||(TC+=` `);SC=xC,CC+=h}return TC},parse(a,u){let h,xC,SC,CC=``,wC=[],TC=u?Ae$2:Me$2;for(let u=0,EC=a.length;u<EC;u++)xC=a[u],Jt$2[xC]?(xC===`.`&&(Ks.dot&&(tr(wC,CC),CC=``),Ks.dot++),CC===`0`&&xC!==`.`&&(tr(wC,CC),CC=``),CC+=xC):Ee$2[xC]?(CC&&=(tr(wC,CC),``),Ks.name=Ee$2[xC],Ks.length=Ie$2[xC],Ks.index=0,tr(wC,Ks.name),!h&&TC[xC]&&(h=!0)):xC===`-`||xC===`+`?SC===`e`||SC===`E`?CC+=xC:(CC&&tr(wC,CC),CC=xC):CC&&=(tr(wC,CC),``),SC=xC;return CC&&tr(wC,CC),h?$s.toCanvasData(wC,u):wC},toCanvasData(a,u){let h,xC,SC,CC,wC,TC=0,EC=0,DC=0,OC=0,kC=0,AC=a.length,jC=[];for(;kC<AC;){switch(SC=a[kC],SC){case gs:a[kC+1]+=TC,a[kC+2]+=EC;case fs:TC=a[kC+1],EC=a[kC+2],jC.push(fs,TC,EC),kC+=3;break;case ws:a[kC+1]+=TC;case xs:TC=a[kC+1],jC.push(ys,TC,EC),kC+=2;break;case Bs:a[kC+1]+=EC;case bs:EC=a[kC+1],jC.push(ys,TC,EC),kC+=2;break;case ms:a[kC+1]+=TC,a[kC+2]+=EC;case ys:TC=a[kC+1],EC=a[kC+2],jC.push(ys,TC,EC),kC+=3;break;case Os:a[kC+1]+=TC,a[kC+2]+=EC,a[kC+3]+=TC,a[kC+4]+=EC,SC=Cs;case Cs:wC=CC===vs||CC===Cs,DC=wC?2*TC-h:a[kC+1],OC=wC?2*EC-xC:a[kC+2],h=a[kC+1],xC=a[kC+2],TC=a[kC+3],EC=a[kC+4],jC.push(vs,DC,OC,h,xC,TC,EC),kC+=5;break;case ks:a[kC+1]+=TC,a[kC+2]+=EC,a[kC+3]+=TC,a[kC+4]+=EC,a[kC+5]+=TC,a[kC+6]+=EC,SC=vs;case vs:h=a[kC+3],xC=a[kC+4],TC=a[kC+5],EC=a[kC+6],jC.push(vs,a[kC+1],a[kC+2],h,xC,TC,EC),kC+=7;break;case Rs:a[kC+1]+=TC,a[kC+2]+=EC,SC=Ss;case Ss:wC=CC===Ts||CC===Ss,h=wC?2*TC-h:a[kC+1],xC=wC?2*EC-xC:a[kC+2],u?qs(jC,TC,EC,h,xC,a[kC+1],a[kC+2]):jC.push(Ts,h,xC,a[kC+1],a[kC+2]),TC=a[kC+1],EC=a[kC+2],kC+=3;break;case Ps:a[kC+1]+=TC,a[kC+2]+=EC,a[kC+3]+=TC,a[kC+4]+=EC,SC=Ts;case Ts:h=a[kC+1],xC=a[kC+2],u?qs(jC,TC,EC,h,xC,a[kC+3],a[kC+4]):jC.push(Ts,h,xC,a[kC+3],a[kC+4]),TC=a[kC+3],EC=a[kC+4],kC+=5;break;case Es:a[kC+6]+=TC,a[kC+7]+=EC;case Ls:Qs(jC,TC,EC,a[kC+1],a[kC+2],a[kC+3],a[kC+4],a[kC+5],a[kC+6],a[kC+7],u),TC=a[kC+6],EC=a[kC+7],kC+=8;break;case Ms:case Is:jC.push(Is),kC++;break;case As:TC=a[kC+1],EC=a[kC+2],u?Us(jC,TC,EC,a[kC+3],a[kC+4]):er(jC,a,kC,5),kC+=5;break;case Ws:TC=a[kC+1],EC=a[kC+2],u?js(jC,TC,EC,a[kC+3],a[kC+4],[a[kC+5],a[kC+6],a[kC+7],a[kC+8]]):er(jC,a,kC,9),kC+=9;break;case Ns:TC=a[kC+1],EC=a[kC+2],u?js(jC,TC,EC,a[kC+3],a[kC+4],a[kC+5]):er(jC,a,kC,6),kC+=6;break;case Ys:Vs(u?jC:er(jC,a,kC,9),a[kC+1],a[kC+2],a[kC+3],a[kC+4],a[kC+5],a[kC+6],a[kC+7],a[kC+8],null,Zs),TC=Zs.x,EC=Zs.y,kC+=9;break;case Ds:u?Vs(jC,a[kC+1],a[kC+2],a[kC+3],a[kC+4],0,0,360,!1):er(jC,a,kC,5),TC=a[kC+1]+a[kC+3],EC=a[kC+2],kC+=5;break;case Xs:Gs(u?jC:er(jC,a,kC,7),a[kC+1],a[kC+2],a[kC+3],a[kC+4],a[kC+5],a[kC+6],null,Zs),TC=Zs.x,EC=Zs.y,kC+=7;break;case zs:u?Gs(jC,a[kC+1],a[kC+2],a[kC+3],0,360,!1):er(jC,a,kC,4),TC=a[kC+1]+a[kC+3],EC=a[kC+2],kC+=4;break;case Fs:Hs(u?jC:er(jC,a,kC,6),TC,EC,a[kC+1],a[kC+2],a[kC+3],a[kC+4],a[kC+5],null,Zs),TC=Zs.x,EC=Zs.y,kC+=6;break;default:return Js.error(`command: ${SC} [index:${kC}]`,a),jC}CC=SC}return jC},objectToCanvasData(a){let u=[];return a.forEach(a=>{switch(a.name){case`M`:u.push(fs,a.x,a.y);break;case`L`:u.push(ys,a.x,a.y);break;case`C`:u.push(vs,a.x1,a.y1,a.x2,a.y2,a.x,a.y);break;case`Q`:u.push(Ts,a.x1,a.y1,a.x,a.y);break;case`Z`:u.push(Is)}}),u},copyData(a,u,h,xC){for(let SC=h,CC=h+xC;SC<CC;SC++)a.push(u[SC])},pushData(a,u){Ks.index===Ks.length&&(Ks.index=1,a.push(Ks.name)),a.push(Number(u)),Ks.index++,Ks.dot=0}},{current:Ks,pushData:tr,copyData:er}=$s,{M:sr,L:rr,C:ir,Q:nr,Z:or,N:ar,D:hr,X:lr,G:dr,F:ur,O:cr,P:_r,U:pr}=Ee$2,{getMinDistanceFrom:fr,getRadianFrom:gr}=lt$2,{tan:yr,min:mr,abs:xr}=Math,wr={},br={beginPath(a){a.length=0},moveTo(a,u,h){a.push(sr,u,h)},lineTo(a,u,h){a.push(rr,u,h)},bezierCurveTo(a,u,h,xC,SC,CC,wC){a.push(ir,u,h,xC,SC,CC,wC)},quadraticCurveTo(a,u,h,xC,SC){a.push(nr,u,h,xC,SC)},closePath(a){a.push(or)},rect(a,u,h,xC,SC){a.push(ar,u,h,xC,SC)},roundRect(a,u,h,xC,SC,CC){if(o(CC))a.push(lr,u,h,xC,SC,CC);else{let wC=N$1.fourNumber(CC);wC?a.push(hr,u,h,xC,SC,...wC):a.push(ar,u,h,xC,SC)}},ellipse(a,u,h,xC,SC,CC,wC,TC,EC){r(CC)?a.push(ur,u,h,xC,SC):(r(wC)&&(wC=0),r(TC)&&(TC=360),a.push(dr,u,h,xC,SC,CC,wC,TC,EC?1:0))},arc(a,u,h,xC,SC,CC,wC){r(SC)?a.push(_r,u,h,xC):(r(CC)&&(CC=360),a.push(cr,u,h,xC,SC,CC,wC?1:0))},arcTo(a,u,h,xC,SC,CC,wC,TC){if(!s(wC)){let a=fr(wC,TC,u,h,xC,SC);CC=mr(CC,mr(a/2,a/2*xr(yr(gr(wC,TC,u,h,xC,SC)/2))))}a.push(pr,u,h,xC,SC,CC)},drawEllipse(a,u,h,xC,SC,CC,wC,TC,EC){ns$1.ellipse(null,u,h,xC,SC,r(CC)?0:CC,r(wC)?0:wC,r(TC)?360:TC,EC,null,null,wr),a.push(sr,wr.x,wr.y),Br(a,u,h,xC,SC,CC,wC,TC,EC)},drawArc(a,u,h,xC,SC,CC,wC){ns$1.arc(null,u,h,xC,r(SC)?0:SC,r(CC)?360:CC,wC,null,null,wr),a.push(sr,wr.x,wr.y),vr(a,u,h,xC,SC,CC,wC)},drawPoints(a,u,h,xC){ns$1.points(a,u,h,xC)}},{ellipse:Br,arc:vr}=br,{moveTo:kr,lineTo:Cr,quadraticCurveTo:Or,bezierCurveTo:Tr,closePath:Pr,beginPath:Sr,rect:Rr,roundRect:Lr,ellipse:Er,arc:Ir,arcTo:Mr,drawEllipse:Ar,drawArc:Wr,drawPoints:Nr}=br,Yr=class{set path(a){this.__path=a}get path(){return this.__path}constructor(a){this.set(a)}set(a){return this.__path=a?i(a)?Re$2.parse(a):a:[],this}beginPath(){return Sr(this.__path),this.paint(),this}moveTo(a,u){return kr(this.__path,a,u),this.paint(),this}lineTo(a,u){return Cr(this.__path,a,u),this.paint(),this}bezierCurveTo(a,u,h,xC,SC,CC){return Tr(this.__path,a,u,h,xC,SC,CC),this.paint(),this}quadraticCurveTo(a,u,h,xC){return Or(this.__path,a,u,h,xC),this.paint(),this}closePath(){return Pr(this.__path),this.paint(),this}rect(a,u,h,xC){return Rr(this.__path,a,u,h,xC),this.paint(),this}roundRect(a,u,h,xC,SC){return Lr(this.__path,a,u,h,xC,SC),this.paint(),this}ellipse(a,u,h,xC,SC,CC,wC,TC){return Er(this.__path,a,u,h,xC,SC,CC,wC,TC),this.paint(),this}arc(a,u,h,xC,SC,CC){return Ir(this.__path,a,u,h,xC,SC,CC),this.paint(),this}arcTo(a,u,h,xC,SC){return Mr(this.__path,a,u,h,xC,SC),this.paint(),this}drawEllipse(a,u,h,xC,SC,CC,wC,TC){return Ar(this.__path,a,u,h,xC,SC,CC,wC,TC),this.paint(),this}drawArc(a,u,h,xC,SC,CC){return Wr(this.__path,a,u,h,xC,SC,CC),this.paint(),this}drawPoints(a,u,h){return Nr(this.__path,a,u,h),this.paint(),this}clearPath(){return this.beginPath()}paint(){}},{M:Dr,L:Xr,C:zr,Q:Fr,Z:Ur,N:jr,D:Hr,X:Gr,G:Vr,F:qr,O:Qr,P:Jr,U:Zr}=Ee$2,$r=$t$2.get(`PathDrawer`),Kr={drawPathByData(a,u){if(!u)return;let h,xC=0,SC=u.length;for(;xC<SC;)switch(h=u[xC],h){case Dr:a.moveTo(u[xC+1],u[xC+2]),xC+=3;break;case Xr:a.lineTo(u[xC+1],u[xC+2]),xC+=3;break;case zr:a.bezierCurveTo(u[xC+1],u[xC+2],u[xC+3],u[xC+4],u[xC+5],u[xC+6]),xC+=7;break;case Fr:a.quadraticCurveTo(u[xC+1],u[xC+2],u[xC+3],u[xC+4]),xC+=5;break;case Ur:a.closePath(),xC+=1;break;case jr:a.rect(u[xC+1],u[xC+2],u[xC+3],u[xC+4]),xC+=5;break;case Hr:a.roundRect(u[xC+1],u[xC+2],u[xC+3],u[xC+4],[u[xC+5],u[xC+6],u[xC+7],u[xC+8]]),xC+=9;break;case Gr:a.roundRect(u[xC+1],u[xC+2],u[xC+3],u[xC+4],u[xC+5]),xC+=6;break;case Vr:a.ellipse(u[xC+1],u[xC+2],u[xC+3],u[xC+4],u[xC+5]*D,u[xC+6]*D,u[xC+7]*D,u[xC+8]),xC+=9;break;case qr:a.ellipse(u[xC+1],u[xC+2],u[xC+3],u[xC+4],0,0,X$1,!1),xC+=5;break;case Qr:a.arc(u[xC+1],u[xC+2],u[xC+3],u[xC+4]*D,u[xC+5]*D,u[xC+6]),xC+=7;break;case Jr:a.arc(u[xC+1],u[xC+2],u[xC+3],0,X$1,!1),xC+=4;break;case Zr:a.arcTo(u[xC+1],u[xC+2],u[xC+3],u[xC+4],u[xC+5]),xC+=6;break;default:$r.error(`command: ${h} [index:${xC}]`,u);return}}},{M:ti$2,L:ei$1,C:si$2,Q:ri$2,Z:ii$2,N:ni$2,D:oi$2,X:ai$2,G:hi$2,F:li$1,O:di$2,P:ui$1,U:ci$1}=Ee$2,{toTwoPointBounds:_i$2,toTwoPointBoundsByQuadraticCurve:pi$1,arcTo:fi$1,arc:gi$1,ellipse:yi$1}=ns$1,{addPointBounds:mi$1,copy:xi$1,addPoint:wi$1,setPoint:bi$1,addBounds:Bi$1,toBounds:vi$1}=mt$3,ki$1=$t$2.get(`PathBounds`),Ci$1,Oi$1,Ti$1,Pi$1={},Si$1={},Ri$1={},Li$1={toBounds(a,u){Li$1.toTwoPointBounds(a,Si$1),vi$1(Si$1,u)},toTwoPointBounds(a,u){if(!a||!a.length)return bi$1(u,0,0);let h,xC,SC,CC,wC,TC=0,EC=0,DC=0,OC=a.length;for(;TC<OC;)switch(wC=a[TC],TC===0&&(wC===ii$2||wC===si$2||wC===ri$2?bi$1(u,EC,DC):bi$1(u,a[TC+1],a[TC+2])),wC){case ti$2:case ei$1:EC=a[TC+1],DC=a[TC+2],wi$1(u,EC,DC),TC+=3;break;case si$2:SC=a[TC+5],CC=a[TC+6],_i$2(EC,DC,a[TC+1],a[TC+2],a[TC+3],a[TC+4],SC,CC,Pi$1),mi$1(u,Pi$1),EC=SC,DC=CC,TC+=7;break;case ri$2:h=a[TC+1],xC=a[TC+2],SC=a[TC+3],CC=a[TC+4],pi$1(EC,DC,h,xC,SC,CC,Pi$1),mi$1(u,Pi$1),EC=SC,DC=CC,TC+=5;break;case ii$2:TC+=1;break;case ni$2:EC=a[TC+1],DC=a[TC+2],Bi$1(u,EC,DC,a[TC+3],a[TC+4]),TC+=5;break;case oi$2:case ai$2:EC=a[TC+1],DC=a[TC+2],Bi$1(u,EC,DC,a[TC+3],a[TC+4]),TC+=wC===oi$2?9:6;break;case hi$2:yi$1(null,a[TC+1],a[TC+2],a[TC+3],a[TC+4],a[TC+5],a[TC+6],a[TC+7],a[TC+8],Pi$1,Ri$1),TC===0?xi$1(u,Pi$1):mi$1(u,Pi$1),EC=Ri$1.x,DC=Ri$1.y,TC+=9;break;case li$1:EC=a[TC+1],DC=a[TC+2],Oi$1=a[TC+3],Ti$1=a[TC+4],Bi$1(u,EC-Oi$1,DC-Ti$1,2*Oi$1,2*Ti$1),EC+=Oi$1,TC+=5;break;case di$2:gi$1(null,a[TC+1],a[TC+2],a[TC+3],a[TC+4],a[TC+5],a[TC+6],Pi$1,Ri$1),TC===0?xi$1(u,Pi$1):mi$1(u,Pi$1),EC=Ri$1.x,DC=Ri$1.y,TC+=7;break;case ui$1:EC=a[TC+1],DC=a[TC+2],Ci$1=a[TC+3],Bi$1(u,EC-Ci$1,DC-Ci$1,2*Ci$1,2*Ci$1),EC+=Ci$1,TC+=4;break;case ci$1:fi$1(null,EC,DC,a[TC+1],a[TC+2],a[TC+3],a[TC+4],a[TC+5],Pi$1,Ri$1),TC===0?xi$1(u,Pi$1):mi$1(u,Pi$1),EC=Ri$1.x,DC=Ri$1.y,TC+=6;break;default:ki$1.error(`command: ${wC} [index:${TC}]`,a);return}}},{M:Ei$1,L:Ii$1,Z:Mi$1}=Ee$2,{getCenterX:Ai$1,getCenterY:Wi$1}=lt$2,{arcTo:Ni$1}=br,Yi$1={smooth(a,u,h){let xC,SC,CC,wC=0,TC=0,EC=0,DC=0,OC=0,kC=0,AC=0,jC=0,MC=0,NC=a.length,PC=[];for(;wC<NC;){switch(xC=a[wC],xC){case Ei$1:DC=jC=a[wC+1],OC=MC=a[wC+2],wC+=3,a[wC]===Ii$1?(kC=a[wC+1],AC=a[wC+2],PC.push(Ei$1,Ai$1(DC,kC),Wi$1(OC,AC))):PC.push(Ei$1,DC,OC);break;case Ii$1:switch(TC=a[wC+1],EC=a[wC+2],wC+=3,a[wC]){case Ii$1:Ni$1(PC,TC,EC,a[wC+1],a[wC+2],u,jC,MC);break;case Mi$1:Ni$1(PC,TC,EC,DC,OC,u,jC,MC);break;default:PC.push(Ii$1,TC,EC)}jC=TC,MC=EC;break;case Mi$1:SC!==Mi$1&&(Ni$1(PC,DC,OC,kC,AC,u,jC,MC),PC.push(Mi$1)),wC+=1;break;default:CC=Ye$2[xC];for(let u=0;u<CC;u++)PC.push(a[wC+u]);wC+=CC}SC=xC}return xC!==Mi$1&&(PC[1]=DC,PC[2]=OC),PC}};function Di$1(a){return new Yr(a)}var Xi$1=Di$1();Re$2.creator=Di$1(),Re$2.parse=$s.parse,Re$2.convertToCanvasData=$s.toCanvasData;var{drawRoundRect:zi$1}=De$2;function Fi$1(a){(function(a){a&&!a.roundRect&&(a.roundRect=function(a,u,h,xC,SC){zi$1(this,a,u,h,xC,SC)})})(a)}var Ui$1={alphaPixelTypes:[`png`,`webp`,`svg`],upperCaseTypeMap:{},mineType:a=>!a||a.startsWith(`image`)?a:(a===`jpg`&&(a=`jpeg`),`image/`+a),fileType(a){let u=a.split(`.`);return u[u.length-1]},isOpaqueImage(a){let u=ji$1.fileType(a);return[`jpg`,`jpeg`].some(a=>a===u)},getExportOptions(a){switch(typeof a){case`object`:return a;case`number`:return{quality:a};case`boolean`:return{blob:a};default:return{}}}},ji$1=Ui$1;ji$1.alphaPixelTypes.forEach(a=>ji$1.upperCaseTypeMap[a]=a.toUpperCase());var Hi$1=$t$2.get(`TaskProcessor`),Gi$1=class{constructor(a){this.parallel=!0,this.time=1,this.id=w.create(w.TASK),this.task=a}run(){return fe$2(this,void 0,void 0,function*(){try{if(this.isComplete)return;if(this.canUse&&!this.canUse())return this.cancel();this.task&&this.parent.running&&(yield this.task())}catch(a){Hi$1.error(a)}})}complete(){this.isComplete=!0,this.parent=this.task=this.canUse=null}cancel(){this.isCancel=!0,this.complete()}},Vi$1=class{get total(){return this.list.length+this.delayNumber}get finishedIndex(){return this.isComplete?0:this.index+this.parallelSuccessNumber}get remain(){return this.isComplete?this.total:this.total-this.finishedIndex}get percent(){let{total:a}=this,u=0,h=0;for(let xC=0;xC<a;xC++)xC<=this.finishedIndex?(h+=this.list[xC].time,xC===this.finishedIndex&&(u=h)):u+=this.list[xC].time;return this.isComplete?1:h/u}constructor(a){this.config={parallel:6},this.list=[],this.running=!1,this.isComplete=!0,this.index=0,this.delayNumber=0,a&&_.assign(this.config,a),this.empty()}add(a,u,h){let xC,SC,CC,wC,TC=new Gi$1(a);return TC.parent=this,o(u)?wC=u:u&&(SC=u.parallel,xC=u.start,CC=u.time,wC=u.delay,h||=u.canUse),CC&&(TC.time=CC),!1===SC&&(TC.parallel=!1),h&&(TC.canUse=h),s(wC)?this.push(TC,xC):(this.delayNumber++,setTimeout(()=>{this.delayNumber&&(this.delayNumber--,this.push(TC,xC))},wC)),this.isComplete=!1,TC}push(a,u){this.list.push(a),!1===u||this.timer||(this.timer=setTimeout(()=>this.start()))}empty(){this.index=0,this.parallelSuccessNumber=0,this.list=[],this.parallelList=[],this.delayNumber=0}start(){this.running||(this.running=!0,this.isComplete=!1,this.run())}pause(){clearTimeout(this.timer),this.timer=null,this.running=!1}resume(){this.start()}skip(){this.index++,this.resume()}stop(){this.isComplete=!0,this.list.forEach(a=>{a.isComplete||a.cancel()}),this.pause(),this.empty()}run(){this.running&&(this.setParallelList(),this.parallelList.length>1?this.runParallelTasks():this.remain?this.runTask():this.onComplete())}runTask(){let a=this.list[this.index];a?a.run().then(()=>{this.onTask(a),this.index++,a.isCancel?this.runTask():this.nextTask()}).catch(a=>{this.onError(a)}):this.timer=setTimeout(()=>this.nextTask())}runParallelTasks(){this.parallelList.forEach(a=>this.runParallelTask(a))}runParallelTask(a){a.run().then(()=>{this.onTask(a),this.fillParallelTask()}).catch(a=>{this.onParallelError(a)})}nextTask(){this.total===this.finishedIndex?this.onComplete():this.timer=setTimeout(()=>this.run())}setParallelList(){let a,{config:u,list:h,index:xC}=this;this.parallelList=[],this.parallelSuccessNumber=0;let SC=xC+u.parallel;if(SC>h.length&&(SC=h.length),u.parallel>1)for(let u=xC;u<SC&&(a=h[u],a.parallel);u++)this.parallelList.push(a)}fillParallelTask(){let a,u=this.parallelList;this.parallelSuccessNumber++,u.pop();let h=u.length,xC=this.finishedIndex+h;if(u.length){if(!this.running)return;xC<this.total&&(a=this.list[xC],a&&a.parallel&&(u.push(a),this.runParallelTask(a)))}else this.index+=this.parallelSuccessNumber,this.parallelSuccessNumber=0,this.nextTask()}onComplete(){this.stop(),this.config.onComplete&&this.config.onComplete()}onTask(a){a.complete(),this.config.onTask&&this.config.onTask()}onParallelError(a){this.parallelList.forEach(a=>{a.parallel=!1}),this.parallelList.length=0,this.parallelSuccessNumber=0,this.onError(a)}onError(a){this.pause(),this.config.onError&&this.config.onError(a)}destroy(){this.stop()}},qi$1=$t$2.get(`Resource`),Qi$1={tasker:new Vi$1,map:{},get isComplete(){return Ji$1.tasker.isComplete},set(a,u){Ji$1.map[a]&&qi$1.repeat(a),Ji$1.map[a]=u},get:a=>Ji$1.map[a],remove(a){let u=Ji$1.map[a];u&&(u.destroy&&u.destroy(),delete Ji$1.map[a])},loadImage(a,u){return new Promise((h,xC)=>{let SC=this.setImage(a,a,u);SC.load(()=>h(SC),a=>xC(a))})},setImage(a,u,h){let xC;return i(u)?xC={url:u}:u.url||(xC={url:a,view:u}),xC&&(h&&(xC.format=h),u=oe$2.image(xC)),Ji$1.set(a,u),u},destroy(){Ji$1.map={}}},Ji$1=Qi$1,Zi$1={maxRecycled:10,recycledList:[],patternTasker:new Vi$1,get(a){let u=Qi$1.get(a.url);return u||Qi$1.set(a.url,u=oe$2.image(a)),u.use++,u},recycle(a){a.use--,setTimeout(()=>{a.use||$i$1.recycledList.push(a)})},clearRecycled(){let a=$i$1.recycledList;a.length>$i$1.maxRecycled&&(a.forEach(a=>!a.use&&a.url&&Qi$1.remove(a.url)),a.length=0)},hasAlphaPixel:a=>Ui$1.alphaPixelTypes.some(u=>$i$1.isFormat(u,a)),isFormat(a,u){if(u.format)return u.format===a;let{url:h}=u;if(h.startsWith(`data:`)){if(h.startsWith(`data:`+Ui$1.mineType(a)))return!0}else if(h.includes(`.`+a)||h.includes(`.`+Ui$1.upperCaseTypeMap[a])||a===`png`&&!h.includes(`.`))return!0;return!1},destroy(){$i$1.recycledList=[]}},$i$1=Zi$1,{IMAGE:Ki$1,create:tn}=w,en=class{get url(){return this.config.url}get completed(){return this.ready||!!this.error}constructor(a){if(this.use=0,this.waitComplete=[],this.innerId=tn(Ki$1),this.config=a||={url:``},a.view){let{view:u}=a;this.setView(u.config?u.view:u)}Zi$1.isFormat(`svg`,a)&&(this.isSVG=!0),Zi$1.hasAlphaPixel(a)&&(this.hasAlphaPixel=!0)}load(a,u){if(!this.loading){this.loading=!0;let{crossOrigin:a}=this.config;Qi$1.tasker.add(()=>fe$2(this,void 0,void 0,function*(){return yield m.origin.loadImage(this.url,s(a)?m.image.crossOrigin:a,this).then(a=>this.setView(a)).catch(a=>{this.error=a,this.onComplete(!1)})}))}return this.waitComplete.push(a,u),this.waitComplete.length-2}unload(a,u){let h=this.waitComplete;if(u){let u=h[a+1];u&&u({type:`stop`})}h[a]=h[a+1]=void 0}setView(a){this.ready=!0,this.width=a.naturalWidth||a.width,this.height=a.naturalHeight||a.height,this.view=a,this.onComplete(!0)}onComplete(a){let u;this.waitComplete.forEach((h,xC)=>{u=xC%2,h&&(a?u||h(this):u&&h(this.error))}),this.waitComplete.length=0,this.loading=!1}getFull(a){return this.view}getCanvas(a,u,h,xC,SC,CC,wC){if(a||=this.width,u||=this.height,this.cache){let{params:a,data:u}=this.cache;for(let h in a)if(a[h]!==arguments[h]){u=null;break}if(u)return u}let TC=m.image.resize(this.view,a,u,SC,CC,void 0,wC,h,xC);return this.cache=this.use>1?{data:TC,params:arguments}:null,TC}getPattern(a,u,h,xC){let SC=m.canvas.createPattern(a,u);return m.image.setPatternTransform(SC,h,xC),SC}destroy(){this.config={url:``},this.cache=null,this.waitComplete.length=0}};function sn(a,u,h,xC){xC||(h.configurable=h.enumerable=!0),Object.defineProperty(a,u,h)}function rn(a,u){return Object.getOwnPropertyDescriptor(a,u)}function nn(a,u){let h=`_`+a;return{get(){return this[h]??u},set(a){this[h]=a}}}function on(a,u){return(h,xC)=>hn(h,xC,a,u&&u(xC))}function an(a){return a}function hn(a,u,h,xC){sn(a,u,Object.assign({get(){return this.__getAttr(u)},set(a){this.__setAttr(u,a)}},xC||{})),Nn(a,u,h)}function ln(a){return on(a)}function dn(a,u){return on(a,a=>({set(h){this.__setAttr(a,h,u)&&(this.__layout.matrixChanged||this.__layout.matrixChange())}}))}function un(a,u){return on(a,a=>({set(h){this.__setAttr(a,h,u)&&(this.__layout.matrixChanged||this.__layout.matrixChange(),this.__scrollWorld||={})}}))}function cn(a){return on(a,a=>({set(u){this.__setAttr(a,u)&&(this.__hasAutoLayout=!!(this.origin||this.around||this.flow),this.__local||this.__layout.createLocal(),yn(this))}}))}function _n(a,u){return on(a,a=>({set(h){this.__setAttr(a,h,u)&&(this.__layout.scaleChanged||this.__layout.scaleChange())}}))}function pn(a,u){return on(a,a=>({set(h){this.__setAttr(a,h,u)&&(this.__layout.rotationChanged||this.__layout.rotationChange())}}))}function fn(a,u){return on(a,a=>({set(h){this.__setAttr(a,h,u)&&yn(this)}}))}function gn(a){return on(a,a=>({set(u){this.__setAttr(a,u)&&(yn(this),this.__.__removeNaturalSize())}}))}function yn(a){a.__layout.boxChanged||a.__layout.boxChange(),a.__hasAutoLayout&&(a.__layout.matrixChanged||a.__layout.matrixChange())}function mn(a){return on(a,a=>({set(u){let h=this.__;h.__pathInputed!==2&&(h.__pathInputed=u?1:0),u||(h.__pathForRender=void 0),this.__setAttr(a,u),yn(this)}}))}var xn=fn;function wn(a,u){return on(a,a=>({set(h){this.__setAttr(a,h)&&(bn(this),u&&(this.__.__useStroke=!0))}}))}function bn(a){a.__layout.strokeChanged||a.__layout.strokeChange(),a.__.__useArrow&&yn(a)}var Bn=wn;function vn(a){return on(a,a=>({set(u){this.__setAttr(a,u),this.__layout.renderChanged||this.__layout.renderChange()}}))}function kn(a){return on(a,a=>({set(u){this.__setAttr(a,u)&&(this.__layout.surfaceChanged||this.__layout.surfaceChange())}}))}function Cn(a){return on(a,a=>({set(u){if(this.__setAttr(a,u)){let a=this.__;_.stintSet(a,`__useDim`,a.dim||a.bright||a.dimskip),this.__layout.surfaceChange()}}}))}function On(a){return on(a,a=>({set(u){this.__setAttr(a,u)&&(this.__layout.opacityChanged||this.__layout.opacityChange()),this.mask&&Pn(this)}}))}function Tn(a){return on(a,a=>({set(u){let h=this.visible;if(!0===h&&u===0){if(this.animationOut)return this.__runAnimation(`out`,()=>Sn(this,a,u,h))}else h===0&&!0===u&&this.animation&&this.__runAnimation(`in`);Sn(this,a,u,h),this.mask&&Pn(this)}}))}function Pn(a){let{parent:u}=a;if(u){let{__hasMask:a}=u;u.__updateMask(),a!==u.__hasMask&&u.forceUpdate()}}function Sn(a,u,h,xC){a.__setAttr(u,h)&&(a.__layout.opacityChanged||a.__layout.opacityChange(),xC!==0&&h!==0||yn(a))}function Rn(a){return on(a,a=>({set(u){this.__setAttr(a,u)&&(this.__layout.surfaceChange(),this.waitParent(()=>{this.parent.__layout.childrenSortChange()}))}}))}function Ln(a){return on(a,a=>({set(u){this.__setAttr(a,u)&&(this.__layout.boxChanged||this.__layout.boxChange(),this.waitParent(()=>{this.parent.__updateMask(u)}))}}))}function En(a){return on(a,a=>({set(u){this.__setAttr(a,u)&&this.waitParent(()=>{this.parent.__updateEraser(u)})}}))}function In(a){return on(a,a=>({set(u){this.__setAttr(a,u)&&(this.__layout.hitCanvasChanged=!0,$t$2.showBounds===`hit`&&this.__layout.surfaceChange(),this.leafer&&this.leafer.updateCursor())}}))}function Mn(a){return on(a,a=>({set(u){this.__setAttr(a,u),this.leafer&&this.leafer.updateCursor()}}))}function An(a){return(u,h)=>{sn(u,`__DataProcessor`,{get:()=>a})}}function Nn(a,u,h){let xC=a.__DataProcessor.prototype,SC=`_`+u,CC=function(a){return`set`+a.charAt(0).toUpperCase()+a.slice(1)}(u),wC=nn(u,h);if(s(h))wC.get=function(){return this[SC]};else if(typeof h==`function`)wC.get=function(){return this[SC]??h(this.__leaf)};else if(d(h)){let a=c(h);wC.get=function(){return this[SC]??(this[SC]=a?{}:_.clone(h))}}let TC=a.isBranchLeaf;u===`width`?wC.get=function(){let a=this[SC];if(a==null){let a=this,u=a.__naturalWidth,xC=a.__leaf;return!h||xC.pathInputed?xC.boxBounds.width:u?a._height&&a.__useNaturalRatio?a._height*u/a.__naturalHeight:u:TC&&xC.children.length?xC.boxBounds.width:h}return a}:u===`height`&&(wC.get=function(){let a=this[SC];if(a==null){let a=this,u=a.__naturalHeight,xC=a.__leaf;return!h||xC.pathInputed?xC.boxBounds.height:u?a._width&&a.__useNaturalRatio?a._width*u/a.__naturalWidth:u:TC&&xC.children.length?xC.boxBounds.height:h}return a});let EC,DC=xC;for(;!EC&&DC;)EC=rn(DC,u),DC=DC.__proto__;EC&&EC.set&&(wC.set=EC.set),xC[CC]&&(wC.set=xC[CC],delete xC[CC]),sn(xC,u,wC)}var Yn=new $t$2(`rewrite`),Dn=[],Xn=[`destroy`,`constructor`];function zn(a){return(u,h)=>{Dn.push({name:u.constructor.name+`.`+h,run:()=>{u[h]=a}})}}function Fn(){return a=>{Un()}}function Un(a){Dn.length&&=(Dn.forEach(u=>{a&&Yn.error(u.name,`Class@rewriteAble()`),u.run()}),0)}function jn(a,u){return h=>{var xC;(a.prototype?(xC=a.prototype,Object.getOwnPropertyNames(xC)):Object.keys(a)).forEach(xC=>{Xn.includes(xC)||u&&u.includes(xC)||(a.prototype?rn(a.prototype,xC).writable&&(h.prototype[xC]=a.prototype[xC]):h.prototype[xC]=a[xC])})}}function Hn(){return a=>{he$2.register(a)}}function Gn(){return a=>{ue$2.register(a)}}setTimeout(()=>Un(!0));var{copy:Vn,toInnerPoint:qn,toOuterPoint:Qn,scaleOfOuter:Jn,rotateOfOuter:Zn,skewOfOuter:$n,multiplyParent:Kn,divideParent:to,getLayout:eo}=$$1,so={},{round:ro}=Math,io={updateAllMatrix(a,u,h){if(u&&a.__hasAutoLayout&&a.__layout.matrixChanged&&(h=!0),ao(a,u,h),a.isBranch){let{children:xC}=a;for(let a=0,SC=xC.length;a<SC;a++)oo(xC[a],u,h)}},updateMatrix(a,u,h){let xC=a.__layout;u?h&&(xC.waitAutoLayout=!0,a.__hasAutoLayout&&(xC.matrixChanged=!1)):xC.waitAutoLayout&&=!1,xC.matrixChanged&&a.__updateLocalMatrix(),xC.waitAutoLayout||a.__updateWorldMatrix()},updateBounds(a){let u=a.__layout;u.boundsChanged&&a.__updateLocalBounds(),u.waitAutoLayout||a.__updateWorldBounds()},updateAllWorldOpacity(a){if(a.__updateWorldOpacity(),a.isBranch){let{children:u}=a;for(let a=0,h=u.length;a<h;a++)ho(u[a])}},updateChange(a){let u=a.__layout;u.stateStyleChanged&&a.updateState(),u.opacityChanged&&ho(a),a.__updateChange()},updateAllChange(a){if(uo(a),a.isBranch){let{children:u}=a;for(let a=0,h=u.length;a<h;a++)lo(u[a])}},worldHittable(a){for(;a;){if(!a.__.hittable)return!1;a=a.parent}return!0},draggable:a=>(a.draggable||a.editable)&&a.hitSelf&&!a.locked,copyCanvasByWorld(a,u,h,xC,SC,CC){xC||=a.__nowWorld,a.__worldFlipped||m.fullImageShadow?u.copyWorldByReset(h,xC,a.__nowWorld,SC,CC):u.copyWorldToInner(h,xC,a.__layout.renderBounds,SC)},moveWorld(a,u,h=0,xC,SC){let CC=d(u)?Object.assign({},u):{x:u,y:h};xC?Qn(a.localTransform,CC,CC,!0):a.parent&&qn(a.parent.scrollWorldTransform,CC,CC,!0),no.moveLocal(a,CC.x,CC.y,SC)},moveLocal(a,u,h=0,xC){d(u)&&(h=u.y,u=u.x),u+=a.x,h+=a.y,a.leafer&&a.leafer.config.pointSnap&&(u=ro(u),h=ro(h)),xC?a.animate({x:u,y:h},xC):(a.x=u,a.y=h)},zoomOfWorld(a,u,h,xC,SC,CC){no.zoomOfLocal(a,co(a,u),h,xC,SC,CC)},zoomOfLocal(a,u,h,xC=h,SC,CC){let wC=a.__localMatrix;if(o(xC)||(xC&&(CC=xC),xC=h),Vn(so,wC),Jn(so,u,h,xC),no.hasHighPosition(a))no.setTransform(a,so,SC,CC);else{let u=a.x+so.e-wC.e,TC=a.y+so.f-wC.f;CC&&!SC?a.animate({x:u,y:TC,scaleX:a.scaleX*h,scaleY:a.scaleY*xC},CC):(a.x=u,a.y=TC,a.scaleResize(h,xC,!0!==SC))}},rotateOfWorld(a,u,h,xC){no.rotateOfLocal(a,co(a,u),h,xC)},rotateOfLocal(a,u,h,xC){let SC=a.__localMatrix;Vn(so,SC),Zn(so,u,h),no.hasHighPosition(a)?no.setTransform(a,so,!1,xC):a.set({x:a.x+so.e-SC.e,y:a.y+so.f-SC.f,rotation:N$1.formatRotation(a.rotation+h)},xC)},skewOfWorld(a,u,h,xC,SC,CC){no.skewOfLocal(a,co(a,u),h,xC,SC,CC)},skewOfLocal(a,u,h,xC=0,SC,CC){Vn(so,a.__localMatrix),$n(so,u,h,xC),no.setTransform(a,so,SC,CC)},transformWorld(a,u,h,xC){Vn(so,a.worldTransform),Kn(so,u),a.parent&&to(so,a.parent.scrollWorldTransform),no.setTransform(a,so,h,xC)},transform(a,u,h,xC){Vn(so,a.localTransform),Kn(so,u),no.setTransform(a,so,h,xC)},setTransform(a,u,h,xC){let SC=a.__,CC=SC.origin&&no.getInnerOrigin(a,SC.origin),wC=eo(u,CC,SC.around&&no.getInnerOrigin(a,SC.around));if(no.hasOffset(a)&&(wC.x-=SC.offsetX,wC.y-=SC.offsetY),h){let u=wC.scaleX/a.scaleX,h=wC.scaleY/a.scaleY;if(delete wC.scaleX,delete wC.scaleY,CC){Ut$3.scale(a.boxBounds,Math.abs(u),Math.abs(h));let xC=no.getInnerOrigin(a,SC.origin);lt$2.move(wC,CC.x-xC.x,CC.y-xC.y)}a.set(wC),a.scaleResize(u,h,!1)}else a.set(wC,xC)},getFlipTransform(a,u){let h={a:1,b:0,c:0,d:1,e:0,f:0},xC=u===`x`?1:-1;return Jn(h,no.getLocalOrigin(a,`center`),-1*xC,1*xC),h},getLocalOrigin:(a,u)=>lt$2.tempToOuterOf(no.getInnerOrigin(a,u),a.localTransform),getInnerOrigin(a,u){let h={};return vt$2.toPoint(u,a.boxBounds,h),h},getRelativeWorld:(a,u,h)=>(Vn(so,a.worldTransform),to(so,u.scrollWorldTransform),h?so:Object.assign({},so)),drop(a,u,h,xC){a.setTransform(no.getRelativeWorld(a,u,!0),xC),u.add(a,h)},hasHighPosition:a=>a.origin||a.around||no.hasOffset(a),hasOffset:a=>a.offsetX||a.offsetY,hasParent(a,u){if(!u)return!1;for(;a;){if(u===a)return!0;a=a.parent}},animateMove(a,u,h=.3){if(u.x||u.y)if(Math.abs(u.x)<1&&Math.abs(u.y)<1)a.move(u);else{let xC=u.x*h,SC=u.y*h;u.x-=xC,u.y-=SC,a.move(xC,SC),m.requestRender(()=>no.animateMove(a,u,h))}}},no=io,{updateAllMatrix:oo,updateMatrix:ao,updateAllWorldOpacity:ho,updateAllChange:lo,updateChange:uo}=no;function co(a,u){return a.updateLayout(),a.parent?lt$2.tempToInnerOf(u,a.parent.scrollWorldTransform):u}var _o={worldBounds:a=>a.__world,localBoxBounds:a=>a.__.eraser||a.__.visible===0?null:a.__local||a.__layout,localStrokeBounds:a=>a.__.eraser||a.__.visible===0?null:a.__layout.localStrokeBounds,localRenderBounds:a=>a.__.eraser||a.__.visible===0?null:a.__layout.localRenderBounds,maskLocalBoxBounds:(a,u)=>fo(a,u)&&a.__localBoxBounds,maskLocalStrokeBounds:(a,u)=>fo(a,u)&&a.__layout.localStrokeBounds,maskLocalRenderBounds:(a,u)=>fo(a,u)&&a.__layout.localRenderBounds,excludeRenderBounds:(a,u)=>!(!u.bounds||u.bounds.hit(a.__world,u.matrix))||!(!u.hideBounds||!u.hideBounds.includes(a.__world,u.matrix))},po;function fo(a,u){return u||(po=0),a.__.mask&&(po=1),po<0?null:(po&&=-1,!0)}var{updateBounds:go}=io,yo={sort:(a,u)=>a.__.zIndex===u.__.zIndex?a.__tempNumber-u.__tempNumber:a.__.zIndex-u.__.zIndex,pushAllChildBranch(a,u){if(a.__tempNumber=1,a.__.__childBranchNumber){let{children:h}=a;for(let xC=0,SC=h.length;xC<SC;xC++)(a=h[xC]).isBranch&&(a.__tempNumber=1,u.add(a),mo(a,u))}},pushAllParent(a,u){let{keys:h}=u;if(h)for(;a.parent&&s(h[a.parent.innerId]);)u.add(a.parent),a=a.parent;else for(;a.parent;)u.add(a.parent),a=a.parent},pushAllBranchStack(a,u){let h=u.length,{children:xC}=a;for(let a=0,h=xC.length;a<h;a++)xC[a].isBranch&&u.push(xC[a]);for(let a=h,xC=u.length;a<xC;a++)xo(u[a],u)},updateBounds(a,u){let h=[a];xo(a,h),wo(h,u)},updateBoundsByBranchStack(a,u){let h,xC;for(let SC=a.length-1;SC>-1;SC--){h=a[SC],xC=h.children;for(let a=0,u=xC.length;a<u;a++)go(xC[a]);u&&u===h||go(h)}}},{pushAllChildBranch:mo,pushAllBranchStack:xo,updateBoundsByBranchStack:wo}=yo,bo={run(a){if(a&&a.length){let u=a.length;for(let h=0;h<u;h++)a[h]();a.length===u?a.length=0:a.splice(0,u)}}},{getRelativeWorld:Bo,updateBounds:vo}=io,{toOuterOf:ko,getPoints:Co,copy:Oo}=Ut$3,To=`_localContentBounds`,Po=`_worldContentBounds`,So=`_worldBoxBounds`,Ro=`_worldStrokeBounds`,Lo=class{get contentBounds(){return this._contentBounds||this.boxBounds}set contentBounds(a){this._contentBounds=a}get strokeBounds(){return this._strokeBounds||this.boxBounds}get renderBounds(){return this._renderBounds||this.boxBounds}set renderBounds(a){this._renderBounds=a}get localContentBounds(){return ko(this.contentBounds,this.leaf.__localMatrix,this[To]||(this[To]={})),this[To]}get localStrokeBounds(){return this._localStrokeBounds||this}get localRenderBounds(){return this._localRenderBounds||this}get worldContentBounds(){return ko(this.contentBounds,this.leaf.__world,this[Po]||(this[Po]={})),this[Po]}get worldBoxBounds(){return ko(this.boxBounds,this.leaf.__world,this[So]||(this[So]={})),this[So]}get worldStrokeBounds(){return ko(this.strokeBounds,this.leaf.__world,this[Ro]||(this[Ro]={})),this[Ro]}get a(){return 1}get b(){return 0}get c(){return 0}get d(){return 1}get e(){return this.leaf.__.x}get f(){return this.leaf.__.y}get x(){return this.e+this.boxBounds.x}get y(){return this.f+this.boxBounds.y}get width(){return this.boxBounds.width}get height(){return this.boxBounds.height}constructor(a){this.leaf=a,this.leaf.__local&&(this._localRenderBounds=this._localStrokeBounds=this.leaf.__local),a.__world&&(this.boxBounds={x:0,y:0,width:0,height:0},this.boxChange(),this.matrixChange())}createLocal(){let a=this.leaf.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0};this._localStrokeBounds||=a,this._localRenderBounds||=a}update(){let{leaf:a}=this,{leafer:u}=a;if(a.isApp)return vo(a);if(u)u.ready?u.watcher.changed&&u.layouter.layout():u.start();else{let u=a;for(;u.parent&&!u.parent.leafer;)u=u.parent;let h=u;if(h.__fullLayouting)return;h.__fullLayouting=!0,m.layout(h),delete h.__fullLayouting}}getTransform(a=`world`){this.update();let{leaf:u}=this;switch(a){case`world`:return u.__world;case`local`:return u.__localMatrix;case`inner`:return $$1.defaultMatrix;case`page`:a=u.zoomLayer;default:return Bo(u,a)}}getBounds(a,u=`world`){switch(this.update(),u){case`world`:return this.getWorldBounds(a);case`local`:return this.getLocalBounds(a);case`inner`:return this.getInnerBounds(a);case`page`:u=this.leaf.zoomLayer;default:return new Vt$3(this.getInnerBounds(a)).toOuterOf(this.getTransform(u))}}getInnerBounds(a=`box`){switch(a){case`render`:return this.renderBounds;case`content`:if(this.contentBounds)return this.contentBounds;case`box`:return this.boxBounds;case`stroke`:return this.strokeBounds}}getLocalBounds(a=`box`){switch(a){case`render`:return this.localRenderBounds;case`stroke`:return this.localStrokeBounds;case`content`:if(this.contentBounds)return this.localContentBounds;case`box`:return this.leaf.__localBoxBounds}}getWorldBounds(a=`box`){switch(a){case`render`:return this.leaf.__world;case`stroke`:return this.worldStrokeBounds;case`content`:if(this.contentBounds)return this.worldContentBounds;case`box`:return this.worldBoxBounds}}getLayoutBounds(a,u=`world`,h){let{leaf:xC}=this,SC,CC,wC,TC=this.getInnerBounds(a);switch(u){case`world`:SC=xC.getWorldPoint(TC),CC=xC.__world;break;case`local`:let{scaleX:a,scaleY:h,rotation:EC,skewX:DC,skewY:OC}=xC.__;wC={scaleX:a,scaleY:h,rotation:EC,skewX:DC,skewY:OC},SC=xC.getLocalPointByInner(TC);break;case`inner`:SC=TC,CC=$$1.defaultMatrix;break;case`page`:u=xC.zoomLayer;default:SC=xC.getWorldPoint(TC,u),CC=Bo(xC,u,!0)}if(wC||=$$1.getLayout(CC),Oo(wC,TC),lt$2.copy(wC,SC),h){let{scaleX:a,scaleY:u}=wC,h=Math.abs(a),xC=Math.abs(u);h===1&&xC===1||(wC.scaleX/=h,wC.scaleY/=xC,wC.width*=h,wC.height*=xC)}return wC}getLayoutPoints(a,u=`world`){let{leaf:h}=this,xC=Co(this.getInnerBounds(a)),SC;switch(u){case`world`:SC=null;break;case`local`:SC=h.parent;break;case`inner`:break;case`page`:u=h.zoomLayer;default:SC=u}return s(SC)||xC.forEach(a=>h.innerToWorld(a,null,!1,SC)),xC}shrinkContent(){let{x:a,y:u,width:h,height:xC}=this.boxBounds;this._contentBounds={x:a,y:u,width:h,height:xC}}spreadStroke(){let{x:a,y:u,width:h,height:xC}=this.strokeBounds;this._strokeBounds={x:a,y:u,width:h,height:xC},this._localStrokeBounds={x:a,y:u,width:h,height:xC},this.renderSpread||this.spreadRenderCancel()}spreadRender(){let{x:a,y:u,width:h,height:xC}=this.renderBounds;this._renderBounds={x:a,y:u,width:h,height:xC},this._localRenderBounds={x:a,y:u,width:h,height:xC}}shrinkContentCancel(){this._contentBounds=void 0}spreadStrokeCancel(){let a=this.renderBounds===this.strokeBounds;this._strokeBounds=this.boxBounds,this._localStrokeBounds=this.leaf.__localBoxBounds,a&&this.spreadRenderCancel()}spreadRenderCancel(){this._renderBounds=this._strokeBounds,this._localRenderBounds=this._localStrokeBounds}boxChange(){this.boxChanged=!0,this.localBoxChanged?this.boundsChanged||=!0:this.localBoxChange(),this.hitCanvasChanged=!0}localBoxChange(){this.localBoxChanged=!0,this.boundsChanged=!0}strokeChange(){this.strokeChanged=!0,this.strokeSpread||=1,this.boundsChanged=!0,this.hitCanvasChanged=!0}renderChange(){this.renderChanged=!0,this.renderSpread||=1,this.boundsChanged=!0}scaleChange(){this.scaleChanged=!0,this._scaleOrRotationChange()}rotationChange(){this.rotationChanged=!0,this.affectRotation=!0,this._scaleOrRotationChange()}_scaleOrRotationChange(){this.affectScaleOrRotation=!0,this.matrixChange(),this.leaf.__local||this.createLocal()}matrixChange(){this.matrixChanged=!0,this.localBoxChanged?this.boundsChanged||=!0:this.localBoxChange()}surfaceChange(){this.surfaceChanged=!0}opacityChange(){this.opacityChanged=!0,this.surfaceChanged||this.surfaceChange()}childrenSortChange(){this.childrenSortChanged||(this.childrenSortChanged=this.affectChildrenSort=!0,this.leaf.forceUpdate(`surface`))}destroy(){}},Eo=class{constructor(a,u){this.bubbles=!1,this.type=a,u&&(this.target=u)}stopDefault(){this.isStopDefault=!0,this.origin&&m.event.stopDefault(this.origin)}stopNow(){this.isStopNow=!0,this.isStop=!0,this.origin&&m.event.stopNow(this.origin)}stop(){this.isStop=!0,this.origin&&m.event.stop(this.origin)}},Io=class extends Eo{constructor(a,u,h){super(a,u),this.parent=h,this.child=u}};Io.ADD=`child.add`,Io.REMOVE=`child.remove`,Io.CREATED=`created`,Io.MOUNTED=`mounted`,Io.UNMOUNTED=`unmounted`,Io.DESTROY=`destroy`;var Mo=`property.scroll`,Ao=class extends Eo{constructor(a,u,h,xC,SC){super(a,u),this.attrName=h,this.oldValue=xC,this.newValue=SC}};Ao.CHANGE=`property.change`,Ao.LEAFER_CHANGE=`property.leafer_change`,Ao.SCROLL=Mo;var Wo={scrollX:Mo,scrollY:Mo},No=class extends Eo{constructor(a,u){super(a),Object.assign(this,u)}};No.LOAD=`image.load`,No.LOADED=`image.loaded`,No.ERROR=`image.error`;var Yo=class extends Eo{static checkHas(a,u,h){h===`on`?u===Fo?a.__hasWorldEvent=!0:a.__hasLocalEvent=!0:(a.__hasLocalEvent=a.hasEvent(Do)||a.hasEvent(Xo)||a.hasEvent(zo),a.__hasWorldEvent=a.hasEvent(Fo))}static emitLocal(a){if(a.leaferIsReady){let{resized:u}=a.__layout;u!==`local`&&(a.emit(Do,a),u===`inner`&&a.emit(Xo,a)),a.emit(zo,a)}}static emitWorld(a){a.leaferIsReady&&a.emit(Fo,this)}};Yo.RESIZE=`bounds.resize`,Yo.INNER=`bounds.inner`,Yo.LOCAL=`bounds.local`,Yo.WORLD=`bounds.world`;var{RESIZE:Do,INNER:Xo,LOCAL:zo,WORLD:Fo}=Yo,Uo={};[Do,Xo,zo,Fo].forEach(a=>Uo[a]=1);var jo=class a extends Eo{get bigger(){if(!this.old)return!0;let{width:a,height:u}=this.old;return this.width>=a&&this.height>=u}get smaller(){return!this.bigger}get samePixelRatio(){return!this.old||this.pixelRatio===this.old.pixelRatio}constructor(u,h){d(u)?(super(a.RESIZE),Object.assign(this,u)):super(u),this.old=h}static isResizing(a){return this.resizingKeys&&!s(this.resizingKeys[a.innerId])}};jo.RESIZE=`resize`;var Ho=class extends Eo{constructor(a,u){super(a),this.data=u}};Ho.REQUEST=`watch.request`,Ho.DATA=`watch.data`;var Go=class extends Eo{constructor(a,u,h){super(a),u&&(this.data=u,this.times=h)}};Go.REQUEST=`layout.request`,Go.START=`layout.start`,Go.BEFORE=`layout.before`,Go.LAYOUT=`layout`,Go.AFTER=`layout.after`,Go.AGAIN=`layout.again`,Go.END=`layout.end`;var Vo=class extends Eo{constructor(a,u,h,xC){super(a),u&&(this.times=u),h&&(this.renderBounds=h,this.renderOptions=xC)}};Vo.REQUEST=`render.request`,Vo.CHILD_START=`render.child_start`,Vo.CHILD_END=`render.child_end`,Vo.START=`render.start`,Vo.BEFORE=`render.before`,Vo.RENDER=`render`,Vo.AFTER=`render.after`,Vo.AGAIN=`render.again`,Vo.END=`render.end`,Vo.NEXT=`render.next`;var qo=class extends Eo{};qo.START=`leafer.start`,qo.BEFORE_READY=`leafer.before_ready`,qo.READY=`leafer.ready`,qo.AFTER_READY=`leafer.after_ready`,qo.VIEW_READY=`leafer.view_ready`,qo.VIEW_COMPLETED=`leafer.view_completed`,qo.STOP=`leafer.stop`,qo.RESTART=`leafer.restart`,qo.END=`leafer.end`,qo.UPDATE_MODE=`leafer.update_mode`,qo.TRANSFORM=`leafer.transform`,qo.MOVE=`leafer.move`,qo.SCALE=`leafer.scale`,qo.ROTATE=`leafer.rotate`,qo.SKEW=`leafer.skew`;var{MOVE:Qo,SCALE:Jo,ROTATE:Zo,SKEW:$o}=qo,Ko={x:Qo,y:Qo,scaleX:Jo,scaleY:Jo,rotation:Zo,skewX:$o,skewY:$o},ta={},ea=class{set event(a){this.on(a)}on(a,u,h){if(!u){let u;if(l(a))a.forEach(a=>this.on(a[0],a[1],a[2]));else for(let h in a)l(u=a[h])?this.on(h,u[0],u[1]):this.on(h,u);return}let xC,SC,CC;h&&(h===`once`?SC=!0:typeof h==`boolean`?xC=h:(xC=h.capture,SC=h.once));let wC=sa(this,xC,!0),TC=i(a)?a.split(` `):a,EC=SC?{listener:u,once:SC}:{listener:u};TC.forEach(a=>{a&&(CC=wC[a],CC?CC.findIndex(a=>a.listener===u)===-1&&CC.push(EC):wC[a]=[EC],Uo[a]&&Yo.checkHas(this,a,`on`))})}off(a,u,h){if(a){let xC=i(a)?a.split(` `):a;if(u){let a,SC,CC;h&&(a=typeof h==`boolean`?h:h!==`once`&&h.capture);let wC=sa(this,a);xC.forEach(a=>{a&&(SC=wC[a],SC&&(CC=SC.findIndex(a=>a.listener===u),CC>-1&&SC.splice(CC,1),SC.length||delete wC[a],Uo[a]&&Yo.checkHas(this,a,`off`)))})}else{let{__bubbleMap:a,__captureMap:u}=this;xC.forEach(h=>{a&&delete a[h],u&&delete u[h]})}}else this.__bubbleMap=this.__captureMap=void 0}on_(a,u,h,xC){return u?this.on(a,h?u=u.bind(h):u,xC):l(a)&&a.forEach(a=>this.on(a[0],a[2]?a[1]=a[1].bind(a[2]):a[1],a[3])),{type:a,current:this,listener:u,options:xC}}off_(a){if(!a)return;let u=l(a)?a:[a];u.forEach(a=>{a&&(a.listener?a.current.off(a.type,a.listener,a.options):l(a.type)&&a.type.forEach(u=>a.current.off(u[0],u[1],u[3])))}),u.length=0}once(a,u,h,xC){if(!u)return l(a)&&a.forEach(a=>this.once(a[0],a[1],a[2],a[3]));d(h)?u=u.bind(h):xC=h,this.on(a,u,{once:!0,capture:xC})}emit(a,u,h){!u&&ue$2.has(a)&&(u=ue$2.get(a,{type:a,target:this,current:this}));let xC=sa(this,h)[a];if(xC){let SC;for(let CC=0,wC=xC.length;CC<wC&&!((SC=xC[CC])&&(SC.listener(u),SC.once&&(this.off(a,SC.listener,h),CC--,wC--),u&&u.isStopNow));CC++);}this.syncEventer&&this.syncEventer.emitEvent(u,h)}emitEvent(a,u){a.current=this,this.emit(a.type,a,u)}hasEvent(a,u){if(this.syncEventer&&this.syncEventer.hasEvent(a,u))return!0;let{__bubbleMap:h,__captureMap:xC}=this,SC=h&&h[a],CC=xC&&xC[a];return!!(s(u)?SC||CC:u?CC:SC)}destroy(){this.__captureMap=this.__bubbleMap=this.syncEventer=null}};function sa(a,u,h){if(u){let{__captureMap:u}=a;return u||(h?a.__captureMap={}:ta)}{let{__bubbleMap:u}=a;return u||(h?a.__bubbleMap={}:ta)}}var{on:ra,on_:ia,off:na,off_:oa,once:aa,emit:ha,emitEvent:la,hasEvent:da,destroy:ua}=ea.prototype,ca={on:ra,on_:ia,off:na,off_:oa,once:aa,emit:ha,emitEvent:la,hasEvent:da,destroyEventer:ua},_a=$t$2.get(`setAttr`),pa={__setAttr(a,u,h){if(this.leaferIsCreated){let xC=this.__.__getInput(a);if(!h||n(u)||s(u)||(_a.warn(this.innerName,a,u),u=void 0),d(u)||xC!==u){if(this.__realSetAttr(a,u),this.isLeafer){this.emitEvent(new Ao(Ao.LEAFER_CHANGE,this,a,xC,u));let h=Ko[a];h&&(this.emitEvent(new qo(h,this)),this.emitEvent(new qo(qo.TRANSFORM,this)))}this.emitPropertyEvent(Ao.CHANGE,a,xC,u);let h=Wo[a];return h&&this.emitPropertyEvent(h,a,xC,u),!0}return!1}return this.__realSetAttr(a,u),!0},emitPropertyEvent(a,u,h,xC){let SC=new Ao(a,this,u,h,xC);this.isLeafer||this.hasEvent(a)&&this.emitEvent(SC),this.leafer.emitEvent(SC)},__realSetAttr(a,u){let h=this.__;h[a]=u,this.__proxyData&&this.setProxyAttr(a,u),h.normalStyle&&(this.lockNormalStyle||s(h.normalStyle[a])||(h.normalStyle[a]=u))},__getAttr(a){return this.__proxyData?this.getProxyAttr(a):this.__.__get(a)}},{setLayout:fa,multiplyParent:ga,translateInner:ya,defaultWorld:ma}=$$1,{toPoint:xa,tempPoint:wa}=vt$2,ba={__updateWorldMatrix(){let{parent:a,__layout:u,__world:h,__scrollWorld:xC,__:SC}=this;ga(this.__local||u,a?a.__scrollWorld||a.__world:ma,h,!!u.affectScaleOrRotation,SC),xC&&ya(Object.assign(xC,h),SC.scrollX,SC.scrollY)},__updateLocalMatrix(){if(this.__local){let a=this.__layout,u=this.__local,h=this.__;a.affectScaleOrRotation&&(a.scaleChanged&&(a.resized||=`scale`)||a.rotationChanged)&&(fa(u,h,null,null,a.affectRotation),a.scaleChanged=a.rotationChanged=void 0),u.e=h.x+h.offsetX,u.f=h.y+h.offsetY,(h.around||h.origin)&&(xa(h.around||h.origin,a.boxBounds,wa),ya(u,-wa.x,-wa.y,!h.around))}this.__layout.matrixChanged=void 0}},{updateMatrix:Ba,updateAllMatrix:va}=io,{updateBounds:ka}=yo,{toOuterOf:Ca,copyAndSpread:Oa,copy:Ta}=Ut$3,{toBounds:Pa}=Li$1,Sa={__updateWorldBounds(){let{__layout:a,__world:u}=this;Ca(a.renderBounds,u,u),a.resized&&=(a.resized===`inner`&&this.__onUpdateSize(),this.__hasLocalEvent&&Yo.emitLocal(this),void 0),this.__hasWorldEvent&&Yo.emitWorld(this)},__updateLocalBounds(){let a=this.__layout;a.boxChanged&&(this.__.__pathInputed||this.__updatePath(),this.__updateRenderPath(),this.__updateBoxBounds(),a.resized=`inner`),a.localBoxChanged&&(this.__local&&this.__updateLocalBoxBounds(),a.localBoxChanged=void 0,a.strokeSpread&&(a.strokeChanged=!0),a.renderSpread&&(a.renderChanged=!0),this.parent&&this.parent.__layout.boxChange()),a.boxChanged=void 0,a.strokeChanged&&(a.strokeSpread=this.__updateStrokeSpread(),a.strokeSpread?(a.strokeBounds===a.boxBounds&&a.spreadStroke(),this.__updateStrokeBounds(),this.__updateLocalStrokeBounds()):a.spreadStrokeCancel(),a.strokeChanged=void 0,(a.renderSpread||a.strokeSpread!==a.strokeBoxSpread)&&(a.renderChanged=!0),this.parent&&this.parent.__layout.strokeChange(),a.resized=`inner`),a.renderChanged&&(a.renderSpread=this.__updateRenderSpread(),a.renderSpread?(a.renderBounds!==a.boxBounds&&a.renderBounds!==a.strokeBounds||a.spreadRender(),this.__updateRenderBounds(),this.__updateLocalRenderBounds()):a.spreadRenderCancel(),a.renderChanged=void 0,this.parent&&this.parent.__layout.renderChange()),a.resized||=`local`,a.boundsChanged=void 0},__updateLocalBoxBounds(){this.__hasMotionPath&&this.__updateMotionPath(),this.__hasAutoLayout&&this.__updateAutoLayout(),Ca(this.__layout.boxBounds,this.__local,this.__local)},__updateLocalStrokeBounds(){Ca(this.__layout.strokeBounds,this.__localMatrix,this.__layout.localStrokeBounds)},__updateLocalRenderBounds(){Ca(this.__layout.renderBounds,this.__localMatrix,this.__layout.localRenderBounds)},__updateBoxBounds(a,u){let h=this.__layout.boxBounds,xC=this.__;xC.__usePathBox?Pa(xC.path,h):(h.x=0,h.y=0,h.width=xC.width,h.height=xC.height)},__updateAutoLayout(){this.__layout.matrixChanged=!0,this.isBranch?(this.__extraUpdate(),this.__.flow?(this.__layout.boxChanged&&this.__updateFlowLayout(),va(this),ka(this,this),this.__.__autoSide&&this.__updateBoxBounds(!0)):(va(this),ka(this,this))):Ba(this)},__updateNaturalSize(){let{__:a,__layout:u}=this;a.__naturalWidth=u.boxBounds.width,a.__naturalHeight=u.boxBounds.height},__updateStrokeBounds(a){let u=this.__layout;Oa(u.strokeBounds,u.boxBounds,u.strokeBoxSpread)},__updateRenderBounds(a){let u=this.__layout,{renderSpread:h}=u;o(h)&&h<=0?Ta(u.renderBounds,u.strokeBounds):Oa(u.renderBounds,u.boxBounds,h)}},Ra={__render(a,u){if(u.shape)return this.__renderShape(a,u);if(this.__worldOpacity){let h=this.__;if(h.bright&&!u.topRendering)return u.topList.add(this);if(a.setWorld(this.__nowWorld=this.__getNowWorld(u)),a.opacity=u.dimOpacity&&!h.dimskip?h.opacity*u.dimOpacity:h.opacity,this.__.__single){if(h.eraser===`path`)return this.__renderEraser(a,u);let xC=a.getSameCanvas(!0,!0);this.__draw(xC,u,a),io.copyCanvasByWorld(this,a,xC,this.__nowWorld,h.__blendMode,!0),xC.recycle(this.__nowWorld)}else this.__draw(a,u);$t$2.showBounds&&$t$2.drawBounds(this,a,u)}},__renderShape(a,u){this.__worldOpacity&&(a.setWorld(this.__nowWorld=this.__getNowWorld(u)),this.__drawShape(a,u))},__clip(a,u){this.__worldOpacity&&(a.setWorld(this.__nowWorld=this.__getNowWorld(u)),this.__drawRenderPath(a),a.clipUI(this))},__updateWorldOpacity(){this.__worldOpacity=this.__.visible?this.parent?this.parent.__worldOpacity*this.__.opacity:this.__.opacity:0,this.__layout.opacityChanged&&(this.__layout.opacityChanged=!1)}},{excludeRenderBounds:La}=_o,Ea={__updateChange(){let{__layout:a}=this;a.childrenSortChanged&&=(this.__updateSortChildren(),!1),this.__.__checkSingle()},__render(a,u){if(this.__nowWorld=this.__getNowWorld(u),this.__worldOpacity){let h=this.__;if(h.__useDim)if(h.dim)u.dimOpacity=!0===h.dim?.2:h.dim;else{if(h.bright&&!u.topRendering)return u.topList.add(this);h.dimskip&&u.dimOpacity&&(u.dimOpacity=0)}if(h.__single&&!this.isBranchLeaf){if(h.eraser===`path`)return this.__renderEraser(a,u);let xC=a.getSameCanvas(!1,!0);this.__renderBranch(xC,u);let SC=this.__nowWorld;a.opacity=u.dimOpacity?h.opacity*u.dimOpacity:h.opacity,a.copyWorldByReset(xC,SC,SC,h.__blendMode,!0),xC.recycle(SC)}else this.__renderBranch(a,u)}},__renderBranch(a,u){if(this.__hasMask)this.__renderMask(a,u);else{let{children:h}=this;for(let xC=0,SC=h.length;xC<SC;xC++)La(h[xC],u)||h[xC].__render(a,u)}},__clip(a,u){if(this.__worldOpacity){let{children:h}=this;for(let xC=0,SC=h.length;xC<SC;xC++)La(h[xC],u)||h[xC].__clip(a,u)}}},Ia={},{LEAF:Ma,create:Aa}=w,{stintSet:Wa}=_,{toInnerPoint:Na,toOuterPoint:Ya,multiplyParent:Da}=$$1,{toOuterOf:Xa}=Ut$3,{copy:za,move:Fa}=lt$2,{moveLocal:Ua,zoomOfLocal:ja,rotateOfLocal:Ha,skewOfLocal:Ga,moveWorld:Va,zoomOfWorld:qa,rotateOfWorld:Qa,skewOfWorld:Ja,transform:Za,transformWorld:$a,setTransform:Ka,getFlipTransform:th,getLocalOrigin:eh,getRelativeWorld:sh,drop:rh}=io,ih=class{get tag(){return this.__tag}set tag(a){}get __tag(){return`Leaf`}get innerName(){return this.__.name||this.tag+this.innerId}get __DataProcessor(){return f}get __LayoutProcessor(){return Lo}get leaferIsCreated(){return this.leafer&&this.leafer.created}get leaferIsReady(){return this.leafer&&this.leafer.ready}get isLeafer(){return!1}get isBranch(){return!1}get isBranchLeaf(){return!1}get __localMatrix(){return this.__local||this.__layout}get __localBoxBounds(){return this.__local||this.__layout}get worldTransform(){return this.__layout.getTransform(`world`)}get localTransform(){return this.__layout.getTransform(`local`)}get scrollWorldTransform(){return this.updateLayout(),this.__scrollWorld||this.__world}get boxBounds(){return this.getBounds(`box`,`inner`)}get renderBounds(){return this.getBounds(`render`,`inner`)}get worldBoxBounds(){return this.getBounds(`box`)}get worldStrokeBounds(){return this.getBounds(`stroke`)}get worldRenderBounds(){return this.getBounds(`render`)}get worldOpacity(){return this.updateLayout(),this.__worldOpacity}get __worldFlipped(){return this.__world.scaleX<0||this.__world.scaleY<0}get __onlyHitMask(){return this.__hasMask&&!this.__.hitChildren}get __ignoreHitWorld(){return(this.__hasMask||this.__hasEraser)&&this.__.hitChildren}get __inLazyBounds(){return this.leaferIsCreated&&this.leafer.lazyBounds.hit(this.__world)}get pathInputed(){return this.__.__pathInputed}set event(a){this.on(a)}constructor(a){this.innerId=Aa(Ma),this.reset(a),this.__bubbleMap&&this.__emitLifeEvent(Io.CREATED)}reset(a){this.leafer&&this.leafer.forceRender(this.__world),a!==0&&(this.__world={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0,scaleX:1,scaleY:1},a!==null&&(this.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0})),this.__worldOpacity=1,this.__=new this.__DataProcessor(this),this.__layout=new this.__LayoutProcessor(this),this.__level&&this.resetCustom(),a&&(a.__&&(a=a.toJSON()),a.children?this.set(a):Object.assign(this,a))}resetCustom(){this.__hasMask=this.__hasEraser=null,this.forceUpdate()}waitParent(a,u){u&&(a=a.bind(u)),this.parent?a():this.on(Io.ADD,a,`once`)}waitLeafer(a,u){u&&(a=a.bind(u)),this.leafer?a():this.on(Io.MOUNTED,a,`once`)}nextRender(a,u,h){this.leafer?this.leafer.nextRender(a,u,h):this.waitLeafer(()=>this.leafer.nextRender(a,u,h))}removeNextRender(a){this.nextRender(a,null,`off`)}__bindLeafer(a){if(this.isLeafer&&a!==null&&(a=this),this.leafer&&!a&&this.leafer.leafs--,this.leafer=a,a?(a.leafs++,this.__level=this.parent?this.parent.__level+1:1,this.animation&&this.__runAnimation(`in`),this.__bubbleMap&&this.__emitLifeEvent(Io.MOUNTED)):this.__emitLifeEvent(Io.UNMOUNTED),this.isBranch){let{children:u}=this;for(let h=0,xC=u.length;h<xC;h++)u[h].__bindLeafer(a)}}set(a,u){}get(a){}setAttr(a,u){this[a]=u}getAttr(a){return this[a]}getComputedAttr(a){return this.__[a]}toJSON(a){return a&&this.__layout.update(),this.__.__getInputData(null,a)}toString(a){return JSON.stringify(this.toJSON(a))}toSVG(){}__SVG(a){}toHTML(){}__setAttr(a,u){return!0}__getAttr(a){}setProxyAttr(a,u){}getProxyAttr(a){}find(a,u){}findTag(a){}findOne(a,u){}findId(a){}focus(a){}updateState(){}updateLayout(){this.__layout.update()}forceUpdate(a){s(a)?a=`width`:a===`surface`&&(a=`blendMode`);let u=this.__.__getInput(a);this.__[a]=s(u)?null:void 0,this[a]=u}forceRender(a,u){this.forceUpdate(`surface`)}__extraUpdate(){this.leaferIsReady&&this.leafer.layouter.addExtra(this)}__updateWorldMatrix(){}__updateLocalMatrix(){}__updateWorldBounds(){}__updateLocalBounds(){}__updateLocalBoxBounds(){}__updateLocalStrokeBounds(){}__updateLocalRenderBounds(){}__updateBoxBounds(a,u){}__updateContentBounds(){}__updateStrokeBounds(a){}__updateRenderBounds(a){}__updateAutoLayout(){}__updateFlowLayout(){}__updateNaturalSize(){}__updateStrokeSpread(){return 0}__updateRenderSpread(){return 0}__onUpdateSize(){}__updateEraser(a){this.__hasEraser=!!a||this.children.some(a=>a.__.eraser)}__renderEraser(a,u){a.save(),this.__clip(a,u);let{renderBounds:h}=this.__layout;a.clearRect(h.x,h.y,h.width,h.height),a.restore()}__updateMask(a){this.__hasMask=this.children.some(a=>a.__.mask&&a.__.visible&&a.__.opacity)}__renderMask(a,u){}__getNowWorld(a){if(a.matrix){this.__cameraWorld||={};let u=this.__cameraWorld,h=this.__world;return Da(h,a.matrix,u,void 0,h),Xa(this.__layout.renderBounds,u,u),Wa(u,`half`,h.half),Wa(u,`ignorePixelSnap`,h.ignorePixelSnap),u}return this.__world}getClampRenderScale(){let{scaleX:a}=this.__nowWorld||this.__world;return a<0&&(a=-a),a>1?a:1}getRenderScaleData(a,u){let{scaleX:h,scaleY:xC}=Zi$1.patternLocked?this.__world:this.__nowWorld;return a&&(h<0&&(h=-h),xC<0&&(xC=-xC)),(!0===u||u===`zoom-in`&&h>1&&xC>1)&&(h=xC=1),Ia.scaleX=h,Ia.scaleY=xC,Ia}getTransform(a){return this.__layout.getTransform(a||`local`)}getBounds(a,u){return this.__layout.getBounds(a,u)}getLayoutBounds(a,u,h){return this.__layout.getLayoutBounds(a,u,h)}getLayoutPoints(a,u){return this.__layout.getLayoutPoints(a,u)}getWorldBounds(a,u,h){let xC=u?sh(this,u):this.worldTransform,SC=h?a:{};return Xa(a,xC,SC),SC}worldToLocal(a,u,h,xC){this.parent?this.parent.worldToInner(a,u,h,xC):u&&za(u,a)}localToWorld(a,u,h,xC){this.parent?this.parent.innerToWorld(a,u,h,xC):u&&za(u,a)}worldToInner(a,u,h,xC){xC&&(xC.innerToWorld(a,u,h),a=u||a),Na(this.scrollWorldTransform,a,u,h)}innerToWorld(a,u,h,xC){Ya(this.scrollWorldTransform,a,u,h),xC&&xC.worldToInner(u||a,null,h)}getBoxPoint(a,u,h,xC){return this.getBoxPointByInner(this.getInnerPoint(a,u,h,xC),null,null,!0)}getBoxPointByInner(a,u,h,xC){let SC=xC?a:Object.assign({},a),{x:CC,y:wC}=this.boxBounds;return Fa(SC,-CC,-wC),SC}getInnerPoint(a,u,h,xC){let SC=xC?a:{};return this.worldToInner(a,SC,h,u),SC}getInnerPointByBox(a,u,h,xC){let SC=xC?a:Object.assign({},a),{x:CC,y:wC}=this.boxBounds;return Fa(SC,CC,wC),SC}getInnerPointByLocal(a,u,h,xC){return this.getInnerPoint(a,this.parent,h,xC)}getLocalPoint(a,u,h,xC){let SC=xC?a:{};return this.worldToLocal(a,SC,h,u),SC}getLocalPointByInner(a,u,h,xC){return this.getWorldPoint(a,this.parent,h,xC)}getPagePoint(a,u,h,xC){return(this.leafer?this.leafer.zoomLayer:this).getInnerPoint(a,u,h,xC)}getWorldPoint(a,u,h,xC){let SC=xC?a:{};return this.innerToWorld(a,SC,h,u),SC}getWorldPointByBox(a,u,h,xC){return this.getWorldPoint(this.getInnerPointByBox(a,null,null,xC),u,h,!0)}getWorldPointByLocal(a,u,h,xC){let SC=xC?a:{};return this.localToWorld(a,SC,h,u),SC}getWorldPointByPage(a,u,h,xC){return(this.leafer?this.leafer.zoomLayer:this).getWorldPoint(a,u,h,xC)}setTransform(a,u,h){Ka(this,a,u,h)}transform(a,u,h){Za(this,a,u,h)}move(a,u,h){Ua(this,a,u,h)}moveInner(a,u,h){Va(this,a,u,!0,h)}scaleOf(a,u,h,xC,SC){ja(this,eh(this,a),u,h,xC,SC)}rotateOf(a,u,h){Ha(this,eh(this,a),u,h)}skewOf(a,u,h,xC,SC){Ga(this,eh(this,a),u,h,xC,SC)}transformWorld(a,u,h){$a(this,a,u,h)}moveWorld(a,u,h){Va(this,a,u,!1,h)}scaleOfWorld(a,u,h,xC,SC){qa(this,a,u,h,xC,SC)}rotateOfWorld(a,u){Qa(this,a,u)}skewOfWorld(a,u,h,xC,SC){Ja(this,a,u,h,xC,SC)}flip(a,u){Za(this,th(this,a),!1,u)}scaleResize(a,u=a,h){this.scaleX*=a,this.scaleY*=u}__scaleResize(a,u){}resizeWidth(a){}resizeHeight(a){}hit(a,u){return!0}__hitWorld(a){return!0}__hit(a){return!0}__hitFill(a){return!0}__hitStroke(a,u){return!0}__hitPixel(a){return!0}__drawHitPath(a){}__updateHitCanvas(){}__render(a,u){}__drawFast(a,u){}__draw(a,u,h){}__clip(a,u){}__renderShape(a,u){}__drawShape(a,u){}__updateWorldOpacity(){}__updateChange(){}__drawPath(a){}__drawRenderPath(a){}__updatePath(){}__updateRenderPath(){}getMotionPathData(){return ne$2.need(`path`)}getMotionPoint(a){return ne$2.need(`path`)}getMotionTotal(){return 0}__updateMotionPath(){}__runAnimation(a,u){}__updateSortChildren(){}add(a,u){}remove(a,u){this.parent&&this.parent.remove(this,u)}dropTo(a,u,h){rh(this,a,u,h)}on(a,u,h){}off(a,u,h){}on_(a,u,h,xC){}off_(a){}once(a,u,h,xC){}emit(a,u,h){}emitEvent(a,u){}hasEvent(a,u){return!1}static changeAttr(a,u,h){h?this.addAttr(a,u,h):Nn(this.prototype,a,u)}static addAttr(a,u,h,xC){h||=fn,h(u,xC)(this.prototype,a)}__emitLifeEvent(a){this.hasEvent(a)&&this.emitEvent(new Io(a,this,this.parent))}destroy(){this.destroyed||=(this.parent&&this.remove(),this.children&&this.clear(),this.__emitLifeEvent(Io.DESTROY),this.__.destroy(),this.__layout.destroy(),this.destroyEventer(),!0)}};ih=pe$2([jn(pa),jn(ba),jn(Sa),jn(ca),jn(Ra)],ih);var{setListWithFn:nh}=Ut$3,{sort:oh}=yo,{localBoxBounds:ah,localStrokeBounds:hh,localRenderBounds:lh,maskLocalBoxBounds:dh,maskLocalStrokeBounds:uh,maskLocalRenderBounds:ch}=_o,_h=new $t$2(`Branch`),ph=class extends ih{__updateStrokeSpread(){let{children:a}=this;for(let u=0,h=a.length;u<h;u++)if(a[u].__layout.strokeSpread)return 1;return 0}__updateRenderSpread(){let{children:a}=this;for(let u=0,h=a.length;u<h;u++)if(a[u].__layout.renderSpread)return 1;return 0}__updateBoxBounds(a,u){nh(u||this.__layout.boxBounds,this.children,this.__hasMask?dh:ah)}__updateStrokeBounds(a){nh(a||this.__layout.strokeBounds,this.children,this.__hasMask?uh:hh)}__updateRenderBounds(a){nh(a||this.__layout.renderBounds,this.children,this.__hasMask?ch:lh)}__updateSortChildren(){let a,{children:u}=this;if(u.length>1){for(let h=0,xC=u.length;h<xC;h++)u[h].__tempNumber=h,u[h].__.zIndex&&(a=!0);u.sort(oh),this.__layout.affectChildrenSort=a}}add(a,u){if(a===this||a.destroyed)return _h.warn(`add self or destroyed`);let h=s(u);if(!a.__){if(l(a))return a.forEach(a=>{this.add(a,u),h||u++});a=he$2.get(a.tag,a)}a.parent&&a.parent.remove(a),a.parent=this,h?this.children.push(a):this.children.splice(u,0,a),a.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||0)+1);let xC=a.__layout;xC.boxChanged||xC.boxChange(),xC.matrixChanged||xC.matrixChange(),a.__bubbleMap&&a.__emitLifeEvent(Io.ADD),this.leafer&&(a.__bindLeafer(this.leafer),this.leafer.created&&this.__emitChildEvent(Io.ADD,a)),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}addMany(...a){this.add(a)}remove(a,u){a?a.__?a.animationOut?a.__runAnimation(`out`,()=>this.__remove(a,u)):this.__remove(a,u):this.find(a).forEach(a=>this.remove(a,u)):s(a)&&super.remove(null,u)}removeAll(a){let{children:u}=this;u.length&&(this.children=[],this.__preRemove(),this.__.__childBranchNumber=0,u.forEach(u=>{this.__realRemoveChild(u),a&&u.destroy()}))}clear(){this.removeAll(!0)}__remove(a,u){let h=this.children.indexOf(a);h>-1&&(this.children.splice(h,1),a.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||1)-1),this.__preRemove(),this.__realRemoveChild(a),u&&a.destroy())}__preRemove(){this.__hasMask&&this.__updateMask(),this.__hasEraser&&this.__updateEraser(),this.__layout.boxChange(),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}__realRemoveChild(a){a.__emitLifeEvent(Io.REMOVE),a.parent=null,this.leafer&&(a.__bindLeafer(null),this.leafer.created&&(this.__emitChildEvent(Io.REMOVE,a),this.leafer.hitCanvasManager&&this.leafer.hitCanvasManager.clear()))}__emitChildEvent(a,u){let h=new Io(a,u,this);this.hasEvent(a)&&!this.isLeafer&&this.emitEvent(h),this.leafer.emitEvent(h)}};ph=pe$2([jn(Ea)],ph);var fh=class a{get length(){return this.list.length}constructor(a){this.reset(),a&&(l(a)?this.addList(a):this.add(a))}has(a){return a&&!s(this.keys[a.innerId])}indexAt(a){return this.list[a]}indexOf(a){let u=this.keys[a.innerId];return s(u)?-1:u}add(a){let{list:u,keys:h}=this;s(h[a.innerId])&&(u.push(a),h[a.innerId]=u.length-1)}addAt(a,u=0){let{keys:h}=this;if(s(h[a.innerId])){let{list:xC}=this;for(let a=u,SC=xC.length;a<SC;a++)h[xC[a].innerId]++;u===0?xC.unshift(a):(u>xC.length&&(u=xC.length),xC.splice(u,0,a)),h[a.innerId]=u}}addList(a){for(let u=0;u<a.length;u++)this.add(a[u])}remove(a){let{list:u}=this,h;for(let xC=0,SC=u.length;xC<SC;xC++)s(h)?u[xC].innerId===a.innerId&&(h=xC,delete this.keys[a.innerId]):this.keys[u[xC].innerId]=xC-1;s(h)||u.splice(h,1)}sort(a){let{list:u}=this;a?u.sort((a,u)=>u.__level-a.__level):u.sort((a,u)=>a.__level-u.__level)}forEach(a){this.list.forEach(a)}clone(){let u=new a;return u.list=[...this.list],u.keys=Object.assign({},this.keys),u}update(){this.keys={};let{list:a,keys:u}=this;for(let h=0,xC=a.length;h<xC;h++)u[a[h].innerId]=h}reset(){this.list=[],this.keys={}}destroy(){this.reset()}},gh=class{get length(){return this._length}constructor(a){this._length=0,this.reset(),a&&(l(a)?this.addList(a):this.add(a))}has(a){return!s(this.keys[a.innerId])}without(a){return s(this.keys[a.innerId])}sort(a){let{levels:u}=this;a?u.sort((a,u)=>u-a):u.sort((a,u)=>a-u)}addList(a){a.forEach(a=>{this.add(a)})}add(a){let{keys:u,levelMap:h}=this;u[a.innerId]||(u[a.innerId]=1,h[a.__level]?h[a.__level].push(a):(h[a.__level]=[a],this.levels.push(a.__level)),this._length++)}forEach(a){let u;this.levels.forEach(h=>{u=this.levelMap[h];for(let h=0,xC=u.length;h<xC;h++)a(u[h])})}reset(){this.levelMap={},this.keys={},this.levels=[],this._length=0}destroy(){this.levelMap=null}};function xt$2(a,u,h,xC){var SC,CC=arguments.length,wC=CC<3?u:xC===null?xC=Object.getOwnPropertyDescriptor(u,h):xC;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)wC=Reflect.decorate(a,u,h,xC);else for(var TC=a.length-1;TC>=0;TC--)(SC=a[TC])&&(wC=(CC<3?SC(wC):CC>3?SC(u,h,wC):SC(u,h))||wC);return CC>3&&wC&&Object.defineProperty(u,h,wC),wC}function St$2(a){return on(a,a=>an({set(u){this.__setAttr(a,u),u&&(this.__.__useEffect=!0),this.__layout.renderChanged||this.__layout.renderChange()}}))}function mt$2(a){return on(a,a=>an({set(u){this.__setAttr(a,u),this.__layout.boxChanged||this.__layout.boxChange(),this.__updateSize()}}))}function Rt$2(){return(a,u)=>{let h=`_`+u;sn(a,u,{set(a){this.isLeafer&&(this[h]=a)},get(){return this.isApp?this.tree.zoomLayer:this.isLeafer?this[h]||this:this.leafer&&this.leafer.zoomLayer}})}}var Bt$2={},At$2={hasTransparent:function(a){if(!a||a.length===7||a.length===4)return!1;if(a===`transparent`)return!0;let u=a[0];if(u===`#`)switch(a.length){case 5:return a[4]!==`f`&&a[4]!==`F`;case 9:return a[7]!==`f`&&a[7]!==`F`||a[8]!==`f`&&a[8]!==`F`}else if((u===`r`||u===`h`)&&a[3]===`a`){let u=a.lastIndexOf(`,`);if(u>-1)return parseFloat(a.slice(u+1))<1}return!1}},bt$2={number:(a,u)=>d(a)?a.type===`percent`?a.value*u:a.value:a},Ct$2={},Pt$2={},Ft$2={},Wt$2={},Tt$2={},Et$2={apply(){ne$2.need(`filter`)}},It$2={},Dt$2={setStyleName:()=>ne$2.need(`state`),set:()=>ne$2.need(`state`)},Lt$2={list:{},register(a,u){Lt$2.list[a]=u},get:a=>Lt$2.list[a]},{parse:zt$2,objectToCanvasData:Mt$2}=$s,{stintSet:Ot$2}=_,{hasTransparent:Nt$2}=At$2,Vt$2={},Ht$2=$t$2.get(`UIData`),Yt$2=class extends f{get scale(){let{scaleX:a,scaleY:u}=this;return a===u?a:{x:a,y:u}}get __strokeWidth(){return this.__getRealStrokeWidth()}get __maxStrokeWidth(){let a=this;return a.__hasMultiStrokeStyle?Math.max(a.__hasMultiStrokeStyle,a.strokeWidth):a.strokeWidth}get __hasMultiPaint(){let a=this;return a.fill&&this.__useStroke||a.__isFills&&a.fill.length>1||a.__isStrokes&&a.stroke.length>1||a.__useEffect}get __clipAfterFill(){let a=this;return a.cornerRadius||a.innerShadow||a.__pathInputed}get __hasSurface(){return this.fill||this.stroke}get __autoWidth(){return!this._width}get __autoHeight(){return!this._height}get __autoSide(){return!this._width||!this._height}get __autoSize(){return!this._width&&!this._height}setVisible(a){this._visible=a;let{leafer:u}=this.__leaf;u&&(u.watcher.hasVisible=!0)}setWidth(a){a<0?(this._width=-a,this.__leaf.scaleX*=-1,Ht$2.warn(`width < 0, instead -scaleX `,this)):this._width=a}setHeight(a){a<0?(this._height=-a,this.__leaf.scaleY*=-1,Ht$2.warn(`height < 0, instead -scaleY`,this)):this._height=a}setFill(a){this.__naturalWidth&&this.__removeNaturalSize(),i(a)||!a?(Ot$2(this,`__isTransparentFill`,Nt$2(a)),this.__isFills&&this.__removePaint(`fill`,!0),this._fill=a):d(a)&&this.__setPaint(`fill`,a)}setStroke(a){i(a)||!a?(Ot$2(this,`__isTransparentStroke`,Nt$2(a)),this.__isStrokes&&this.__removePaint(`stroke`,!0),this._stroke=a):d(a)&&this.__setPaint(`stroke`,a)}setPath(a){let u=i(a);u||a&&d(a[0])?(this.__setInput(`path`,a),this._path=u?zt$2(a):Mt$2(a)):(this.__input&&this.__removeInput(`path`),this._path=a)}setShadow(a){Ut$2(this,`shadow`,a)}setInnerShadow(a){Ut$2(this,`innerShadow`,a)}setFilter(a){Ut$2(this,`filter`,a)}__computePaint(){let{fill:a,stroke:u}=this.__input;a&&Pt$2.compute(`fill`,this.__leaf),u&&Pt$2.compute(`stroke`,this.__leaf),this.__needComputePaint=void 0}__getRealStrokeWidth(a){let{strokeWidth:u,strokeWidthFixed:h}=this;if(a&&(a.strokeWidth&&(u=a.strokeWidth),s(a.strokeWidthFixed)||(h=a.strokeWidthFixed)),h){let a=this.__leaf.getClampRenderScale();return a>1?u/a:u}return u}__setPaint(a,u){this.__setInput(a,u);let h=this.__leaf.__layout;h.boxChanged||h.boxChange(),l(u)&&!u.length?this.__removePaint(a):a===`fill`?(this.__isFills=!0,this._fill||=Vt$2):(this.__isStrokes=!0,this._stroke||=Vt$2)}__removePaint(a,u){u&&this.__removeInput(a),Ft$2.recycleImage(a,this),a===`fill`?(Ot$2(this,`__isAlphaPixelFill`,void 0),this._fill=this.__isFills=void 0):(Ot$2(this,`__isAlphaPixelStroke`,void 0),Ot$2(this,`__hasMultiStrokeStyle`,void 0),this._stroke=this.__isStrokes=void 0)}};function Ut$2(a,u,h){a.__setInput(u,h),l(h)?(h.some(a=>!1===a.visible)&&(h=h.filter(a=>!1!==a.visible)),h.length||(h=void 0)):h=h&&!1!==h.visible?[h]:void 0,a[`_`+u]=h}var Xt$2=class extends Yt$2{},jt$2=class extends Xt$2{get __boxStroke(){return!this.__pathInputed}get __drawAfterFill(){return this.__single||this.__clipAfterFill}get __clipAfterFill(){let a=this;return a.overflow!==`show`&&a.__leaf.children.length&&(a.__leaf.isOverflow||super.__clipAfterFill)}},Jt$1=class extends Xt$2{__getInputData(a,u){let h=super.__getInputData(a,u);return Pe$2.forEach(a=>delete h[a]),h}},qt$1=class extends jt$2{},Gt$1=class extends Yt$2{get __usePathBox(){return this.points||this.__pathInputed}},$t$1=class extends Yt$2{get __boxStroke(){return!this.__pathInputed}},Kt$2=class extends Yt$2{get __boxStroke(){return!this.__pathInputed}},Qt$1=class extends Gt$1{},Zt$1=class extends Yt$2{},te$1=class extends Yt$2{get __pathInputed(){return 2}},ee$1=class extends Xt$2{},ie$1={thin:100,"extra-light":200,light:300,normal:400,medium:500,"semi-bold":600,bold:700,"extra-bold":800,black:900},se$1=class extends Yt$2{get __useNaturalRatio(){return!1}setFontWeight(a){i(a)?(this.__setInput(`fontWeight`,a),a=ie$1[a]||400):this.__input&&this.__removeInput(`fontWeight`),this._fontWeight=a}setBoxStyle(a){let u=this.__leaf,h=u.__box;if(a){let{boxStyle:xC}=this;if(h)for(let a in xC)h[a]=void 0;else h=u.__box=he$2.get(`Rect`,0);let SC=u.__layout,CC=h.__layout;xC||(h.parent=u,h.__world=u.__world,CC.boxBounds=SC.boxBounds),h.set(a),CC.strokeChanged&&SC.strokeChange()}else h&&(u.__box=h.parent=null,h.destroy());this._boxStyle=a}},oe$1=class extends $t$1{setUrl(a){this.__setImageFill(a),this._url=a}__setImageFill(a){this.fill=a?{type:`image`,mode:`stretch`,url:a}:void 0}__getData(){let a=super.__getData();return a.url&&delete a.fill,a}__getInputData(a,u){let h=super.__getInputData(a,u);return h.url&&delete h.fill,h}},re$1=class extends $t$1{get __isCanvas(){return!0}get __drawAfterFill(){return!0}__getInputData(a,u){let h=super.__getInputData(a,u);return h.url=this.__leaf.canvas.toDataURL(`image/png`),h}},{max:ae$1,add:ne$1}=T,_e$1={__updateStrokeSpread(){let a=0,u=0,h=this.__,{strokeAlign:xC,__maxStrokeWidth:SC}=h,CC=this.__box;if((h.stroke||h.hitStroke===`all`)&&SC&&xC!==`inside`&&(u=a=xC===`center`?SC/2:SC,!h.__boxStroke)){let u=h.__isLinePath?0:10*a,xC=h.strokeCap===`none`?0:SC;a+=Math.max(u,xC)}return h.__useArrow&&(a+=5*SC),CC&&(a=ae$1(a,CC.__layout.strokeSpread=CC.__updateStrokeSpread()),u=Math.max(u,CC.__layout.strokeBoxSpread)),this.__layout.strokeBoxSpread=u,a},__updateRenderSpread(){let a=0,{shadow:u,innerShadow:h,blur:xC,backgroundBlur:SC,filter:CC,renderSpread:wC}=this.__,{strokeSpread:TC}=this.__layout,EC=this.__box;u&&(a=Tt$2.getShadowRenderSpread(this,u)),xC&&(a=ae$1(a,xC)),CC&&(a=ne$1(a,Et$2.getSpread(CC))),wC&&(a=ne$1(a,wC)),TC&&(a=ne$1(a,TC));let DC=a;return h&&(DC=ae$1(DC,Tt$2.getInnerShadowSpread(this,h))),SC&&(DC=ae$1(DC,SC)),this.__layout.renderShapeSpread=DC,EC?ae$1(EC.__updateRenderSpread(),a):a}},{stintSet:he$1}=_,de$1={__updateChange(){let a=this.__;if(a.__useStroke){let u=a.__useStroke=!(!a.stroke||!a.strokeWidth);he$1(this.__world,`half`,u&&a.strokeAlign===`center`&&a.strokeWidth%2),he$1(a,`__fillAfterStroke`,u&&a.strokeAlign===`outside`&&a.fill&&!a.__isTransparentFill)}if(a.__useEffect){let{shadow:u,fill:h,stroke:xC}=a,SC=a.innerShadow||a.blur||a.backgroundBlur||a.filter;he$1(a,`__isFastShadow`,u&&!SC&&u.length<2&&!u[0].spread&&!Tt$2.isTransformShadow(u[0])&&h&&!a.__isTransparentFill&&!(l(h)&&h.length>1)&&(this.useFastShadow||!xC||xC&&a.strokeAlign===`inside`)),a.__useEffect=!(!u&&!SC)}a.__checkSingle(),he$1(a,`__complex`,a.__isFills||a.__isStrokes||a.cornerRadius||a.__useEffect)},__drawFast(a,u){le$1(this,a,u)},__draw(a,u,h){let xC=this.__;if(xC.__complex){xC.__needComputePaint&&xC.__computePaint();let{fill:SC,stroke:CC,__drawAfterFill:wC,__fillAfterStroke:TC,__isFastShadow:EC}=xC;if(this.__drawRenderPath(a),xC.__useEffect&&!EC){let EC=Pt$2.shape(this,a,u);this.__nowWorld=this.__getNowWorld(u);let{shadow:DC,innerShadow:OC,filter:kC}=xC;DC&&Tt$2.shadow(this,a,EC),TC&&(xC.__isStrokes?Pt$2.strokes(CC,this,a,u):Pt$2.stroke(CC,this,a,u)),SC&&(xC.__isFills?Pt$2.fills(SC,this,a,u):Pt$2.fill(SC,this,a,u)),wC&&this.__drawAfterFill(a,u),OC&&Tt$2.innerShadow(this,a,EC),CC&&!TC&&(xC.__isStrokes?Pt$2.strokes(CC,this,a,u):Pt$2.stroke(CC,this,a,u)),kC&&Et$2.apply(kC,this,this.__nowWorld,a,h,EC),EC.worldCanvas&&EC.worldCanvas.recycle(),EC.canvas.recycle()}else{if(TC&&(xC.__isStrokes?Pt$2.strokes(CC,this,a,u):Pt$2.stroke(CC,this,a,u)),EC){let u=xC.shadow[0],{scaleX:h,scaleY:SC}=this.getRenderScaleData(!0,u.scaleFixed);a.save(),a.setWorldShadow(u.x*h,u.y*SC,u.blur*h,At$2.string(u.color))}SC&&(xC.__isFills?Pt$2.fills(SC,this,a,u):Pt$2.fill(SC,this,a,u)),EC&&a.restore(),wC&&this.__drawAfterFill(a,u),CC&&!TC&&(xC.__isStrokes?Pt$2.strokes(CC,this,a,u):Pt$2.stroke(CC,this,a,u))}}else xC.__pathInputed?le$1(this,a,u):this.__drawFast(a,u)},__drawShape(a,u){this.__drawRenderPath(a);let h=this.__,{fill:xC,stroke:SC}=h;xC&&!u.ignoreFill&&(h.__isAlphaPixelFill?Pt$2.fills(xC,this,a,u):Pt$2.fill(`#000000`,this,a,u)),h.__isCanvas&&this.__drawAfterFill(a,u),SC&&!u.ignoreStroke&&(h.__isAlphaPixelStroke?Pt$2.strokes(SC,this,a,u):Pt$2.stroke(`#000000`,this,a,u))},__drawAfterFill(a,u){this.__.__clipAfterFill?(a.save(),a.clipUI(this),this.__drawContent(a,u),a.restore()):this.__drawContent(a,u)}};function le$1(a,u,h){let{fill:xC,stroke:SC,__drawAfterFill:CC,__fillAfterStroke:wC}=a.__;a.__drawRenderPath(u),wC&&Pt$2.stroke(SC,a,u,h),xC&&Pt$2.fill(xC,a,u,h),CC&&a.__drawAfterFill(u,h),SC&&!wC&&Pt$2.stroke(SC,a,u,h)}var pe$1={__drawFast(a,u){let{x:h,y:xC,width:SC,height:CC}=this.__layout.boxBounds,{fill:wC,stroke:TC,__drawAfterFill:EC}=this.__;if(wC&&(a.fillStyle=wC,a.fillRect(h,xC,SC,CC)),EC&&this.__drawAfterFill(a,u),TC){let{strokeAlign:wC,__strokeWidth:EC}=this.__;if(!EC)return;a.setStroke(TC,EC,this.__);let DC=EC/2;switch(wC){case`center`:a.strokeRect(0,0,SC,CC);break;case`inside`:SC-=EC,CC-=EC,SC<0||CC<0?(a.save(),this.__clip(a,u),a.strokeRect(h+DC,xC+DC,SC,CC),a.restore()):a.strokeRect(h+DC,xC+DC,SC,CC);break;case`outside`:a.strokeRect(h-DC,xC-DC,SC+EC,CC+EC)}}}},ue$1,ce$1=ue$1=class extends ih{get app(){return this.leafer&&this.leafer.app}get isFrame(){return!1}set scale(a){N$1.assignScale(this,a)}get scale(){return this.__.scale}get isAutoWidth(){let a=this.__;return a.__autoWidth||a.autoWidth}get isAutoHeight(){let a=this.__;return a.__autoHeight||a.autoHeight}get pen(){let{path:a}=this.__;return Xi$1.set(this.path=a||[]),a||this.__drawPathByBox(Xi$1),Xi$1}reset(a){}set(a,u){a&&Object.assign(this,a)}get(a){return i(a)?this.__.__getInput(a):this.__.__getInputData(a)}createProxyData(){}find(a,u){return ne$2.need(`find`)}findTag(a){return this.find({tag:a})}findOne(a,u){return ne$2.need(`find`)}findId(a){return this.findOne({id:a})}getPath(a,u){this.__layout.update();let h=u?this.__.__pathForRender:this.__.path;return h||(Xi$1.set(h=[]),this.__drawPathByBox(Xi$1)),a?$s.toCanvasData(h,!0):h}getPathString(a,u,h){return $s.stringify(this.getPath(a,u),h)}load(){this.__.__computePaint()}__onUpdateSize(){if(this.__.__input){let a=this.__;!a.lazy||this.__inLazyBounds||It$2.running?a.__computePaint():a.__needComputePaint=!0}}__updateRenderPath(){let a=this.__;a.path?(a.__pathForRender=a.cornerRadius?Yi$1.smooth(a.path,a.cornerRadius,a.cornerSmoothing):a.path,a.__useArrow&&Ct$2.addArrows(this)):a.__pathForRender&&=void 0}__drawRenderPath(a){a.beginPath(),this.__drawPathByData(a,this.__.__pathForRender)}__drawPath(a){a.beginPath(),this.__drawPathByData(a,this.__.path)}__drawPathByData(a,u){u?Kr.drawPathByData(a,u):this.__drawPathByBox(a)}__drawPathByBox(a){let{x:u,y:h,width:xC,height:SC}=this.__layout.boxBounds;if(this.__.cornerRadius){let{cornerRadius:CC}=this.__;a.roundRect(u,h,xC,SC,o(CC)?[CC]:CC)}else a.rect(u,h,xC,SC)}drawImagePlaceholder(a,u,h){Pt$2.fill(this.__.placeholderColor,this,u,h)}animate(a,u,h,xC){return this.set(a),ne$2.need(`animate`)}killAnimate(a,u){}export(a,u){return ne$2.need(`export`)}syncExport(a,u){return ne$2.need(`export`)}clone(a){let u=_.clone(this.toJSON());return a&&Object.assign(u,a),ue$1.one(u)}static one(a,u,h,xC,SC){return he$2.get(a.tag||this.prototype.__tag,a,u,h,xC,SC)}static registerUI(){Hn()(this)}static registerData(a){An(a)(this.prototype)}static setEditConfig(a){}static setEditOuter(a){}static setEditInner(a){}destroy(){this.fill=this.stroke=null,this.__animate&&this.killAnimate(),super.destroy()}};xt$2([An(Yt$2)],ce$1.prototype,`__`,void 0),xt$2([Rt$2()],ce$1.prototype,`zoomLayer`,void 0),xt$2([ln(``)],ce$1.prototype,`id`,void 0),xt$2([ln(``)],ce$1.prototype,`name`,void 0),xt$2([ln(``)],ce$1.prototype,`className`,void 0),xt$2([kn(`pass-through`)],ce$1.prototype,`blendMode`,void 0),xt$2([On(1)],ce$1.prototype,`opacity`,void 0),xt$2([Tn(!0)],ce$1.prototype,`visible`,void 0),xt$2([kn(!1)],ce$1.prototype,`locked`,void 0),xt$2([Cn(!1)],ce$1.prototype,`dim`,void 0),xt$2([Cn(!1)],ce$1.prototype,`dimskip`,void 0),xt$2([Rn(0)],ce$1.prototype,`zIndex`,void 0),xt$2([Ln(!1)],ce$1.prototype,`mask`,void 0),xt$2([En(!1)],ce$1.prototype,`eraser`,void 0),xt$2([dn(0,!0)],ce$1.prototype,`x`,void 0),xt$2([dn(0,!0)],ce$1.prototype,`y`,void 0),xt$2([fn(100,!0)],ce$1.prototype,`width`,void 0),xt$2([fn(100,!0)],ce$1.prototype,`height`,void 0),xt$2([_n(1,!0)],ce$1.prototype,`scaleX`,void 0),xt$2([_n(1,!0)],ce$1.prototype,`scaleY`,void 0),xt$2([pn(0,!0)],ce$1.prototype,`rotation`,void 0),xt$2([pn(0,!0)],ce$1.prototype,`skewX`,void 0),xt$2([pn(0,!0)],ce$1.prototype,`skewY`,void 0),xt$2([dn(0,!0)],ce$1.prototype,`offsetX`,void 0),xt$2([dn(0,!0)],ce$1.prototype,`offsetY`,void 0),xt$2([un(0,!0)],ce$1.prototype,`scrollX`,void 0),xt$2([un(0,!0)],ce$1.prototype,`scrollY`,void 0),xt$2([cn()],ce$1.prototype,`origin`,void 0),xt$2([cn()],ce$1.prototype,`around`,void 0),xt$2([ln(!1)],ce$1.prototype,`lazy`,void 0),xt$2([gn(1)],ce$1.prototype,`pixelRatio`,void 0),xt$2([vn(0)],ce$1.prototype,`renderSpread`,void 0),xt$2([mn()],ce$1.prototype,`path`,void 0),xt$2([xn()],ce$1.prototype,`windingRule`,void 0),xt$2([xn(!0)],ce$1.prototype,`closed`,void 0),xt$2([fn(0)],ce$1.prototype,`padding`,void 0),xt$2([fn(!1)],ce$1.prototype,`lockRatio`,void 0),xt$2([fn()],ce$1.prototype,`widthRange`,void 0),xt$2([fn()],ce$1.prototype,`heightRange`,void 0),xt$2([ln(!1)],ce$1.prototype,`draggable`,void 0),xt$2([ln()],ce$1.prototype,`dragBounds`,void 0),xt$2([ln(`auto`)],ce$1.prototype,`dragBoundsType`,void 0),xt$2([ln(!1)],ce$1.prototype,`editable`,void 0),xt$2([In(!0)],ce$1.prototype,`hittable`,void 0),xt$2([In(`path`)],ce$1.prototype,`hitFill`,void 0),xt$2([Bn(`path`)],ce$1.prototype,`hitStroke`,void 0),xt$2([In(!1)],ce$1.prototype,`hitBox`,void 0),xt$2([In(!0)],ce$1.prototype,`hitChildren`,void 0),xt$2([In(!0)],ce$1.prototype,`hitSelf`,void 0),xt$2([In()],ce$1.prototype,`hitRadius`,void 0),xt$2([Mn(``)],ce$1.prototype,`cursor`,void 0),xt$2([kn()],ce$1.prototype,`fill`,void 0),xt$2([Bn(void 0,!0)],ce$1.prototype,`stroke`,void 0),xt$2([Bn(`inside`)],ce$1.prototype,`strokeAlign`,void 0),xt$2([Bn(1,!0)],ce$1.prototype,`strokeWidth`,void 0),xt$2([Bn(!1)],ce$1.prototype,`strokeWidthFixed`,void 0),xt$2([Bn(`none`)],ce$1.prototype,`strokeCap`,void 0),xt$2([Bn(`miter`)],ce$1.prototype,`strokeJoin`,void 0),xt$2([Bn()],ce$1.prototype,`dashPattern`,void 0),xt$2([Bn(0)],ce$1.prototype,`dashOffset`,void 0),xt$2([Bn(10)],ce$1.prototype,`miterLimit`,void 0),xt$2([xn(0)],ce$1.prototype,`cornerRadius`,void 0),xt$2([xn()],ce$1.prototype,`cornerSmoothing`,void 0),xt$2([St$2()],ce$1.prototype,`shadow`,void 0),xt$2([St$2()],ce$1.prototype,`innerShadow`,void 0),xt$2([St$2()],ce$1.prototype,`blur`,void 0),xt$2([St$2()],ce$1.prototype,`backgroundBlur`,void 0),xt$2([St$2()],ce$1.prototype,`grayscale`,void 0),xt$2([St$2()],ce$1.prototype,`filter`,void 0),xt$2([kn()],ce$1.prototype,`placeholderColor`,void 0),xt$2([ln(100)],ce$1.prototype,`placeholderDelay`,void 0),xt$2([ln({})],ce$1.prototype,`data`,void 0),xt$2([zn(ih.prototype.reset)],ce$1.prototype,`reset`,null),ce$1=ue$1=xt$2([jn(_e$1),jn(de$1),Fn()],ce$1);var ge$1=class extends ce$1{get __tag(){return`Group`}get isBranch(){return!0}reset(a){this.__setBranch(),super.reset(a)}__setBranch(){this.children||=[]}set(a,u){if(a)if(a.children){let{children:h}=a;delete a.children,this.children?this.clear():this.__setBranch(),super.set(a,u),h.forEach(a=>this.add(a)),a.children=h}else super.set(a,u)}toJSON(a){let u=super.toJSON(a);return this.childlessJSON||(u.children=this.children.map(u=>u.toJSON(a))),u}pick(a,u){}addAt(a,u){this.add(a,u)}addAfter(a,u){this.add(a,this.children.indexOf(u)+1)}addBefore(a,u){this.add(a,this.children.indexOf(u))}add(a,u){}addMany(...a){}remove(a,u){}removeAll(a){}clear(){}},ye$1;xt$2([An(Xt$2)],ge$1.prototype,`__`,void 0),xt$2([fn(0)],ge$1.prototype,`width`,void 0),xt$2([fn(0)],ge$1.prototype,`height`,void 0),ge$1=xt$2([jn(ph),Hn()],ge$1);var ve$1=$t$2.get(`Leafer`),fe$1=ye$1=class extends ge$1{get __tag(){return`Leafer`}get isApp(){return!1}get app(){return this.parent||this}get isLeafer(){return!0}get imageReady(){return this.viewReady&&Qi$1.isComplete}get layoutLocked(){return!this.layouter.running}get FPS(){return this.renderer?this.renderer.FPS:60}get cursorPoint(){return this.interaction&&this.interaction.hoverData||{x:this.width/2,y:this.height/2}}get clientBounds(){return this.canvas&&this.canvas.getClientBounds(!0)||U$1()}constructor(a,u){super(u),this.config={start:!0,hittable:!0,smooth:!0,lazySpeard:100},this.leafs=0,this.__eventIds=[],this.__controllers=[],this.__readyWait=[],this.__viewReadyWait=[],this.__viewCompletedWait=[],this.__nextRenderWait=[],this.userConfig=a,a&&(a.view||a.width)&&this.init(a),ye$1.list.add(this)}init(a,u){if(this.canvas)return;let h,{config:xC}=this;this.__setLeafer(this),u&&(this.parentApp=u,this.__bindApp(u),h=u.running),a&&(this.parent=u,this.initType(a.type),this.parent=void 0,_.assign(xC,a));let SC=this.canvas=oe$2.canvas(xC);this.__controllers.push(this.renderer=oe$2.renderer(this,SC,xC),this.watcher=oe$2.watcher(this,xC),this.layouter=oe$2.layouter(this,xC)),this.isApp&&this.__setApp(),this.__checkAutoLayout(),this.view=SC.view,u||(this.selector=oe$2.selector(this),this.interaction=oe$2.interaction(this,SC,this.selector,xC),this.interaction&&(this.__controllers.unshift(this.interaction),this.hitCanvasManager=oe$2.hitCanvasManager()),this.canvasManager=new _e$2,h=xC.start),this.hittable=xC.hittable,this.fill=xC.fill,this.canvasManager.add(SC),this.__listenEvents(),h&&(this.__startTimer=setTimeout(this.start.bind(this))),bo.run(this.__initWait),this.onInit()}onInit(){}initType(a){}set(a,u){this.waitInit(()=>{super.set(a,u)})}start(){clearTimeout(this.__startTimer),!this.running&&this.canvas&&(this.running=!0,this.ready?this.emitLeafer(qo.RESTART):this.emitLeafer(qo.START),this.__controllers.forEach(a=>a.start()),this.isApp||this.renderer.render())}stop(){clearTimeout(this.__startTimer),this.running&&this.canvas&&(this.__controllers.forEach(a=>a.stop()),this.running=!1,this.emitLeafer(qo.STOP))}unlockLayout(){this.layouter.start(),this.updateLayout()}lockLayout(){this.updateLayout(),this.layouter.stop()}resize(a){let u=_.copyAttrs({},a,Pe$2);Object.keys(u).forEach(a=>this[a]=u[a])}forceRender(a,u){let{renderer:h}=this;h&&(h.addBlock(a?new Vt$3(a):this.canvas.bounds),this.viewReady&&(u?h.render():h.update()))}requestRender(a=!1){this.renderer&&this.renderer.update(a)}updateCursor(a){let u=this.interaction;u&&(a?u.setCursor(a):u.updateCursor())}updateLazyBounds(){this.lazyBounds=this.canvas.bounds.clone().spread(this.config.lazySpeard)}__doResize(a){let{canvas:u}=this;if(!u||u.isSameSize(a))return;let h=_.copyAttrs({},this.canvas,Pe$2);u.resize(a),this.updateLazyBounds(),this.__onResize(new jo(a,h))}__onResize(a){this.emitEvent(a),_.copyAttrs(this.__,a,Pe$2),setTimeout(()=>{this.canvasManager&&this.canvasManager.clearRecycled()},0)}__setApp(){}__bindApp(a){this.selector=a.selector,this.interaction=a.interaction,this.canvasManager=a.canvasManager,this.hitCanvasManager=a.hitCanvasManager}__setLeafer(a){this.leafer=a,this.__level=1}__checkAutoLayout(){let{config:a,parentApp:u}=this;u||(a.width&&a.height||(this.autoLayout=new Qt$2(a)),this.canvas.startAutoLayout(this.autoLayout,this.__onResize.bind(this)))}__setAttr(a,u){return this.canvas&&(Pe$2.includes(a)?this.__changeCanvasSize(a,u):a===`fill`?this.__changeFill(u):a===`hittable`?this.parent||(this.canvas.hittable=u):a===`zIndex`?(this.canvas.zIndex=u,setTimeout(()=>this.parent&&this.parent.__updateSortChildren())):a===`mode`&&this.emit(qo.UPDATE_MODE,{mode:u})),super.__setAttr(a,u)}__getAttr(a){return this.canvas&&Pe$2.includes(a)?this.canvas[a]:super.__getAttr(a)}__changeCanvasSize(a,u){let{config:h,canvas:xC}=this,SC=_.copyAttrs({},xC,Pe$2);SC[a]=h[a]=u,h.width&&h.height?xC.stopAutoLayout():this.__checkAutoLayout(),this.__doResize(SC)}__changeFill(a){this.config.fill=a,this.canvas.allowBackgroundColor?this.canvas.backgroundColor=a:this.forceRender()}__onCreated(){this.created=!0}__onReady(){this.ready=!0,this.emitLeafer(qo.BEFORE_READY),this.emitLeafer(qo.READY),this.emitLeafer(qo.AFTER_READY),bo.run(this.__readyWait)}__onViewReady(){this.viewReady||(this.viewReady=!0,this.emitLeafer(qo.VIEW_READY),bo.run(this.__viewReadyWait))}__onLayoutEnd(){let{grow:a,width:u,height:h}=this.config;if(a){let{width:xC,height:SC,pixelRatio:CC}=this,wC=a===`box`?this.worldBoxBounds:this.__world;u||(xC=Math.max(1,wC.x+wC.width)),h||(SC=Math.max(1,wC.y+wC.height)),this.__doResize({width:xC,height:SC,pixelRatio:CC})}this.ready||this.__onReady()}__onNextRender(){if(this.viewReady){bo.run(this.__nextRenderWait);let{imageReady:a}=this;a&&!this.viewCompleted&&this.__checkViewCompleted(),a||(this.viewCompleted=!1,this.requestRender())}else this.requestRender()}__checkViewCompleted(a=!0){this.nextRender(()=>{this.imageReady&&(a&&this.emitLeafer(qo.VIEW_COMPLETED),bo.run(this.__viewCompletedWait),this.viewCompleted=!0)})}__onWatchData(){this.watcher.childrenChanged&&this.interaction&&this.nextRender(()=>this.interaction.updateCursor())}waitInit(a,u){u&&(a=a.bind(u)),this.__initWait||=[],this.canvas?a():this.__initWait.push(a)}waitReady(a,u){u&&(a=a.bind(u)),this.ready?a():this.__readyWait.push(a)}waitViewReady(a,u){u&&(a=a.bind(u)),this.viewReady?a():this.__viewReadyWait.push(a)}waitViewCompleted(a,u){u&&(a=a.bind(u)),this.__viewCompletedWait.push(a),this.viewCompleted?this.__checkViewCompleted(!1):this.running||this.start()}nextRender(a,u,h){u&&(a=a.bind(u));let xC=this.__nextRenderWait;if(h){for(let u=0;u<xC.length;u++)if(xC[u]===a){xC.splice(u,1);break}}else xC.push(a);this.requestRender()}zoom(a,u,h,xC){return ne$2.need(`view`)}getValidMove(a,u,h){return{x:a,y:u}}getValidScale(a){return a}getWorldPointByClient(a,u){return this.interaction&&this.interaction.getLocal(a,u)}getPagePointByClient(a,u){return this.getPagePoint(this.getWorldPointByClient(a,u))}getClientPointByWorld(a){let{x:u,y:h}=this.clientBounds;return{x:u+a.x,y:h+a.y}}updateClientBounds(){this.canvas&&this.canvas.updateClientBounds()}receiveEvent(a){}emitLeafer(a){this.emitEvent(new qo(a,this))}__listenEvents(){let a=se$2.start(`FirstCreate `+this.innerName);this.once([[qo.START,()=>se$2.end(a)],[Go.START,this.updateLazyBounds,this],[Vo.START,this.__onCreated,this],[Vo.END,this.__onViewReady,this]]),this.__eventIds.push(this.on_([[Ho.DATA,this.__onWatchData,this],[Go.END,this.__onLayoutEnd,this],[Vo.NEXT,this.__onNextRender,this]]))}__removeListenEvents(){this.off_(this.__eventIds)}destroy(a){let u=()=>{if(!this.destroyed){ye$1.list.remove(this);try{this.stop(),this.emitLeafer(qo.END),this.__removeListenEvents(),this.__controllers.forEach(a=>!(this.parent&&a===this.interaction)&&a.destroy()),this.__controllers.length=0,this.parent||(this.selector&&this.selector.destroy(),this.hitCanvasManager&&this.hitCanvasManager.destroy(),this.canvasManager&&this.canvasManager.destroy()),this.canvas&&this.canvas.destroy(),this.config.view=this.view=this.parentApp=null,this.userConfig&&(this.userConfig.view=null),super.destroy(),setTimeout(()=>{Zi$1.clearRecycled()},100)}catch(a){ve$1.error(a)}}};a?u():setTimeout(u)}};fe$1.list=new fh,xt$2([An(Jt$1)],fe$1.prototype,`__`,void 0),xt$2([fn()],fe$1.prototype,`pixelRatio`,void 0),xt$2([ln(`normal`)],fe$1.prototype,`mode`,void 0),fe$1=ye$1=xt$2([Hn()],fe$1);var we$1=class extends ce$1{get __tag(){return`Rect`}};xt$2([An($t$1)],we$1.prototype,`__`,void 0),we$1=xt$2([jn(pe$1),Fn(),Hn()],we$1);var{add:xe$1,includes:Se$1,scroll:me$1}=Ut$3,Re$1=we$1.prototype,ke$1=ge$1.prototype,Be$1=class extends ge$1{get __tag(){return`Box`}get isBranchLeaf(){return!0}constructor(a){super(a),this.__layout.renderChanged||this.__layout.renderChange()}__updateStrokeSpread(){return 0}__updateRectRenderSpread(){return 0}__updateRenderSpread(){return this.__updateRectRenderSpread()||-1}__updateRectBoxBounds(){}__updateBoxBounds(a){if(this.children.length&&!this.pathInputed){let a=this.__;if(a.__autoSide){a.__hasSurface&&this.__extraUpdate(),super.__updateBoxBounds();let{boxBounds:u}=this.__layout;a.__autoSize||(a.__autoWidth?(u.width+=u.x,u.x=0,u.height=a.height,u.y=0):(u.height+=u.y,u.y=0,u.width=a.width,u.x=0)),this.__updateNaturalSize()}else this.__updateRectBoxBounds()}else this.__updateRectBoxBounds()}__updateStrokeBounds(){}__updateRenderBounds(){let a,u;if(this.children.length){let h=this.__,xC=this.__layout,{renderBounds:SC,boxBounds:CC}=xC,{overflow:wC}=h,TC=xC.childrenRenderBounds||=U$1();super.__updateRenderBounds(TC),(u=wC.includes(`scroll`))&&(xe$1(TC,CC),me$1(TC,h)),this.__updateRectRenderBounds(),a=!Se$1(CC,TC),a&&wC===`show`&&xe$1(SC,TC)}else this.__updateRectRenderBounds();_.stintSet(this,`isOverflow`,a),this.__checkScroll(u)}__updateRectRenderBounds(){}__checkScroll(a){}__updateRectChange(){}__updateChange(){super.__updateChange(),this.__updateRectChange()}__renderRect(a,u){}__renderGroup(a,u){}__render(a,u){this.__.__drawAfterFill?this.__renderRect(a,u):(this.__renderRect(a,u),this.children.length&&this.__renderGroup(a,u)),this.hasScroller&&this.scroller.__render(a,u)}__drawContent(a,u){this.__renderGroup(a,u),(this.__.__useStroke||this.__.__useEffect)&&(a.setWorld(this.__nowWorld),this.__drawRenderPath(a))}};xt$2([An(jt$2)],Be$1.prototype,`__`,void 0),xt$2([fn(100)],Be$1.prototype,`width`,void 0),xt$2([fn(100)],Be$1.prototype,`height`,void 0),xt$2([ln(!1)],Be$1.prototype,`resizeChildren`,void 0),xt$2([vn(`show`)],Be$1.prototype,`overflow`,void 0),xt$2([zn(Re$1.__updateStrokeSpread)],Be$1.prototype,`__updateStrokeSpread`,null),xt$2([zn(Re$1.__updateRenderSpread)],Be$1.prototype,`__updateRectRenderSpread`,null),xt$2([zn(Re$1.__updateBoxBounds)],Be$1.prototype,`__updateRectBoxBounds`,null),xt$2([zn(Re$1.__updateStrokeBounds)],Be$1.prototype,`__updateStrokeBounds`,null),xt$2([zn(Re$1.__updateRenderBounds)],Be$1.prototype,`__updateRectRenderBounds`,null),xt$2([zn(Re$1.__updateChange)],Be$1.prototype,`__updateRectChange`,null),xt$2([zn(Re$1.__render)],Be$1.prototype,`__renderRect`,null),xt$2([zn(ke$1.__render)],Be$1.prototype,`__renderGroup`,null),Be$1=xt$2([Fn(),Hn()],Be$1);var Ae$1=class extends Be$1{get __tag(){return`Frame`}get isFrame(){return!0}};xt$2([An(qt$1)],Ae$1.prototype,`__`,void 0),xt$2([kn(`#FFFFFF`)],Ae$1.prototype,`fill`,void 0),xt$2([vn(`hide`)],Ae$1.prototype,`overflow`,void 0),Ae$1=xt$2([Hn()],Ae$1);var{moveTo:be$1,closePath:Ce$1,ellipse:Pe$1}=br,Fe$1=class extends ce$1{get __tag(){return`Ellipse`}__updatePath(){let{width:a,height:u,innerRadius:h,startAngle:xC,endAngle:SC}=this.__,CC=a/2,wC=u/2,TC=this.__.path=[];h?(xC||SC?(h<1&&Pe$1(TC,CC,wC,CC*h,wC*h,0,xC,SC,!1),Pe$1(TC,CC,wC,CC,wC,0,SC,xC,!0),h<1&&Ce$1(TC)):(h<1&&(Pe$1(TC,CC,wC,CC*h,wC*h),be$1(TC,a,wC)),Pe$1(TC,CC,wC,CC,wC,0,360,0,!0)),m.ellipseToCurve&&(this.__.path=this.getPath(!0))):xC||SC?(be$1(TC,CC,wC),Pe$1(TC,CC,wC,CC,wC,0,xC,SC,!1),Ce$1(TC)):Pe$1(TC,CC,wC,CC,wC)}};xt$2([An(Kt$2)],Fe$1.prototype,`__`,void 0),xt$2([xn(0)],Fe$1.prototype,`innerRadius`,void 0),xt$2([xn(0)],Fe$1.prototype,`startAngle`,void 0),xt$2([xn(0)],Fe$1.prototype,`endAngle`,void 0),Fe$1=xt$2([Hn()],Fe$1);var{sin:We$1,cos:Te$1,PI:Ee$1}=Math,{moveTo:Ie$1,lineTo:De$1,closePath:Le$1,drawPoints:ze$1}=br,Me$1=class extends ce$1{get __tag(){return`Polygon`}__updatePath(){let a=this.__,u=a.path=[];if(a.points)ze$1(u,a.points,a.curve,!0);else{let{width:h,height:xC,sides:SC}=a,CC=h/2,wC=xC/2;Ie$1(u,CC,0);for(let a=1;a<SC;a++)De$1(u,CC+CC*We$1(2*a*Ee$1/SC),wC-wC*Te$1(2*a*Ee$1/SC));Le$1(u)}}};xt$2([An(Qt$1)],Me$1.prototype,`__`,void 0),xt$2([xn(3)],Me$1.prototype,`sides`,void 0),xt$2([xn()],Me$1.prototype,`points`,void 0),xt$2([xn(0)],Me$1.prototype,`curve`,void 0),Me$1=xt$2([Fn(),Hn()],Me$1);var{sin:Oe$1,cos:Ne$1,PI:Ve$1}=Math,{moveTo:He$1,lineTo:Ye$1,closePath:Ue$1}=br,Xe$1=class extends ce$1{get __tag(){return`Star`}__updatePath(){let{width:a,height:u,corners:h,innerRadius:xC}=this.__,SC=a/2,CC=u/2,wC=this.__.path=[];He$1(wC,SC,0);for(let a=1;a<2*h;a++)Ye$1(wC,SC+(a%2==0?SC:SC*xC)*Oe$1(a*Ve$1/h),CC-(a%2==0?CC:CC*xC)*Ne$1(a*Ve$1/h));Ue$1(wC)}};xt$2([An(Zt$1)],Xe$1.prototype,`__`,void 0),xt$2([xn(5)],Xe$1.prototype,`corners`,void 0),xt$2([xn(.382)],Xe$1.prototype,`innerRadius`,void 0),Xe$1=xt$2([Hn()],Xe$1);var{moveTo:je$1,lineTo:Je,drawPoints:qe$1}=br,{rotate:Ge$1,getAngle:$e$1,getDistance:Ke$1,defaultPoint:Qe$1}=lt$2,Ze$1=class extends ce$1{get __tag(){return`Line`}get toPoint(){let{width:a,rotation:u}=this.__,h=F$1();return a&&(h.x=a),u&&Ge$1(h,u),h}set toPoint(a){this.width=Ke$1(Qe$1,a),this.rotation=$e$1(Qe$1,a),this.height&&=0}__updatePath(){let a=this.__,u=a.path=[];a.points?qe$1(u,a.points,a.curve,a.closed):(je$1(u,0,0),Je(u,this.width,0))}};xt$2([An(Gt$1)],Ze$1.prototype,`__`,void 0),xt$2([wn(`center`)],Ze$1.prototype,`strokeAlign`,void 0),xt$2([fn(0)],Ze$1.prototype,`height`,void 0),xt$2([xn()],Ze$1.prototype,`points`,void 0),xt$2([xn(0)],Ze$1.prototype,`curve`,void 0),xt$2([xn(!1)],Ze$1.prototype,`closed`,void 0),Ze$1=xt$2([Hn()],Ze$1);var ti$1=class extends we$1{get __tag(){return`Image`}get ready(){let{image:a}=this;return a&&a.ready}get image(){let{fill:a}=this.__;return l(a)&&a[0].image}};xt$2([An(oe$1)],ti$1.prototype,`__`,void 0),xt$2([fn(``)],ti$1.prototype,`url`,void 0),ti$1=xt$2([Hn()],ti$1);var ii$1=class extends we$1{get __tag(){return`Canvas`}get context(){return this.canvas.context}get ready(){return!this.url}constructor(a){super(a),this.canvas=oe$2.canvas(this.__),a&&a.url&&this.drawImage(a.url)}drawImage(a){new en({url:a}).load(a=>{this.context.drawImage(a.view,0,0),this.url=void 0,this.paint(),this.emitEvent(new No(No.LOADED,{image:a}))})}draw(a,u,h,xC){let SC=new gt$1(a.worldTransform).invert(),CC=new gt$1;u&&CC.translate(u.x,u.y),h&&(o(h)?CC.scale(h):CC.scale(h.x,h.y)),xC&&CC.rotate(xC),SC.multiplyParent(CC),a.__render(this.canvas,{matrix:SC.withScale()}),this.paint()}paint(){this.forceRender()}__drawContent(a,u){let{width:h,height:xC}=this.__,{view:SC}=this.canvas;a.drawImage(SC,0,0,SC.width,SC.height,0,0,h,xC)}__updateSize(){let{canvas:a}=this;if(a){let{smooth:u,safeResize:h}=this.__;a.resize(this.__,h),a.smooth!==u&&(a.smooth=u)}}destroy(){this.canvas&&=(this.canvas.destroy(),null),super.destroy()}};xt$2([An(re$1)],ii$1.prototype,`__`,void 0),xt$2([mt$2(100)],ii$1.prototype,`width`,void 0),xt$2([mt$2(100)],ii$1.prototype,`height`,void 0),xt$2([mt$2(1)],ii$1.prototype,`pixelRatio`,void 0),xt$2([mt$2(!0)],ii$1.prototype,`smooth`,void 0),xt$2([ln(!1)],ii$1.prototype,`safeResize`,void 0),xt$2([mt$2()],ii$1.prototype,`contextSettings`,void 0),ii$1=xt$2([Hn()],ii$1);var{copyAndSpread:si$1,includes:oi$1,spread:ri$1,setList:ai$1}=Ut$3,{stintSet:ni$1}=_,_i$1=class extends ce$1{get __tag(){return`Text`}get textDrawData(){return this.updateLayout(),this.__.__textDrawData}__updateTextDrawData(){let a=this.__,{lineHeight:u,letterSpacing:h,fontFamily:xC,fontSize:SC,fontWeight:CC,italic:wC,textCase:TC,textOverflow:EC,padding:DC,width:OC,height:kC}=a;a.__lineHeight=bt$2.number(u,SC),a.__letterSpacing=bt$2.number(h,SC),a.__baseLine=a.__lineHeight-(a.__lineHeight-.7*SC)/2,a.__font=`${wC?`italic `:``}${TC===`small-caps`?`small-caps `:``}${CC===`normal`?``:CC+` `}${SC||12}px ${xC||`caption`}`,ni$1(a,`__padding`,DC&&N$1.fourNumber(DC)),ni$1(a,`__clipText`,EC!==`show`&&!a.__autoSize),ni$1(a,`__isCharMode`,OC||kC||a.__letterSpacing||TC!==`none`),a.__textDrawData=Bt$2.getDrawData((a.__isPlacehold=a.placeholder&&a.text===``)?a.placeholder:a.text,this.__)}__updateBoxBounds(){let a=this.__,u=this.__layout,{fontSize:h,italic:xC,padding:SC,__autoWidth:CC,__autoHeight:wC}=a;this.__updateTextDrawData();let{bounds:TC}=a.__textDrawData,EC=u.boxBounds;if(u.contentBounds=TC,a.__lineHeight<h&&ri$1(TC,h/2),CC||wC){if(EC.x=CC?TC.x:0,EC.y=wC?TC.y:0,EC.width=CC?TC.width:a.width,EC.height=wC?TC.height:a.height,SC){let[u,h,xC,SC]=a.__padding;CC&&(EC.x-=SC,EC.width+=h+SC),wC&&(EC.y-=u,EC.height+=xC+u)}this.__updateNaturalSize()}else super.__updateBoxBounds();xC&&(EC.width+=.16*h),_.stintSet(this,`isOverflow`,!oi$1(EC,TC)),this.isOverflow?(ai$1(a.__textBoxBounds={},[EC,TC]),u.renderChanged=!0):a.__textBoxBounds=EC}__updateRenderSpread(){let a=super.__updateRenderSpread();return a||=this.isOverflow?1:0,a}__updateRenderBounds(){let{renderBounds:a,renderSpread:u}=this.__layout;si$1(a,this.__.__textBoxBounds,u),this.__box&&(this.__box.__layout.renderBounds=a)}__updateChange(){super.__updateChange();let a=this.__box;a&&(a.__onUpdateSize(),a.__updateChange())}__drawRenderPath(a){a.font=this.__.__font}__draw(a,u,h){let xC=this.__box;xC&&(xC.__nowWorld=this.__nowWorld,xC.__draw(a,u,h)),this.textEditing&&!u.exporting||super.__draw(a,u,h)}__drawShape(a,u){u.shape&&this.__box&&this.__box.__drawShape(a,u),super.__drawShape(a,u)}destroy(){this.boxStyle&&=null,super.destroy()}};xt$2([An(se$1)],_i$1.prototype,`__`,void 0),xt$2([fn(0)],_i$1.prototype,`width`,void 0),xt$2([fn(0)],_i$1.prototype,`height`,void 0),xt$2([kn()],_i$1.prototype,`boxStyle`,void 0),xt$2([ln(!1)],_i$1.prototype,`resizeFontSize`,void 0),xt$2([kn(`#000000`)],_i$1.prototype,`fill`,void 0),xt$2([wn(`outside`)],_i$1.prototype,`strokeAlign`,void 0),xt$2([In(`all`)],_i$1.prototype,`hitFill`,void 0),xt$2([fn(``)],_i$1.prototype,`text`,void 0),xt$2([fn(``)],_i$1.prototype,`placeholder`,void 0),xt$2([fn(`caption`)],_i$1.prototype,`fontFamily`,void 0),xt$2([fn(12)],_i$1.prototype,`fontSize`,void 0),xt$2([fn(`normal`)],_i$1.prototype,`fontWeight`,void 0),xt$2([fn(!1)],_i$1.prototype,`italic`,void 0),xt$2([fn(`none`)],_i$1.prototype,`textCase`,void 0),xt$2([fn(`none`)],_i$1.prototype,`textDecoration`,void 0),xt$2([fn(0)],_i$1.prototype,`letterSpacing`,void 0),xt$2([fn({type:`percent`,value:1.5})],_i$1.prototype,`lineHeight`,void 0),xt$2([fn(0)],_i$1.prototype,`paraIndent`,void 0),xt$2([fn(0)],_i$1.prototype,`paraSpacing`,void 0),xt$2([fn(`x`)],_i$1.prototype,`writingMode`,void 0),xt$2([fn(`left`)],_i$1.prototype,`textAlign`,void 0),xt$2([fn(`top`)],_i$1.prototype,`verticalAlign`,void 0),xt$2([fn(!0)],_i$1.prototype,`autoSizeAlign`,void 0),xt$2([fn(`normal`)],_i$1.prototype,`textWrap`,void 0),xt$2([fn(`show`)],_i$1.prototype,`textOverflow`,void 0),xt$2([kn(!1)],_i$1.prototype,`textEditing`,void 0),_i$1=xt$2([Hn()],_i$1);var hi$1=class extends ce$1{get __tag(){return`Path`}};xt$2([An(te$1)],hi$1.prototype,`__`,void 0),xt$2([wn(`center`)],hi$1.prototype,`strokeAlign`,void 0),hi$1=xt$2([Hn()],hi$1);var di$1=class extends ge$1{get __tag(){return`Pen`}setStyle(a){let u=this.pathElement=new hi$1(a);return this.pathStyle=a,this.__path=u.path||=[],this.add(u),this}beginPath(){return this}moveTo(a,u){return this}lineTo(a,u){return this}bezierCurveTo(a,u,h,xC,SC,CC){return this}quadraticCurveTo(a,u,h,xC){return this}closePath(){return this}rect(a,u,h,xC){return this}roundRect(a,u,h,xC,SC){return this}ellipse(a,u,h,xC,SC,CC,wC,TC){return this}arc(a,u,h,xC,SC,CC){return this}arcTo(a,u,h,xC,SC){return this}drawEllipse(a,u,h,xC,SC,CC,wC,TC){return this}drawArc(a,u,h,xC,SC,CC){return this}drawPoints(a,u,h){return this}clearPath(){return this}paint(){this.pathElement.__layout.boxChanged||this.pathElement.forceUpdate(`path`)}};xt$2([An(ee$1)],di$1.prototype,`__`,void 0),xt$2([(a,u)=>{sn(a,u,{get(){return this.__path}})}],di$1.prototype,`path`,void 0),di$1=xt$2([jn(Yr,[`set`,`path`,`paint`]),Hn()],di$1);function I(a,u,h,xC){var SC,CC=arguments.length,wC=CC<3?u:xC===null?xC=Object.getOwnPropertyDescriptor(u,h):xC;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)wC=Reflect.decorate(a,u,h,xC);else for(var TC=a.length-1;TC>=0;TC--)(SC=a[TC])&&(wC=(CC<3?SC(wC):CC>3?SC(u,h,wC):SC(u,h))||wC);return CC>3&&wC&&Object.defineProperty(u,h,wC),wC}var F=class extends fe$1{get __tag(){return`App`}get isApp(){return!0}constructor(a,u){super(a,u)}init(a,u){if(super.init(a,u),a){let{ground:u,tree:h,sky:xC,editor:SC}=a;u&&(this.ground=this.addLeafer(u)),(h||SC)&&(this.tree=this.addLeafer(h||{type:a.type||`design`})),(xC||SC)&&(this.sky=this.addLeafer(xC)),SC&&oe$2.editor(SC,this)}}__setApp(){let{canvas:a}=this,{realCanvas:u,view:h}=this.config;u||h===this.canvas.view||!a.parentView?this.realCanvas=!0:a.unrealCanvas(),this.leafer=this,this.watcher.disable(),this.layouter.disable()}__updateLocalBounds(){this.forEach(a=>a.updateLayout()),super.__updateLocalBounds()}start(){super.start(),this.forEach(a=>a.start())}stop(){this.forEach(a=>a.stop()),super.stop()}unlockLayout(){super.unlockLayout(),this.forEach(a=>a.unlockLayout())}lockLayout(){super.lockLayout(),this.forEach(a=>a.lockLayout())}forceRender(a,u){this.forEach(h=>h.forceRender(a,u))}addLeafer(a){let u=new fe$1(a);return this.add(u),u}add(a,u){if(!a.view){if(this.realCanvas&&!this.canvas.bounds)return void setTimeout(()=>this.add(a,u),10);a.init(this.__getChildConfig(a.userConfig),this)}super.add(a,u),s(u)||(a.canvas.childIndex=u),this.__listenChildEvents(a)}forEach(a){this.children.forEach(a)}__onCreated(){this.created=this.children.every(a=>a.created)}__onReady(){this.children.every(a=>a.ready)&&super.__onReady()}__onViewReady(){this.children.every(a=>a.viewReady)&&super.__onViewReady()}__onChildRenderEnd(a){this.renderer.addBlock(a.renderBounds),this.viewReady&&this.renderer.update()}__render(a,u){a.context&&this.forEach(h=>u.matrix?h.__render(a,u):a.copyWorld(h.canvas,u.bounds))}__onResize(a){this.forEach(u=>u.resize(a)),super.__onResize(a)}updateLayout(){this.forEach(a=>a.updateLayout())}__getChildConfig(a){let u=Object.assign({},this.config);return u.hittable=u.realCanvas=void 0,a&&_.assign(u,a),this.autoLayout&&_.copyAttrs(u,this,Pe$2),u.view=this.realCanvas?void 0:this.view,u.fill=void 0,u}__listenChildEvents(a){a.once([[Go.END,this.__onReady,this],[Vo.START,this.__onCreated,this],[Vo.END,this.__onViewReady,this]]),this.realCanvas&&this.__eventIds.push(a.on_(Vo.END,this.__onChildRenderEnd,this))}};F=I([Hn()],F);var N={},K={isHoldSpaceKey:()=>K.isHold(`Space`),isHold:a=>N[a],isHoldKeys:(a,u)=>u?a(u):void 0,setDownCode(a){N[a]||(N[a]=!0)},setUpCode(a){N[a]=!1}},W={LEFT:1,RIGHT:2,MIDDLE:4,defaultLeft(a){a.buttons||=1},left:a=>a.buttons===1,right:a=>a.buttons===2,middle:a=>a.buttons===4},V=class extends Eo{get spaceKey(){return K.isHoldSpaceKey()}get left(){return W.left(this)}get right(){return W.right(this)}get middle(){return W.middle(this)}constructor(a){super(a.type),this.bubbles=!0,Object.assign(this,a)}isHoldKeys(a){return K.isHoldKeys(a,this)}getBoxPoint(a){return(a||this.current).getBoxPoint(this)}getInnerPoint(a){return(a||this.current).getInnerPoint(this)}getLocalPoint(a){return(a||this.current).getLocalPoint(this)}getPagePoint(){return this.current.getPagePoint(this)}getInner(a){return this.getInnerPoint(a)}getLocal(a){return this.getLocalPoint(a)}getPage(){return this.getPagePoint()}static changeName(a,u){ue$2.changeName(a,u)}},{min:U,max:j,abs:X}=Math,{float:Y,sign:z}=N$1,{minX:G,maxX:Z$1,minY:q,maxY:J$1}=Ut$3,Q=new Vt$3,$=new Vt$3,tt$1={limitMove(a,u){let{dragBounds:h,dragBoundsType:xC}=a;h&&et$1.getValidMove(a.__localBoxBounds,et$1.getDragBounds(a),xC,u,!0),et$1.axisMove(a,u)},limitScaleOf(a,u,h,xC){let{dragBounds:SC,dragBoundsType:CC}=a;SC&&et$1.getValidScaleOf(a.__localBoxBounds,et$1.getDragBounds(a),CC,a.getLocalPointByInner(a.getInnerPointByBox(u)),h,xC,!0)},axisMove(a,u){let{draggable:h}=a;h===`x`&&(u.y=0),h===`y`&&(u.x=0)},getDragBounds(a){let{dragBounds:u}=a;return u===`parent`?a.parent.boxBounds:u},isInnerMode:(a,u,h,xC)=>h===`inner`||h===`auto`&&a[xC]>u[xC],getValidMove(a,u,h,xC,SC){let CC=a.x+xC.x,wC=a.y+xC.y,TC=CC+a.width,EC=wC+a.height,DC=u.x+u.width,OC=u.y+u.height;return SC||(xC=Object.assign({},xC)),et$1.isInnerMode(a,u,h,`width`)?CC>u.x?xC.x+=u.x-CC:TC<DC&&(xC.x+=DC-TC):CC<u.x?xC.x+=u.x-CC:TC>DC&&(xC.x+=DC-TC),et$1.isInnerMode(a,u,h,`height`)?wC>u.y?xC.y+=u.y-wC:EC<OC&&(xC.y+=OC-EC):wC<u.y?xC.y+=u.y-wC:EC>OC&&(xC.y+=OC-EC),xC.x=Y(xC.x),xC.y=Y(xC.y),xC},getValidScaleOf(a,u,h,xC,SC,CC,wC){wC||(SC=Object.assign({},SC)),$.set(u),Q.set(a).scaleOf(xC,SC.x,SC.y);let TC=(xC.x-a.x)/a.width,EC=1-TC,DC=(xC.y-a.y)/a.height,OC=1-DC,kC,AC,jC,MC,NC=1,PC=1;return et$1.isInnerMode(a,u,h,`width`)?(SC.x<0&&Q.scaleOf(xC,NC=1/SC.x,1),jC=Y(Q.minX-$.minX),MC=Y($.maxX-Q.maxX),kC=TC&&jC>0?1+jC/(TC*Q.width):1,AC=EC&&MC>0?1+MC/(EC*Q.width):1,NC*=j(kC,AC)):(SC.x<0&&((Y(G(a)-G(u))<=0||Y(Z$1(u)-Z$1(a))<=0)&&Q.scaleOf(xC,NC=1/SC.x,1),Q.unsign()),jC=Y($.minX-Q.minX),MC=Y(Q.maxX-$.maxX),kC=TC&&jC>0?1-jC/(TC*Q.width):1,AC=EC&&MC>0?1-MC/(EC*Q.width):1,NC*=U(kC,AC)),et$1.isInnerMode(a,u,h,`height`)?(SC.y<0&&Q.scaleOf(xC,1,PC=1/SC.y),jC=Y(Q.minY-$.minY),MC=Y($.maxY-Q.maxY),kC=DC&&jC>0?1+jC/(DC*Q.height):1,AC=OC&&MC>0?1+MC/(OC*Q.height):1,PC*=j(kC,AC),CC&&(kC=j(X(NC),X(PC)),NC=z(NC)*kC,PC=z(PC)*kC)):(SC.y<0&&((Y(q(a)-q(u))<=0||Y(J$1(u)-J$1(a))<=0)&&Q.scaleOf(xC,1,PC=1/SC.y),Q.unsign()),jC=Y($.minY-Q.minY),MC=Y(Q.maxY-$.maxY),kC=DC&&jC>0?1-jC/(DC*Q.height):1,AC=OC&&MC>0?1-MC/(OC*Q.height):1,PC*=U(kC,AC)),SC.x*=n(NC)?NC:1,SC.y*=n(PC)?PC:1,SC}},et$1=tt$1,it$1=class extends V{};it$1.POINTER=`pointer`,it$1.BEFORE_DOWN=`pointer.before_down`,it$1.BEFORE_MOVE=`pointer.before_move`,it$1.BEFORE_UP=`pointer.before_up`,it$1.DOWN=`pointer.down`,it$1.MOVE=`pointer.move`,it$1.UP=`pointer.up`,it$1.OVER=`pointer.over`,it$1.OUT=`pointer.out`,it$1.ENTER=`pointer.enter`,it$1.LEAVE=`pointer.leave`,it$1.TAP=`tap`,it$1.DOUBLE_TAP=`double_tap`,it$1.CLICK=`click`,it$1.DOUBLE_CLICK=`double_click`,it$1.LONG_PRESS=`long_press`,it$1.LONG_TAP=`long_tap`,it$1.MENU=`pointer.menu`,it$1.MENU_TAP=`pointer.menu_tap`,it$1=I([Gn()],it$1);var at$1={},nt$1=class extends it$1{static setList(a){this.list=a instanceof fh?a:new fh(a)}static setData(a){this.data=a}static getValidMove(a,u,h,xC=!0){let SC=a.getLocalPoint(h,null,!0);return lt$2.move(SC,u.x-a.x,u.y-a.y),xC&&this.limitMove(a,SC),tt$1.axisMove(a,SC),SC}static limitMove(a,u){tt$1.limitMove(a,u)}getPageMove(a){return this.assignMove(a),this.current.getPagePoint(at$1,null,!0)}getInnerMove(a,u){return a||=this.current,this.assignMove(u),a.getInnerPoint(at$1,null,!0)}getLocalMove(a,u){return a||=this.current,this.assignMove(u),a.getLocalPoint(at$1,null,!0)}getPageTotal(){return this.getPageMove(!0)}getInnerTotal(a){return this.getInnerMove(a,!0)}getLocalTotal(a){return this.getLocalMove(a,!0)}getPageBounds(){let a=this.getPageTotal(),u=this.getPagePoint(),h={};return Ut$3.set(h,u.x-a.x,u.y-a.y,a.x,a.y),Ut$3.unsign(h),h}assignMove(a){at$1.x=a?this.totalX:this.moveX,at$1.y=a?this.totalY:this.moveY}};nt$1.BEFORE_DRAG=`drag.before_drag`,nt$1.START=`drag.start`,nt$1.DRAG=`drag`,nt$1.END=`drag.end`,nt$1.OVER=`drag.over`,nt$1.OUT=`drag.out`,nt$1.ENTER=`drag.enter`,nt$1.LEAVE=`drag.leave`,nt$1=I([Gn()],nt$1);var ht$1=class extends it$1{static setList(a){nt$1.setList(a)}static setData(a){nt$1.setData(a)}};ht$1.DROP=`drop`,ht$1=I([Gn()],ht$1);var ot$1=class extends nt$1{};ot$1.BEFORE_MOVE=`move.before_move`,ot$1.START=`move.start`,ot$1.MOVE=`move`,ot$1.END=`move.end`,ot$1=I([Gn()],ot$1);var dt$1=class extends V{};dt$1=I([Gn()],dt$1);var lt$1=class extends it$1{};lt$1.BEFORE_ROTATE=`rotate.before_rotate`,lt$1.START=`rotate.start`,lt$1.ROTATE=`rotate`,lt$1.END=`rotate.end`,lt$1=I([Gn()],lt$1);var ct$1=class extends nt$1{};ct$1.SWIPE=`swipe`,ct$1.LEFT=`swipe.left`,ct$1.RIGHT=`swipe.right`,ct$1.UP=`swipe.up`,ct$1.DOWN=`swipe.down`,ct$1=I([Gn()],ct$1);var ut$1=class extends it$1{};ut$1.BEFORE_ZOOM=`zoom.before_zoom`,ut$1.START=`zoom.start`,ut$1.ZOOM=`zoom`,ut$1.END=`zoom.end`,ut$1=I([Gn()],ut$1);var pt$1=class extends V{};pt$1.BEFORE_DOWN=`key.before_down`,pt$1.BEFORE_UP=`key.before_up`,pt$1.DOWN=`key.down`,pt$1.HOLD=`key.hold`,pt$1.UP=`key.up`,pt$1=I([Gn()],pt$1);var _t$1={getDragEventData:(a,u,h)=>Object.assign(Object.assign({},h),{x:h.x,y:h.y,moveX:h.x-u.x,moveY:h.y-u.y,totalX:h.x-a.x,totalY:h.y-a.y}),getDropEventData:(a,u,h)=>Object.assign(Object.assign({},a),{list:u,data:h}),getSwipeDirection:a=>a<-45&&a>-135?ct$1.UP:a>45&&a<135?ct$1.DOWN:a<=45&&a>=-45?ct$1.RIGHT:ct$1.LEFT,getSwipeEventData:(a,u,h)=>Object.assign(Object.assign({},h),{moveX:u.moveX,moveY:u.moveY,totalX:h.x-a.x,totalY:h.y-a.y,type:mt$1.getSwipeDirection(lt$2.getAngle(a,h))}),getBase(a){let u=a.button===1?4:a.button;return{altKey:a.altKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,buttons:s(a.buttons)?1:a.buttons===0?u:a.buttons,origin:a}},pathHasEventType(a,u){let{list:h}=a;for(let a=0,xC=h.length;a<xC;a++)if(h[a].hasEvent(u))return!0;return!1},filterPathByEventType(a,u){let h=new fh,{list:xC}=a;for(let a=0,SC=xC.length;a<SC;a++)xC[a].hasEvent(u)&&h.add(xC[a]);return h},pathCanDrag:a=>a&&a.list.some(a=>io.draggable(a)||!a.isLeafer&&a.hasEvent(nt$1.DRAG)),pathHasOutside:a=>a&&a.list.some(a=>a.isOutside)},mt$1=_t$1,vt$1=new fh,{getDragEventData:ft$1,getDropEventData:yt$1,getSwipeEventData:Et$1}=_t$1,Dt$1=class{constructor(a){this.interaction=a}setDragData(a){this.animateWait&&this.dragEndReal(),this.downData=this.interaction.downData,this.dragData=ft$1(a,a,a),this.canAnimate=this.canDragOut=!0}getList(a,u){let{proxy:h}=this.interaction.selector,xC=h&&h.list.length,SC=nt$1.list||this.draggableList||vt$1;return this.dragging&&(xC?a?vt$1:new fh(u?[...h.list,...h.dragHoverExclude]:h.list):SC)}checkDrag(a,u){let{interaction:h}=this;if(this.moving&&a.buttons<1)return this.canAnimate=!1,void h.pointerCancel();!this.moving&&u&&(this.moving=h.canMove(this.downData)||h.isHoldRightKey||h.isMobileDragEmpty)&&(this.dragData.moveType=`drag`,h.emit(ot$1.START,this.dragData)),this.moving||this.dragStart(a,u),this.drag(a)}dragStart(a,u){this.dragging||(this.dragging=u&&W.left(a),this.dragging&&(this.interaction.emit(nt$1.START,this.dragData),this.getDraggableList(this.dragData.path),this.setDragStartPoints(this.realDraggableList=this.getList(!0))))}setDragStartPoints(a){this.dragStartPoints={},a.forEach(a=>this.dragStartPoints[a.innerId]={x:a.x,y:a.y})}getDraggableList(a){let u;for(let h=0,xC=a.length;h<xC;h++)if(u=a.list[h],io.draggable(u)){this.draggableList=new fh(u);break}}drag(a){let{interaction:u,dragData:h,downData:xC}=this,{path:SC,throughPath:CC}=xC;this.dragData=ft$1(xC,h,a),CC&&(this.dragData.throughPath=CC),this.dragData.path=SC,this.moving?(this.dragData.moveType=`drag`,u.emit(ot$1.BEFORE_MOVE,this.dragData),u.emit(ot$1.MOVE,this.dragData)):this.dragging&&(this.dragReal(),u.emit(nt$1.BEFORE_DRAG,this.dragData),u.emit(nt$1.DRAG,this.dragData))}dragReal(a){let{interaction:u}=this,{running:h}=u,xC=this.realDraggableList;if(xC.length&&h){let{totalX:h,totalY:SC}=this.dragData,{dragLimitAnimate:CC}=u.p,wC=!CC||!!a;xC.forEach(u=>{if(u.draggable){let xC=i(u.draggable),TC=nt$1.getValidMove(u,this.dragStartPoints[u.innerId],{x:h,y:SC},wC||xC);CC&&!xC&&a?io.animateMove(u,TC,o(CC)?CC:.3):u.move(TC)}})}}dragOverOrOut(a){let{interaction:u}=this,{dragOverPath:h}=this,{path:xC}=a;this.dragOverPath=xC,h?xC.indexAt(0)!==h.indexAt(0)&&(u.emit(nt$1.OUT,a,h),u.emit(nt$1.OVER,a,xC)):u.emit(nt$1.OVER,a,xC)}dragEnterOrLeave(a){let{interaction:u}=this,{dragEnterPath:h}=this,{path:xC}=a;u.emit(nt$1.LEAVE,a,h,xC),u.emit(nt$1.ENTER,a,xC,h),this.dragEnterPath=xC}dragEnd(a,u){(this.dragging||this.moving)&&(this.checkDragEndAnimate(a,u)||this.dragEndReal(a))}dragEndReal(a){let{interaction:u,downData:h,dragData:xC}=this;a||=xC;let{path:SC,throughPath:CC}=h,wC=ft$1(h,a,a);if(CC&&(wC.throughPath=CC),wC.path=SC,this.moving&&(this.moving=!1,wC.moveType=`drag`,u.emit(ot$1.END,wC)),this.dragging){let SC=this.getList();this.dragging=!1,u.p.dragLimitAnimate&&this.dragReal(!0),u.emit(nt$1.END,wC),this.swipe(a,h,xC,wC),this.drop(a,SC,this.dragEnterPath)}this.autoMoveCancel(),this.dragReset(),this.animate(null,`off`)}swipe(a,u,h,xC){let{interaction:SC}=this;if(lt$2.getDistance(u,a)>SC.config.pointer.swipeDistance){let a=Et$1(u,h,xC);this.interaction.emit(a.type,a)}}drop(a,u,h){let xC=yt$1(a,u,nt$1.data);xC.path=h,this.interaction.emit(ht$1.DROP,xC),this.interaction.emit(nt$1.LEAVE,a,h)}dragReset(){nt$1.list=nt$1.data=this.draggableList=this.dragData=this.downData=this.dragOverPath=this.dragEnterPath=null}checkDragEndAnimate(a,u){return!1}animate(a,u){}checkDragOut(a){}autoMoveOnDragOut(a){}autoMoveCancel(){}destroy(){this.dragReset()}},Pt$1=$t$2.get(`emit`),xt$1=[`move`,`zoom`,`rotate`,`key`];function wt$1(a,u,h,xC,SC){if(xt$1.some(a=>u.startsWith(a))&&a.__.hitChildren&&!Tt$1(a,SC)){let CC;for(let wC=0,TC=a.children.length;wC<TC;wC++)CC=a.children[wC],!h.path.has(CC)&&CC.__.hittable&&Ot$1(CC,u,h,xC,SC)}}function Ot$1(a,u,h,xC,SC){if(a.destroyed)return!1;if(a.__.hitSelf&&!Tt$1(a,SC)&&(Dt$2.updateEventStyle&&!xC&&Dt$2.updateEventStyle(a,u),a.hasEvent(u,xC))){h.phase=xC?1:a===h.target?2:3;let SC=ue$2.get(u,h);if(a.emitEvent(SC,xC),SC.isStop)return!0}return!1}function Tt$1(a,u){return u&&u.has(a)}var Lt$1={wheel:{zoomSpeed:.5,moveSpeed:.5,rotateSpeed:.5,delta:{x:20,y:8}},pointer:{type:`pointer`,snap:!0,hitRadius:5,tapTime:120,longPressTime:800,transformTime:500,hover:!0,dragHover:!0,dragDistance:2,swipeDistance:20},touch:{preventDefault:`auto`},multiTouch:{},move:{autoDistance:2},zoom:{},cursor:!0,keyEvent:!0},{pathHasEventType:Rt$1,pathCanDrag:Ct$1,pathHasOutside:bt$1}=_t$1,Mt$1=class{get dragging(){return this.dragger.dragging}get transforming(){return this.transformer.transforming}get moveMode(){return!0===this.m.drag||this.isHoldSpaceKey||this.isHoldMiddleKey||this.isHoldRightKey&&this.dragger.moving||this.isDragEmpty}get canHover(){return this.p.hover&&!this.config.mobile}get isDragEmpty(){return this.m.dragEmpty&&this.isRootPath(this.hoverData)&&(!this.downData||this.isRootPath(this.downData))}get isMobileDragEmpty(){return this.m.dragEmpty&&!this.canHover&&this.downData&&this.isTreePath(this.downData)}get isHoldMiddleKey(){return this.m.holdMiddleKey&&this.downData&&W.middle(this.downData)}get isHoldRightKey(){return this.m.holdRightKey&&this.downData&&W.right(this.downData)}get isHoldSpaceKey(){return this.m.holdSpaceKey&&K.isHoldSpaceKey()}get m(){return this.config.move}get p(){return this.config.pointer}get hitRadius(){return this.p.hitRadius}constructor(a,u,h,xC){this.config=_.clone(Lt$1),this.tapCount=0,this.downKeyMap={},this.target=a,this.canvas=u,this.selector=h,this.defaultPath=new fh(a),this.createTransformer(),this.dragger=new Dt$1(this),xC&&(this.config=_.default(xC,this.config)),this.__listenEvents()}start(){this.running=!0}stop(){this.running=!1}receive(a){}pointerDown(a,u){a||=this.hoverData,a&&(W.defaultLeft(a),this.updateDownData(a),this.checkPath(a,u),this.downTime=Date.now(),this.emit(it$1.BEFORE_DOWN,a),this.emit(it$1.DOWN,a),W.left(a)&&(this.tapWait(),this.longPressWait(a)),this.waitRightTap=W.right(a),this.dragger.setDragData(a),this.isHoldRightKey||this.updateCursor(a))}pointerMove(a){if(a||=this.hoverData,!a)return;let{downData:u}=this;u&&W.defaultLeft(a),(this.canvas.bounds.hitPoint(a)||u)&&(this.pointerMoveReal(a),u&&this.dragger.checkDragOut(a))}pointerMoveReal(a){if(this.emit(it$1.BEFORE_MOVE,a,this.defaultPath),this.downData){let u=lt$2.getDistance(this.downData,a)>this.p.dragDistance;u&&(this.pointerWaitCancel(),this.waitRightTap=!1),this.dragger.checkDrag(a,u)}this.dragger.moving||(this.updateHoverData(a),this.checkPath(a),this.emit(it$1.MOVE,a),this.pointerHover(a),this.dragging&&(this.dragger.dragOverOrOut(a),this.dragger.dragEnterOrLeave(a))),this.updateCursor(this.downData||a)}pointerUp(a){let{downData:u}=this;if(a||=u,!u)return;W.defaultLeft(a),a.multiTouch=u.multiTouch,this.findPath(a);let h=Object.assign(Object.assign({},a),{path:a.path.clone()});a.path.addList(u.path.list),this.checkPath(a),this.downData=null,this.emit(it$1.BEFORE_UP,a),this.emit(it$1.UP,a),this.touchLeave(a),a.isCancel||(this.tap(a),this.menuTap(a)),this.dragger.dragEnd(a),this.updateCursor(h)}pointerCancel(){let a=Object.assign({},this.dragger.dragData);a.isCancel=!0,this.pointerUp(a)}menu(a){this.findPath(a),this.emit(it$1.MENU,a),this.waitMenuTap=!0,!this.downData&&this.waitRightTap&&this.menuTap(a)}menuTap(a){this.waitRightTap&&this.waitMenuTap&&(this.emit(it$1.MENU_TAP,a),this.waitRightTap=this.waitMenuTap=!1)}createTransformer(){}move(a){}zoom(a){}rotate(a){}transformEnd(){}wheel(a){}multiTouch(a,u){}keyDown(a){if(!this.config.keyEvent)return;this.emit(pt$1.BEFORE_DOWN,a,this.defaultPath);let{code:u}=a;this.downKeyMap[u]||(this.downKeyMap[u]=!0,K.setDownCode(u),this.emit(pt$1.HOLD,a,this.defaultPath),this.moveMode&&(this.cancelHover(),this.updateCursor())),this.emit(pt$1.DOWN,a,this.defaultPath)}keyUp(a){if(!this.config.keyEvent)return;this.emit(pt$1.BEFORE_UP,a,this.defaultPath);let{code:u}=a;this.downKeyMap[u]=!1,K.setUpCode(u),this.emit(pt$1.UP,a,this.defaultPath),this.cursor===`grab`&&this.updateCursor()}pointerHover(a){!this.canHover||this.dragging&&!this.p.dragHover||(a.path||=new fh,this.pointerOverOrOut(a),this.pointerEnterOrLeave(a))}pointerOverOrOut(a){let{path:u}=a,{overPath:h}=this;this.overPath=u,h?u.indexAt(0)!==h.indexAt(0)&&(this.emit(it$1.OUT,a,h),this.emit(it$1.OVER,a,u)):this.emit(it$1.OVER,a,u)}pointerEnterOrLeave(a){let{path:u}=a;this.downData&&!this.moveMode&&(u=u.clone(),this.downData.path.forEach(a=>u.add(a)));let{enterPath:h}=this;this.enterPath=u,this.emit(it$1.LEAVE,a,h,u),this.emit(it$1.ENTER,a,u,h)}touchLeave(a){a.pointerType===`touch`&&this.enterPath&&(this.emit(it$1.LEAVE,a),this.dragger.dragging&&this.emit(ht$1.LEAVE,a))}tap(a){let{pointer:u}=this.config,h=this.longTap(a);if(!u.tapMore&&h||!this.waitTap)return;u.tapMore&&this.emitTap(a);let xC=Date.now()-this.downTime,SC=[it$1.DOUBLE_TAP,it$1.DOUBLE_CLICK].some(u=>Rt$1(a.path,u));xC<u.tapTime+50&&SC?(this.tapCount++,this.tapCount===2?(this.tapWaitCancel(),this.emitDoubleTap(a)):(clearTimeout(this.tapTimer),this.tapTimer=setTimeout(()=>{u.tapMore||(this.tapWaitCancel(),this.emitTap(a))},u.tapTime))):u.tapMore||(this.tapWaitCancel(),this.emitTap(a))}findPath(a,u){let{hitRadius:h,through:xC}=this.p,{bottomList:SC,target:CC}=this;m.backgrounder||a.origin||CC&&CC.updateLayout();let wC=this.selector.getByPoint(a,h,Object.assign({bottomList:SC,name:a.type},u||{through:xC}));return wC.throughPath&&(a.throughPath=wC.throughPath),a.path=wC.path,wC.path}isRootPath(a){return a&&a.path.list[0].isLeafer}isTreePath(a){let u=this.target.app;return!(!u||!u.isApp)&&u.editor&&!a.path.has(u.editor)&&a.path.has(u.tree)&&!a.target.syncEventer}checkPath(a,u){(u||this.moveMode&&!bt$1(a.path))&&(a.path=this.defaultPath)}canMove(a){return a&&(this.moveMode||this.m.drag===`auto`&&!Ct$1(a.path))&&!bt$1(a.path)}isDrag(a){return this.dragger.getList().has(a)}isPress(a){return this.downData&&this.downData.path.has(a)}isHover(a){return this.enterPath&&this.enterPath.has(a)}isFocus(a){return this.focusData===a}cancelHover(){let{hoverData:a}=this;a&&(a.path=this.defaultPath,this.pointerHover(a))}updateDownData(a,u,h){let{downData:xC}=this;!a&&xC&&(a=xC),a&&(this.findPath(a,u),h&&xC&&a.path.addList(xC.path.list),this.downData=a)}updateHoverData(a){a||=this.hoverData,a&&(this.findPath(a,{exclude:this.dragger.getList(!1,!0),name:it$1.MOVE}),this.hoverData=a)}updateCursor(a){if(!this.config.cursor||!this.canHover)return;if(a||=(this.updateHoverData(),this.downData||this.hoverData),this.dragger.moving)return this.setCursor(`grabbing`);if(this.canMove(a))return this.setCursor(this.downData?`grabbing`:`grab`);if(!a)return;let u,h,{path:xC}=a;for(let a=0,SC=xC.length;a<SC&&(u=xC.list[a],h=u.syncEventer&&u.syncEventer.cursor||u.cursor,!h);a++);this.setCursor(h)}setCursor(a){this.cursor=a}getLocal(a,u){let h=this.canvas.getClientBounds(u),xC={x:a.clientX-h.x,y:a.clientY-h.y},{bounds:SC}=this.canvas;return xC.x*=SC.width/h.width,xC.y*=SC.height/h.height,this.p.snap&&lt$2.round(xC),xC}emitTap(a){this.emit(it$1.TAP,a),this.emit(it$1.CLICK,a)}emitDoubleTap(a){this.emit(it$1.DOUBLE_TAP,a),this.emit(it$1.DOUBLE_CLICK,a)}pointerWaitCancel(){this.tapWaitCancel(),this.longPressWaitCancel()}tapWait(){clearTimeout(this.tapTimer),this.waitTap=!0}tapWaitCancel(){this.waitTap&&(clearTimeout(this.tapTimer),this.waitTap=!1,this.tapCount=0)}longPressWait(a){clearTimeout(this.longPressTimer),this.longPressTimer=setTimeout(()=>{this.longPressed=!0,this.emit(it$1.LONG_PRESS,a)},this.p.longPressTime)}longTap(a){let u;return this.longPressed&&(this.emit(it$1.LONG_TAP,a),(Rt$1(a.path,it$1.LONG_TAP)||Rt$1(a.path,it$1.LONG_PRESS))&&(u=!0)),this.longPressWaitCancel(),u}longPressWaitCancel(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressed=!1)}__onResize(){let{dragOut:a}=this.m;this.shrinkCanvasBounds=new Vt$3(this.canvas.bounds),this.shrinkCanvasBounds.spread(-(o(a)?a:2))}__listenEvents(){let{target:a}=this;this.__eventIds=[a.on_(jo.RESIZE,this.__onResize,this)],a.once(qo.READY,()=>this.__onResize())}__removeListenEvents(){this.target.off_(this.__eventIds),this.__eventIds.length=0}emit(a,u,h,xC){this.running&&function(a,u,h,xC){if(!h&&!u.path)return;let SC;u.type=a,h?u=Object.assign(Object.assign({},u),{path:h}):h=u.path,u.target=h.indexAt(0);try{for(let CC=h.length-1;CC>-1;CC--){if(SC=h.list[CC],Ot$1(SC,a,u,!0,xC))return;SC.isApp&&wt$1(SC,a,u,!0,xC)}for(let CC=0,wC=h.length;CC<wC;CC++)if(SC=h.list[CC],SC.isApp&&wt$1(SC,a,u,!1,xC),Ot$1(SC,a,u,!1,xC))return}catch(a){Pt$1.error(a)}}(a,u,h,xC)}destroy(){this.__eventIds.length&&(this.stop(),this.__removeListenEvents(),this.dragger.destroy(),this.transformer&&this.transformer.destroy(),this.downData=this.overPath=this.enterPath=null)}},St$1=class{static set(a,u){this.custom[a]=u}static get(a){return this.custom[a]}};St$1.custom={};var kt$1=class extends _e$2{constructor(){super(...arguments),this.maxTotal=1e3,this.pathList=new fh,this.pixelList=new fh}getPixelType(a,u){return this.__autoClear(),this.pixelList.add(a),oe$2.hitCanvas(u)}getPathType(a){return this.__autoClear(),this.pathList.add(a),oe$2.hitCanvas()}clearImageType(){this.__clearLeafList(this.pixelList)}clearPathType(){this.__clearLeafList(this.pathList)}__clearLeafList(a){a.length&&(a.forEach(a=>{a.__hitCanvas&&=(a.__hitCanvas.destroy(),null)}),a.reset())}__autoClear(){this.pathList.length+this.pixelList.length>this.maxTotal&&this.clear()}clear(){this.clearPathType(),this.clearImageType()}};m.getSelector=function(a){return a.leafer?a.leafer.selector:m.selector||=oe$2.selector()};var{toInnerRadiusPointOf:Bt$1,copy:At$1,setRadius:Ht$1}=lt$2,{hitRadiusPoint:It$1,hitPoint:Ft$1}=Ut$3,Nt$1={},Kt$1={},Wt$1=ih.prototype;Wt$1.hit=function(a,u=0){this.updateLayout(),At$1(Kt$1,a),Ht$1(Kt$1,u);let h=this.__world;return!!(u?It$1(h,Kt$1):Ft$1(h,Kt$1))&&(this.isBranch?m.getSelector(this).hitPoint(Object.assign({},Kt$1),u,{target:this}):this.__hitWorld(Kt$1))},Wt$1.__hitWorld=function(a){let u=this.__;if(!u.hitSelf)return!1;let h=this.__world,xC=this.__layout,SC=h.width<10&&h.height<10;if(u.hitRadius&&(At$1(Nt$1,a),Ht$1(a=Nt$1,u.hitRadius)),Bt$1(a,h,Nt$1),u.hitBox||SC){if(Ut$3.hitRadiusPoint(xC.boxBounds,Nt$1))return!0;if(SC)return!1}return!xC.hitCanvasChanged&&this.__hitCanvas||(this.__updateHitCanvas(),xC.boundsChanged||(xC.hitCanvasChanged=!1)),this.__hit(Nt$1)},Wt$1.__hitFill=function(a){let u=this.__hitCanvas;return u&&u.hitFill(a,this.__.windingRule)},Wt$1.__hitStroke=function(a,u){let h=this.__hitCanvas;return h&&h.hitStroke(a,u)},Wt$1.__hitPixel=function(a){let u=this.__hitCanvas;return u&&u.hitPixel(a,this.__layout.renderBounds,u.hitScale)},Wt$1.__drawHitPath=function(a){a&&this.__drawRenderPath(a)};var Vt$1=new gt$1,Ut$1=ce$1.prototype;Ut$1.__updateHitCanvas=function(){this.__box&&this.__box.__updateHitCanvas();let{hitCanvasManager:a}=this.leafer||this.parent&&this.parent.leafer||{};if(!a)return;let u=this.__,h=(u.__isAlphaPixelFill||u.__isCanvas)&&u.hitFill===`pixel`,xC=u.__isAlphaPixelStroke&&u.hitStroke===`pixel`,SC=h||xC;this.__hitCanvas||=SC?a.getPixelType(this,{contextSettings:{willReadFrequently:!0}}):a.getPathType(this);let CC=this.__hitCanvas;if(SC){let{renderBounds:a}=this.__layout,SC=m.image.hitCanvasSize,wC=CC.hitScale=qt$2.set(0,0,SC,SC).getFitMatrix(a).a,{x:TC,y:EC,width:DC,height:OC}=qt$2.set(a).scale(wC);CC.resize({width:DC,height:OC,pixelRatio:1}),CC.clear(),Zi$1.patternLocked=!0,this.__renderShape(CC,{matrix:Vt$1.setWith(this.__world).scaleWith(1/wC).invertWith().translate(-TC,-EC),ignoreFill:!h,ignoreStroke:!xC}),Zi$1.patternLocked=!1,CC.resetTransform(),u.__isHitPixel=!0}else u.__isHitPixel&&=!1;this.__drawHitPath(CC),CC.setStrokeOptions(u)},Ut$1.__hit=function(a){if(this.__box&&this.__box.__hit(a))return!0;let u=this.__;if(u.__isHitPixel&&this.__hitPixel(a))return!0;let{hitFill:h}=u,xC=(u.fill||u.__isCanvas)&&(h===`path`||h===`pixel`&&!(u.__isAlphaPixelFill||u.__isCanvas))||h===`all`;if(xC&&this.__hitFill(a))return!0;let{hitStroke:SC,__maxStrokeWidth:CC}=u,wC=u.stroke&&(SC===`path`||SC===`pixel`&&!u.__isAlphaPixelStroke)||SC===`all`;if(!xC&&!wC)return!1;let TC=2*a.radiusX,EC=TC;if(wC)switch(u.strokeAlign){case`inside`:if(EC+=2*CC,!xC&&this.__hitFill(a)&&this.__hitStroke(a,EC))return!0;EC=TC;break;case`center`:EC+=CC;break;case`outside`:if(EC+=2*CC,!xC){if(!this.__hitFill(a)&&this.__hitStroke(a,EC))return!0;EC=TC}}return!!EC&&this.__hitStroke(a,EC)};var jt$1=ce$1.prototype,Xt$1=we$1.prototype,Yt$1=Be$1.prototype;Xt$1.__updateHitCanvas=Yt$1.__updateHitCanvas=function(){this.stroke||this.cornerRadius||(this.fill||this.__.__isCanvas)&&this.hitFill===`pixel`||this.hitStroke===`all`?jt$1.__updateHitCanvas.call(this):this.__hitCanvas&&=null},Xt$1.__hitFill=Yt$1.__hitFill=function(a){return this.__hitCanvas?jt$1.__hitFill.call(this,a):Ut$3.hitRadiusPoint(this.__layout.boxBounds,a)},_i$1.prototype.__drawHitPath=function(a){let{__lineHeight:u,fontSize:h,__baseLine:xC,__letterSpacing:SC,__textDrawData:CC}=this.__;a.beginPath(),SC<0?this.__drawPathByBox(a):CC.rows.forEach(SC=>a.rect(SC.x,SC.y-xC,SC.width,u<h?h:u))},ge$1.prototype.pick=function(a,u){return u||=e,this.updateLayout(),m.getSelector(this).getByPoint(a,u.hitRadius||0,Object.assign(Object.assign({},u),{target:this}))};var zt$1=Se$2.prototype;zt$1.hitFill=function(a,u){return u?this.context.isPointInPath(a.x,a.y,u):this.context.isPointInPath(a.x,a.y)},zt$1.hitStroke=function(a,u){return this.strokeWidth=u,this.context.isPointInStroke(a.x,a.y)},zt$1.hitPixel=function(a,u,h=1){let{x:xC,y:SC,radiusX:CC,radiusY:wC}=a;u&&(xC-=u.x,SC-=u.y),qt$2.set(xC-CC,SC-wC,2*CC,2*wC).scale(h).ceil();let{data:TC}=this.context.getImageData(qt$2.x,qt$2.y,qt$2.width||1,qt$2.height||1);for(let a=0,u=TC.length;a<u;a+=4)if(TC[a+3]>0)return!0;return TC[3]>0};var Z=$t$2.get(`LeaferCanvas`),J=class extends Se$2{set zIndex(a){let{style:u}=this.view;u.zIndex=a,this.setAbsolute(this.view)}set childIndex(a){let{view:u,parentView:h}=this;if(u&&h){let xC=h.children[a];xC?(this.setAbsolute(xC),h.insertBefore(u,xC)):h.appendChild(xC)}}init(){let{config:a}=this,u=a.view||a.canvas;u?this.__createViewFrom(u):this.__createView();let{style:h}=this.view;if(h.display||=`block`,this.parentView=this.view.parentElement,this.parentView){let a=this.parentView.style;a.webkitUserSelect=a.userSelect=`none`}m.syncDomFont&&!this.parentView&&(h.display=`none`,document.body&&document.body.appendChild(this.view)),this.__createContext(),this.autoLayout||this.resize(a)}set backgroundColor(a){this.view.style.backgroundColor=a}get backgroundColor(){return this.view.style.backgroundColor}set hittable(a){this.view.style.pointerEvents=a?`auto`:`none`}get hittable(){return this.view.style.pointerEvents!==`none`}__createView(){this.view=document.createElement(`canvas`)}__createViewFrom(a){let u=i(a)?document.getElementById(a):a;if(u)if(u instanceof HTMLCanvasElement)this.view=u;else{let a=u;if(u===window||u===document){let u=document.createElement(`div`),{style:h}=u;h.position=`absolute`,h.top=h.bottom=h.left=h.right=`0px`,document.body.appendChild(u),a=u}this.__createView();let h=this.view;a.hasChildNodes()&&(this.setAbsolute(h),a.style.position||(a.style.position=`relative`)),a.appendChild(h)}else Z.error(`no id: ${a}`),this.__createView()}setAbsolute(a){let{style:u}=a;u.position=`absolute`,u.top=u.left=`0px`}updateViewSize(){let{width:a,height:u,pixelRatio:h}=this,{style:xC}=this.view;if(this.unreal){let{config:a,autoWidthStr:u,autoHeightStr:h}=this;a.width?(s(u)&&(this.autoWidthStr=xC.width||``),xC.width=a.width+`px`):s(u)||(xC.width=u),a.height?(s(h)&&(this.autoHeightStr=xC.height||``),xC.height=a.height+`px`):s(h)||(xC.height=h)}else xC.width=a+`px`,xC.height=u+`px`,this.view.width=Math.ceil(a*h),this.view.height=Math.ceil(u*h)}updateClientBounds(){this.view.parentElement&&(this.clientBounds=this.view.getBoundingClientRect())}startAutoLayout(a,u){if(this.resizeListener=u,a){if(this.autoBounds=a,this.resizeObserver)return;try{this.resizeObserver=new ResizeObserver(a=>{this.updateClientBounds();for(let u of a)this.checkAutoBounds(u.contentRect)});let a=this.parentView;a?(this.resizeObserver.observe(a),this.checkAutoBounds(a.getBoundingClientRect())):(this.checkAutoBounds(this.view),Z.warn(`no parent`))}catch{this.imitateResizeObserver()}this.stopListenPixelRatio()}else this.listenPixelRatio(),this.unreal&&this.updateViewSize()}imitateResizeObserver(){this.autoLayout&&(this.parentView&&this.checkAutoBounds(this.parentView.getBoundingClientRect()),m.requestRender(this.imitateResizeObserver.bind(this)))}listenPixelRatio(){this.windowListener||window.addEventListener(`resize`,this.windowListener=()=>{let a=m.devicePixelRatio;if(!this.config.pixelRatio&&this.pixelRatio!==a){let{width:u,height:h}=this;this.emitResize({width:u,height:h,pixelRatio:a})}})}stopListenPixelRatio(){this.windowListener&&=(window.removeEventListener(`resize`,this.windowListener),null)}checkAutoBounds(a){let u=this.view,{x:h,y:xC,width:SC,height:CC}=this.autoBounds.getBoundsFrom(a),wC={width:SC,height:CC,pixelRatio:this.config.pixelRatio?this.pixelRatio:m.devicePixelRatio};if(!this.isSameSize(wC)){let{style:a}=u;a.marginLeft=h+`px`,a.marginTop=xC+`px`,this.emitResize(wC)}}stopAutoLayout(){this.autoLayout=!1,this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeListener=this.resizeObserver=null}emitResize(a){let u={};_.copyAttrs(u,this,Pe$2),this.resize(a),this.resizeListener&&!s(this.width)&&this.resizeListener(new jo(a,u))}unrealCanvas(){if(!this.unreal&&this.parentView){let a=this.view;a&&a.remove(),this.view=this.parentView,this.unreal=!0}}destroy(){if(this.view){if(this.stopAutoLayout(),this.stopListenPixelRatio(),!this.unreal){let a=this.view;a.parentElement&&a.remove()}super.destroy()}}};Fi$1(CanvasRenderingContext2D.prototype),Fi$1(Path2D.prototype);var{mineType:tt,fileType:et}=Ui$1;function it(a,u){m.origin={createCanvas(a,u){let h=document.createElement(`canvas`);return h.width=a,h.height=u,h},canvasToDataURL:(a,u,h)=>{let xC=tt(u),SC=a.toDataURL(xC,h);return xC===`image/bmp`?SC.replace(`image/png;`,`image/bmp;`):SC},canvasToBolb:(a,u,h)=>new Promise(xC=>a.toBlob(xC,tt(u),h)),canvasSaveAs:(a,u,h)=>{let xC=a.toDataURL(tt(et(u)),h);return m.origin.download(xC,u)},download:(a,u)=>new Promise(h=>{let xC=document.createElement(`a`);xC.href=a,xC.download=u,document.body.appendChild(xC),xC.click(),document.body.removeChild(xC),h()}),loadImage:a=>new Promise((u,h)=>{let xC=new m.origin.Image,{crossOrigin:SC}=m.image;SC&&(xC.setAttribute(`crossOrigin`,SC),xC.crossOrigin=SC),xC.onload=()=>{u(xC)},xC.onerror=a=>{h(a)},xC.src=m.image.getRealURL(a)}),Image,PointerEvent,DragEvent},m.event={stopDefault(a){a.preventDefault()},stopNow(a){a.stopImmediatePropagation()},stop(a){a.stopPropagation()}},m.canvas=oe$2.canvas(),m.conicGradientSupport=!!m.canvas.context.createConicGradient}Object.assign(oe$2,{canvas:(a,u)=>new J(a,u),image:a=>new en(a)}),m.name=`web`,m.isMobile=`ontouchstart`in window,m.requestRender=function(a){window.requestAnimationFrame(a)},sn(m,`devicePixelRatio`,{get:()=>devicePixelRatio});var{userAgent:st}=navigator;st.indexOf(`Firefox`)>-1?(m.conicGradientRotate90=!0,m.intWheelDeltaY=!0,m.syncDomFont=!0):(/iPhone|iPad|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent))&&(m.fullImageShadow=!0),st.indexOf(`Windows`)>-1?(m.os=`Windows`,m.intWheelDeltaY=!0):st.indexOf(`Mac`)>-1?m.os=`Mac`:st.indexOf(`Linux`)>-1&&(m.os=`Linux`);var nt=class{get childrenChanged(){return this.hasAdd||this.hasRemove||this.hasVisible}get updatedList(){if(this.hasRemove){let a=new fh;return this.__updatedList.list.forEach(u=>{u.leafer&&a.add(u)}),a}return this.__updatedList}constructor(a,u){this.totalTimes=0,this.config={},this.__updatedList=new fh,this.target=a,u&&(this.config=_.default(u,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}update(){this.changed=!0,this.running&&this.target.emit(Vo.REQUEST)}__onAttrChange(a){this.__updatedList.add(a.target),this.update()}__onChildEvent(a){a.type===Io.ADD?(this.hasAdd=!0,this.__pushChild(a.child)):(this.hasRemove=!0,this.__updatedList.add(a.parent)),this.update()}__pushChild(a){this.__updatedList.add(a),a.isBranch&&this.__loopChildren(a)}__loopChildren(a){let{children:u}=a;for(let a=0,h=u.length;a<h;a++)this.__pushChild(u[a])}__onRquestData(){this.target.emitEvent(new Ho(Ho.DATA,{updatedList:this.updatedList})),this.__updatedList=new fh,this.totalTimes++,this.changed=this.hasVisible=this.hasRemove=this.hasAdd=!1}__listenEvents(){this.__eventIds=[this.target.on_([[Ao.CHANGE,this.__onAttrChange,this],[[Io.ADD,Io.REMOVE],this.__onChildEvent,this],[Ho.REQUEST,this.__onRquestData,this]])]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&=(this.stop(),this.__removeListenEvents(),this.__updatedList=null)}},{updateAllMatrix:ot,updateBounds:rt,updateChange:at}=io,{pushAllChildBranch:ht,pushAllParent:lt}=yo,{worldBounds:ct}=_o,dt=class{constructor(a){this.updatedBounds=new Vt$3,this.beforeBounds=new Vt$3,this.afterBounds=new Vt$3,l(a)&&(a=new fh(a)),this.updatedList=a}setBefore(){this.beforeBounds.setListWithFn(this.updatedList.list,ct)}setAfter(){this.afterBounds.setListWithFn(this.updatedList.list,ct),this.updatedBounds.setList([this.beforeBounds,this.afterBounds])}merge(a){this.updatedList.addList(a.updatedList.list),this.beforeBounds.add(a.beforeBounds),this.afterBounds.add(a.afterBounds),this.updatedBounds.add(a.updatedBounds)}destroy(){this.updatedList=null}},{updateAllMatrix:ut,updateAllChange:ft}=io,pt=$t$2.get(`Layouter`),gt=class a{constructor(a,u){this.totalTimes=0,this.config={},this.__levelList=new gh,this.target=a,u&&(this.config=_.default(u,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}layout(){if(this.layouting||!this.running)return;let{target:a}=this;this.times=0;try{a.emit(Go.START),this.layoutOnce(),a.emitEvent(new Go(Go.END,this.layoutedBlocks,this.times))}catch(a){pt.error(a)}this.layoutedBlocks=null}layoutAgain(){this.layouting?this.waitAgain=!0:this.layoutOnce()}layoutOnce(){return this.layouting?pt.warn(`layouting`):this.times>3?pt.warn(`layout max times`):(this.times++,this.totalTimes++,this.layouting=!0,this.target.emit(Ho.REQUEST),this.totalTimes>1?this.partLayout():this.fullLayout(),this.layouting=!1,void(this.waitAgain&&(this.waitAgain=!1,this.layoutOnce())))}partLayout(){if(!this.__updatedList?.length)return;let a=se$2.start(`PartLayout`),{target:u,__updatedList:h}=this,{BEFORE:xC,LAYOUT:SC,AFTER:CC}=Go,wC=this.getBlocks(h);wC.forEach(a=>a.setBefore()),u.emitEvent(new Go(xC,wC,this.times)),this.extraBlock=null,h.sort(),function(a,u){let h;a.list.forEach(a=>{h=a.__layout,u.without(a)&&!h.proxyZoom&&(h.matrixChanged?(ot(a,!0),u.add(a),a.isBranch&&ht(a,u),lt(a,u)):h.boundsChanged&&(u.add(a),a.isBranch&&(a.__tempNumber=0),lt(a,u)))})}(h,this.__levelList),function(a){let u,h,xC;a.sort(!0),a.levels.forEach(SC=>{u=a.levelMap[SC];for(let a=0,SC=u.length;a<SC;a++){if(h=u[a],h.isBranch&&h.__tempNumber){xC=h.children;for(let a=0,u=xC.length;a<u;a++)xC[a].isBranch||rt(xC[a])}rt(h)}})}(this.__levelList),function(a){a.list.forEach(at)}(h),this.extraBlock&&wC.push(this.extraBlock),wC.forEach(a=>a.setAfter()),u.emitEvent(new Go(SC,wC,this.times)),u.emitEvent(new Go(CC,wC,this.times)),this.addBlocks(wC),this.__levelList.reset(),this.__updatedList=null,se$2.end(a)}fullLayout(){let u=se$2.start(`FullLayout`),{target:h}=this,{BEFORE:xC,LAYOUT:SC,AFTER:CC}=Go,wC=this.getBlocks(new fh(h));h.emitEvent(new Go(xC,wC,this.times)),a.fullLayout(h),wC.forEach(a=>{a.setAfter()}),h.emitEvent(new Go(SC,wC,this.times)),h.emitEvent(new Go(CC,wC,this.times)),this.addBlocks(wC),se$2.end(u)}static fullLayout(a){ut(a,!0),a.isBranch?yo.updateBounds(a):io.updateBounds(a),ft(a)}addExtra(a){if(!this.__updatedList.has(a)){let{updatedList:u,beforeBounds:h}=this.extraBlock||=new dt([]);u.length?h.add(a.__world):h.set(a.__world),u.add(a)}}createBlock(a){return new dt(a)}getBlocks(a){return[this.createBlock(a)]}addBlocks(a){this.layoutedBlocks?this.layoutedBlocks.push(...a):this.layoutedBlocks=a}__onReceiveWatchData(a){this.__updatedList=a.data.updatedList}__listenEvents(){this.__eventIds=[this.target.on_([[Go.REQUEST,this.layout,this],[Go.AGAIN,this.layoutAgain,this],[Ho.DATA,this.__onReceiveWatchData,this]])]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&=(this.stop(),this.__removeListenEvents(),this.config=null)}},_t=$t$2.get(`Renderer`),wt=class a{get needFill(){return!(this.canvas.allowBackgroundColor||!this.config.fill)}constructor(a,u,h){this.FPS=60,this.totalTimes=0,this.times=0,this.config={usePartRender:!0,maxFPS:120},this.frames=[],this.target=a,this.canvas=u,h&&(this.config=_.default(h,this.config)),this.__listenEvents()}start(){this.running=!0,this.update(!1)}stop(){this.running=!1}update(a=!0){this.changed||=a,this.__requestRender()}requestLayout(){this.target.emit(Go.REQUEST)}checkRender(){if(this.running){let{target:a}=this;a.isApp&&(a.emit(Vo.CHILD_START,a),a.children.forEach(a=>{a.renderer.FPS=this.FPS,a.renderer.checkRender()}),a.emit(Vo.CHILD_END,a)),this.changed&&this.canvas.view&&this.render(),this.target.emit(Vo.NEXT)}}render(a){if(!this.running||!this.canvas.view)return this.update();let{target:u}=this;this.times=0,this.totalBounds=new Vt$3,_t.log(u.innerName,`--->`);try{this.emitRender(Vo.START),this.renderOnce(a),this.emitRender(Vo.END,this.totalBounds),Zi$1.clearRecycled()}catch(a){this.rendering=!1,_t.error(a)}_t.log(`-------------|`)}renderAgain(){this.rendering?this.waitAgain=!0:this.renderOnce()}renderOnce(a){if(this.rendering)return _t.warn(`rendering`);if(this.times>3)return _t.warn(`render max times`);if(this.times++,this.totalTimes++,this.rendering=!0,this.changed=!1,this.renderBounds=new Vt$3,this.renderOptions={},a)this.emitRender(Vo.BEFORE),a();else{if(this.requestLayout(),this.ignore)return void(this.ignore=this.rendering=!1);this.emitRender(Vo.BEFORE),this.config.usePartRender&&this.totalTimes>1?this.partRender():this.fullRender()}this.emitRender(Vo.RENDER,this.renderBounds,this.renderOptions),this.emitRender(Vo.AFTER,this.renderBounds,this.renderOptions),this.updateBlocks=null,this.rendering=!1,this.waitAgain&&(this.waitAgain=!1,this.renderOnce())}partRender(){let{canvas:a,updateBlocks:u}=this;u&&(this.mergeBlocks(),u.forEach(u=>{a.bounds.hit(u)&&!u.isEmpty()&&this.clipRender(u)}))}clipRender(u){let h=se$2.start(`PartRender`),{canvas:xC}=this,SC=u.getIntersect(xC.bounds),CC=new Vt$3(SC);xC.save(),SC.spread(a.clipSpread).ceil(),xC.clearWorld(SC),xC.clipWorld(SC),this.__render(SC,CC),xC.restore(),se$2.end(h)}fullRender(){let a=se$2.start(`FullRender`),{canvas:u}=this;u.save(),u.clear(),this.__render(u.bounds),u.restore(),se$2.end(a)}__render(a,u){let{canvas:h}=this,xC=a.includes(this.target.__world),SC=xC?{includes:xC}:{bounds:a,includes:xC};this.needFill&&h.fillWorld(a,this.config.fill),$t$2.showRepaint&&$t$2.drawRepaint(h,a),m.render(this.target,h,SC),this.renderBounds=u||=a,this.renderOptions=SC,this.totalBounds.isEmpty()?this.totalBounds=u:this.totalBounds.add(u),h.updateRender(u)}addBlock(a){this.updateBlocks||=[],this.updateBlocks.push(a)}mergeBlocks(){let{updateBlocks:a}=this;if(a){let u=new Vt$3;u.setList(a),a.length=0,a.push(u)}}__requestRender(){let a=this.target;if(this.requestTime||!a)return;if(a.parentApp)return a.parentApp.requestRender(!1);this.requestTime=this.frameTime||Date.now();let u=()=>{let a=1e3/((this.frameTime=Date.now())-this.requestTime),{maxFPS:h}=this.config;if(h&&a>h)return m.requestRender(u);let{frames:xC}=this;xC.length>30&&xC.shift(),xC.push(a),this.FPS=Math.round(xC.reduce((a,u)=>a+u,0)/xC.length),this.requestTime=0,this.checkRender()};m.requestRender(u)}__onResize(a){if(!this.canvas.unreal){if(a.bigger||!a.samePixelRatio){let{width:u,height:h}=a.old;if(!new Vt$3(0,0,u,h).includes(this.target.__world)||this.needFill||!a.samePixelRatio)return this.addBlock(this.canvas.bounds),void this.target.forceUpdate(`surface`)}this.addBlock(new Vt$3(0,0,1,1)),this.update()}}__onLayoutEnd(a){a.data&&a.data.map(a=>{let u;a.updatedList&&a.updatedList.list.some(a=>(u=!a.__world.width||!a.__world.height,u&&=(a.isLeafer||_t.tip(a.innerName,`: empty`),!a.isBranch||a.isBranchLeaf),u)),this.addBlock(u?this.canvas.bounds:a.updatedBounds)})}emitRender(a,u,h){this.target.emitEvent(new Vo(a,this.times,u,h))}__listenEvents(){this.__eventIds=[this.target.on_([[Vo.REQUEST,this.update,this],[Go.END,this.__onLayoutEnd,this],[Vo.AGAIN,this.renderAgain,this],[jo.RESIZE,this.__onResize,this]])]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&=(this.stop(),this.__removeListenEvents(),this.config={},this.canvas=null)}};wt.clipSpread=10;var{hitRadiusPoint:mt}=Ut$3,vt=class{constructor(a,u){this.target=a,this.selector=u}getByPoint(a,u,h){u||=0,h||={};let xC=h.through||!1,SC=h.ignoreHittable||!1,CC=h.target||this.target;this.exclude=h.exclude||null,this.point={x:a.x,y:a.y,radiusX:u,radiusY:u},this.findList=new fh(h.findList),h.findList||this.hitBranch(CC.isBranchLeaf?{children:[CC]}:CC);let{list:wC}=this.findList,TC=this.getBestMatchLeaf(wC,h.bottomList,SC,!!h.findList),EC=SC?this.getPath(TC):this.getHitablePath(TC);return this.clear(),xC?{path:EC,target:TC,throughPath:wC.length?this.getThroughPath(wC):EC}:{path:EC,target:TC}}hitPoint(a,u,h){return!!this.getByPoint(a,u,h).target}getBestMatchLeaf(a,u,h,xC){let SC=this.findList=new fh;if(a.length){let u,{x:xC,y:CC}=this.point,wC={x:xC,y:CC,radiusX:0,radiusY:0};for(let xC=0,CC=a.length;xC<CC;xC++)if(u=a[xC],(h||io.worldHittable(u))&&(this.hitChild(u,wC),SC.length)){if(u.isBranchLeaf&&a.some(a=>a!==u&&io.hasParent(a,u))){SC.reset();break}return SC.list[0]}}if(u){for(let a=0,h=u.length;a<h;a++)if(this.hitChild(u[a].target,this.point,u[a].proxy),SC.length)return SC.list[0]}return xC?null:h?a[0]:a.find(a=>io.worldHittable(a))}getPath(a){let u=new fh,h=[],{target:xC}=this;for(;a&&(a.syncEventer&&h.push(a.syncEventer),u.add(a),(a=a.parent)!==xC););return h.length&&h.forEach(a=>{for(;a&&(a.__.hittable&&u.add(a),(a=a.parent)!==xC););}),xC&&u.add(xC),u}getHitablePath(a){let u=this.getPath(a&&a.hittable?a:null),h,xC=new fh;for(let a=u.list.length-1;a>-1&&(h=u.list[a],h.__.hittable)&&(xC.addAt(h,0),h.__.hitChildren&&(!h.isLeafer||h.mode!==`draw`));a--);return xC}getThroughPath(a){let u=new fh,h=[];for(let u=a.length-1;u>-1;u--)h.push(this.getPath(a[u]));let xC,SC,CC;for(let a=0,wC=h.length;a<wC;a++){xC=h[a],SC=h[a+1];for(let a=0,h=xC.length;a<h&&(CC=xC.list[a],!SC||!SC.has(CC));a++)u.add(CC)}return u}hitBranch(a){this.eachFind(a.children,a.__onlyHitMask)}eachFind(a,u){let h,xC,{point:SC}=this;for(let CC=a.length-1;CC>-1;CC--)if(h=a[CC],h.__.visible&&(!u||h.__.mask))if(xC=!!h.__.hitRadius||mt(h.__world,SC),h.isBranch){if(xC||h.__ignoreHitWorld){if(h.isBranchLeaf&&h.__.__clipAfterFill&&!h.__hitWorld(SC))continue;h.topChildren&&this.eachFind(h.topChildren,!1),this.eachFind(h.children,h.__onlyHitMask),h.isBranchLeaf&&this.hitChild(h,SC)}}else xC&&this.hitChild(h,SC)}hitChild(a,u,h){if((!this.exclude||!this.exclude.has(a))&&a.__hitWorld(u)){let{parent:xC}=a;if(xC&&xC.__hasMask&&!a.__.mask){let h,SC=[],{children:CC}=xC;for(let xC=0,wC=CC.length;xC<wC;xC++)if(h=CC[xC],h.__.mask&&SC.push(h),h===a){if(SC&&!SC.every(a=>a.__hitWorld(u)))return;break}}this.findList.add(h||a)}}clear(){this.point=null,this.findList=null,this.exclude=null}destroy(){this.clear()}},yt=class{constructor(a,u){this.config={},u&&(this.config=_.default(u,this.config)),this.picker=new vt(this.target=a,this),this.finder=oe$2.finder&&oe$2.finder()}getByPoint(a,u,h){let{target:xC,picker:SC}=this;return m.backgrounder&&xC&&xC.updateLayout(),SC.getByPoint(a,u,h)}hitPoint(a,u,h){return this.picker.hitPoint(a,u,h)}getBy(a,u,h,xC){return this.finder?this.finder.getBy(a,u,h,xC):ne$2.need(`find`)}destroy(){this.picker.destroy(),this.finder&&this.finder.destroy()}};Object.assign(oe$2,{watcher:(a,u)=>new nt(a,u),layouter:(a,u)=>new gt(a,u),renderer:(a,u,h)=>new wt(a,u,h),selector:(a,u)=>new yt(a,u)}),m.layout=gt.fullLayout,m.render=function(a,u,h){let xC=Object.assign(Object.assign({},h),{topRendering:!0});h.topList=new fh,a.__render(u,h),h.topList.length&&h.topList.forEach(a=>a.__render(u,xC))};var xt={convert(a,u){let h=_t$1.getBase(a),{x:xC,y:SC}=u,CC=Object.assign(Object.assign({},h),{x:xC,y:SC,width:a.width,height:a.height,pointerType:a.pointerType,pressure:a.pressure});return CC.pointerType===`pen`&&(CC.tangentialPressure=a.tangentialPressure,CC.tiltX=a.tiltX,CC.tiltY=a.tiltY,CC.twist=a.twist),CC},convertMouse(a,u){let h=_t$1.getBase(a),{x:xC,y:SC}=u;return Object.assign(Object.assign({},h),{x:xC,y:SC,width:1,height:1,pointerType:`mouse`,pressure:.5})},convertTouch(a,u){let h=xt.getTouch(a),xC=_t$1.getBase(a),{x:SC,y:CC}=u;return Object.assign(Object.assign({},xC),{x:SC,y:CC,width:1,height:1,pointerType:`touch`,multiTouch:a.touches.length>1,pressure:h.force})},getTouch:a=>a.targetTouches[0]||a.changedTouches[0]},bt={convert(a){let u=_t$1.getBase(a);return Object.assign(Object.assign({},u),{code:a.code,key:a.key})}},{pathCanDrag:St}=_t$1,kt=class extends Mt$1{get notPointer(){let{p:a}=this;return a.type!==`pointer`||a.touch||this.useMultiTouch}get notTouch(){let{p:a}=this;return a.type===`mouse`||this.usePointer}get notMouse(){return this.usePointer||this.useTouch}__listenEvents(){super.__listenEvents();let a=this.view=this.canvas.view;this.viewEvents={pointerdown:this.onPointerDown,mousedown:this.onMouseDown,touchstart:this.onTouchStart,pointerleave:this.onPointerLeave,contextmenu:this.onContextMenu,wheel:this.onWheel,gesturestart:this.onGesturestart,gesturechange:this.onGesturechange,gestureend:this.onGestureend},this.windowEvents={pointermove:this.onPointerMove,pointerup:this.onPointerUp,pointercancel:this.onPointerCancel,mousemove:this.onMouseMove,mouseup:this.onMouseUp,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchCancel,keydown:this.onKeyDown,keyup:this.onKeyUp,scroll:this.onScroll};let{viewEvents:u,windowEvents:h}=this;for(let h in u)u[h]=u[h].bind(this),a.addEventListener(h,u[h]);for(let a in h)h[a]=h[a].bind(this),window.addEventListener(a,h[a])}__removeListenEvents(){super.__removeListenEvents();let{viewEvents:a,windowEvents:u}=this;for(let u in a)this.view.removeEventListener(u,a[u]),this.viewEvents={};for(let a in u)window.removeEventListener(a,u[a]),this.windowEvents={}}getTouches(a){let u=[];for(let h=0,xC=a.length;h<xC;h++)u.push(a[h]);return u}preventDefaultPointer(a){let{pointer:u}=this.config;u.preventDefault&&a.preventDefault()}preventDefaultWheel(a){let{wheel:u}=this.config;u.preventDefault&&a.preventDefault()}preventWindowPointer(a){return!this.downData&&a.target!==this.view}onKeyDown(a){this.keyDown(bt.convert(a))}onKeyUp(a){this.keyUp(bt.convert(a))}onContextMenu(a){this.config.pointer.preventDefaultMenu&&a.preventDefault(),this.menu(xt.convert(a,this.getLocal(a)))}onScroll(){this.canvas.updateClientBounds()}onPointerDown(a){this.preventDefaultPointer(a),this.notPointer||(this.usePointer||=!0,this.pointerDown(xt.convert(a,this.getLocal(a))))}onPointerMove(a,u){if(this.notPointer||this.preventWindowPointer(a))return;this.usePointer||=!0;let h=xt.convert(a,this.getLocal(a,!0));u?this.pointerHover(h):this.pointerMove(h)}onPointerLeave(a){this.onPointerMove(a,!0)}onPointerUp(a){this.downData&&this.preventDefaultPointer(a),this.notPointer||this.preventWindowPointer(a)||this.pointerUp(xt.convert(a,this.getLocal(a)))}onPointerCancel(){this.useMultiTouch||this.pointerCancel()}onMouseDown(a){this.preventDefaultPointer(a),this.notMouse||this.pointerDown(xt.convertMouse(a,this.getLocal(a)))}onMouseMove(a){this.notMouse||this.preventWindowPointer(a)||this.pointerMove(xt.convertMouse(a,this.getLocal(a,!0)))}onMouseUp(a){this.downData&&this.preventDefaultPointer(a),this.notMouse||this.preventWindowPointer(a)||this.pointerUp(xt.convertMouse(a,this.getLocal(a)))}onMouseCancel(){this.notMouse||this.pointerCancel()}onTouchStart(a){let u=xt.getTouch(a),h=this.getLocal(u,!0),{preventDefault:xC}=this.config.touch;(!0===xC||xC===`auto`&&St(this.findPath(h)))&&a.preventDefault(),this.multiTouchStart(a),this.notTouch||(this.touchTimer&&=(window.clearTimeout(this.touchTimer),0),this.useTouch=!0,this.pointerDown(xt.convertTouch(a,h)))}onTouchMove(a){if(this.multiTouchMove(a),this.notTouch||this.preventWindowPointer(a))return;let u=xt.getTouch(a);this.pointerMove(xt.convertTouch(a,this.getLocal(u)))}onTouchEnd(a){if(this.multiTouchEnd(),this.notTouch||this.preventWindowPointer(a))return;this.touchTimer&&clearTimeout(this.touchTimer),this.touchTimer=setTimeout(()=>{this.useTouch=!1},500);let u=xt.getTouch(a);this.pointerUp(xt.convertTouch(a,this.getLocal(u)))}onTouchCancel(){this.notTouch||this.pointerCancel()}multiTouchStart(a){this.useMultiTouch=a.touches.length>1,this.touches=this.useMultiTouch?this.getTouches(a.touches):void 0,this.useMultiTouch&&this.pointerCancel()}multiTouchMove(a){if(this.useMultiTouch&&a.touches.length>1){let u=this.getTouches(a.touches),h=this.getKeepTouchList(this.touches,u);h.length>1&&(this.multiTouch(_t$1.getBase(a),h),this.touches=u)}}multiTouchEnd(){this.touches=null,this.useMultiTouch=!1,this.transformEnd()}getKeepTouchList(a,u){let h,xC=[];return a.forEach(a=>{h=u.find(u=>u.identifier===a.identifier),h&&xC.push({from:this.getLocal(a),to:this.getLocal(h)})}),xC}getLocalTouchs(a){return a.map(a=>this.getLocal(a))}onWheel(a){this.preventDefaultWheel(a),this.wheel(Object.assign(Object.assign(Object.assign({},_t$1.getBase(a)),this.getLocal(a)),{deltaX:a.deltaX,deltaY:a.deltaY}))}onGesturestart(a){this.useMultiTouch||(this.preventDefaultWheel(a),this.lastGestureScale=1,this.lastGestureRotation=0)}onGesturechange(a){if(this.useMultiTouch)return;this.preventDefaultWheel(a);let u=_t$1.getBase(a);Object.assign(u,this.getLocal(a));let h=a.scale/this.lastGestureScale,xC=(a.rotation-this.lastGestureRotation)/Math.PI*180*(N$1.within(this.config.wheel.rotateSpeed,0,1)/4+.1);this.zoom(Object.assign(Object.assign({},u),{scale:h*h})),this.rotate(Object.assign(Object.assign({},u),{rotation:xC})),this.lastGestureScale=a.scale,this.lastGestureRotation=a.rotation}onGestureend(a){this.useMultiTouch||(this.preventDefaultWheel(a),this.transformEnd())}setCursor(a){super.setCursor(a);let u=[];this.eachCursor(a,u),d(u[u.length-1])&&u.push(`default`),this.canvas.view.style.cursor=u.map(a=>d(a)?`url(${a.url}) ${a.x||0} ${a.y||0}`:a).join(`,`)}eachCursor(a,u,h=0){if(h++,l(a))a.forEach(a=>this.eachCursor(a,u,h));else{let xC=i(a)&&St$1.get(a);xC&&h<2?this.eachCursor(xC,u,h):u.push(a)}}destroy(){this.view&&(super.destroy(),this.view=null,this.touches=null)}};function Bt(a,u,h){a.__.__font?Pt$2.fillText(a,u,h):a.__.windingRule?u.fill(a.__.windingRule):u.fill()}function Tt(a,u,h,xC,SC){let CC=h.__;d(a)?Pt$2.drawStrokesStyle(a,u,!1,h,xC,SC):(xC.setStroke(a,CC.__strokeWidth*u,CC),xC.stroke()),CC.__useArrow&&Pt$2.strokeArrow(a,h,xC,SC)}function Lt(a,u,h,xC,SC){let CC=h.__;d(a)?Pt$2.drawStrokesStyle(a,u,!0,h,xC,SC):(xC.setStroke(a,CC.__strokeWidth*u,CC),Pt$2.drawTextStroke(h,xC,SC))}function Et(a,u,h,xC,SC){let CC=xC.getSameCanvas(!0,!0);CC.font=h.__.__font,Lt(a,2,h,CC,SC),CC.blendMode=u===`outside`?`destination-out`:`destination-in`,Pt$2.fillText(h,CC,SC),CC.blendMode=`normal`,io.copyCanvasByWorld(h,xC,CC),CC.recycle(h.__nowWorld)}var{getSpread:Rt,copyAndSpread:Pt,toOuterOf:Mt,getOuterOf:Ct,getByMove:At,move:Ot,getIntersectData:Dt}=Ut$3,Wt={},It,{stintSet:Ft}=_,{hasTransparent:zt}=At$2;function jt(a,u,h){if(!d(u)||!1===u.visible||u.opacity===0)return;let xC,{boxBounds:SC}=h.__layout;switch(u.type){case`image`:xC=Ft$2.image(h,a,u,SC,!It||!It[u.url]);break;case`linear`:xC=Wt$2.linearGradient(u,SC);break;case`radial`:xC=Wt$2.radialGradient(u,SC);break;case`angular`:xC=Wt$2.conicGradient(u,SC);break;case`solid`:let{type:CC,color:wC,opacity:TC}=u;xC={type:CC,style:At$2.string(wC,TC)};break;default:s(u.r)||(xC={type:`solid`,style:At$2.string(u)})}if(xC&&(xC.originPaint=u,i(xC.style)&&zt(xC.style)&&(xC.isTransparent=!0),u.style)){if(u.style.strokeWidth===0)return;xC.strokeStyle=u.style}return xC}var Ut={compute:function(a,u){let h=u.__,xC=[],SC,CC,wC,TC=h.__input[a];l(TC)||(TC=[TC]),It=Ft$2.recycleImage(a,h);for(let h,SC=0,CC=TC.length;SC<CC;SC++)(h=jt(a,TC[SC],u))&&(xC.push(h),h.strokeStyle&&(wC||=1,h.strokeStyle.strokeWidth&&(wC=Math.max(wC,h.strokeStyle.strokeWidth))));h[`_`+a]=xC.length?xC:void 0,xC.length?(xC.every(a=>a.isTransparent)&&(xC.some(a=>a.image)&&(SC=!0),CC=!0),a===`fill`?(Ft(h,`__isAlphaPixelFill`,SC),Ft(h,`__isTransparentFill`,CC)):(Ft(h,`__isAlphaPixelStroke`,SC),Ft(h,`__isTransparentStroke`,CC),Ft(h,`__hasMultiStrokeStyle`,wC))):h.__removePaint(a,!1)},fill:function(a,u,h,xC){h.fillStyle=a,Bt(u,h,xC)},fills:function(a,u,h,xC){let SC,CC,wC;for(let TC=0,EC=a.length;TC<EC;TC++){if(SC=a[TC],CC=SC.originPaint,SC.image){if(wC?wC++:wC=1,Ft$2.checkImage(SC,!u.__.__font,u,h,xC))continue;if(!SC.style){wC===1&&SC.image.isPlacehold&&u.drawImagePlaceholder(SC,h,xC);continue}}if(h.fillStyle=SC.style,SC.transform||CC.scaleFixed){if(h.save(),SC.transform&&h.transform(SC.transform),CC.scaleFixed){let{scaleX:a,scaleY:xC}=u.getRenderScaleData(!0);(!0===CC.scaleFixed||CC.scaleFixed===`zoom-in`&&a>1&&xC>1)&&h.scale(1/a,1/xC)}CC.blendMode&&(h.blendMode=CC.blendMode),Bt(u,h,xC),h.restore()}else CC.blendMode?(h.saveBlendMode(CC.blendMode),Bt(u,h,xC),h.restoreBlendMode()):Bt(u,h,xC)}},fillPathOrText:Bt,fillText:function(a,u,h){let xC=a.__,{rows:SC,decorationY:CC}=xC.__textDrawData,wC;xC.__isPlacehold&&xC.placeholderColor&&(u.fillStyle=xC.placeholderColor);for(let a=0,h=SC.length;a<h;a++)wC=SC[a],wC.text?u.fillText(wC.text,wC.x,wC.y):wC.data&&wC.data.forEach(a=>{u.fillText(a.char,a.x,wC.y)});if(CC){let{decorationColor:a,decorationHeight:h}=xC.__textDrawData;a&&(u.fillStyle=a),SC.forEach(a=>CC.forEach(xC=>u.fillRect(a.x,a.y+xC,a.width,h)))}},stroke:function(a,u,h,xC){let SC=u.__;if(SC.__strokeWidth)if(SC.__font)Pt$2.strokeText(a,u,h,xC);else switch(SC.strokeAlign){case`center`:Tt(a,1,u,h,xC);break;case`inside`:(function(a,u,h,xC){h.save(),h.clipUI(u),Tt(a,2,u,h,xC),h.restore()})(a,u,h,xC);break;case`outside`:(function(a,u,h,xC){let SC=u.__;if(SC.__fillAfterStroke)Tt(a,2,u,h,xC);else{let{renderBounds:CC}=u.__layout,wC=h.getSameCanvas(!0,!0);u.__drawRenderPath(wC),Tt(a,2,u,wC,xC),wC.clipUI(SC),wC.clearWorld(CC),io.copyCanvasByWorld(u,h,wC),wC.recycle(u.__nowWorld)}})(a,u,h,xC)}},strokes:function(a,u,h,xC){Pt$2.stroke(a,u,h,xC)},strokeText:function(a,u,h,xC){switch(u.__.strokeAlign){case`center`:Lt(a,1,u,h,xC);break;case`inside`:Et(a,`inside`,u,h,xC);break;case`outside`:u.__.__fillAfterStroke?Lt(a,2,u,h,xC):Et(a,`outside`,u,h,xC)}},drawTextStroke:function(a,u,h){let xC,SC=a.__.__textDrawData,{rows:CC,decorationY:wC}=SC;for(let a=0,h=CC.length;a<h;a++)xC=CC[a],xC.text?u.strokeText(xC.text,xC.x,xC.y):xC.data&&xC.data.forEach(a=>{u.strokeText(a.char,a.x,xC.y)});if(wC){let{decorationHeight:a}=SC;CC.forEach(h=>wC.forEach(xC=>u.strokeRect(h.x,h.y+xC,h.width,a)))}},drawStrokesStyle:function(a,u,h,xC,SC,CC){let wC,TC=xC.__,{__hasMultiStrokeStyle:EC}=TC;EC||SC.setStroke(void 0,TC.__strokeWidth*u,TC);for(let DC=0,OC=a.length;DC<OC;DC++)if(wC=a[DC],(!wC.image||!Ft$2.checkImage(wC,!1,xC,SC,CC))&&wC.style){if(EC){let{strokeStyle:a}=wC;a?SC.setStroke(wC.style,TC.__getRealStrokeWidth(a)*u,TC,a):SC.setStroke(wC.style,TC.__strokeWidth*u,TC)}else SC.strokeStyle=wC.style;wC.originPaint.blendMode?(SC.saveBlendMode(wC.originPaint.blendMode),h?Pt$2.drawTextStroke(xC,SC,CC):SC.stroke(),SC.restoreBlendMode()):h?Pt$2.drawTextStroke(xC,SC,CC):SC.stroke()}},shape:function(a,u,h){let xC=u.getSameCanvas(),SC=u.bounds,CC=a.__nowWorld,wC=a.__layout,TC=a.__nowWorldShapeBounds||={},EC,DC,OC,kC,AC,jC;Mt(wC.strokeSpread?(Pt(Wt,wC.boxBounds,wC.strokeSpread),Wt):wC.boxBounds,CC,TC);let{scaleX:MC,scaleY:NC}=a.getRenderScaleData(!0);if(SC.includes(TC))jC=xC,EC=AC=TC,DC=CC;else{let xC;xC=m.fullImageShadow?TC:Dt(wC.renderShapeSpread?Rt(SC,T.swapAndScale(wC.renderShapeSpread,MC,NC)):SC,TC),kC=SC.getFitMatrix(xC);let{a:PC,d:FC}=kC;kC.a<1&&(jC=u.getSameCanvas(),a.__renderShape(jC,h),MC*=PC,NC*=FC),AC=Ct(TC,kC),EC=At(AC,-kC.e,-kC.f),DC=Ct(CC,kC),Ot(DC,-kC.e,-kC.f);let IC=h.matrix;IC?(OC=new gt$1(kC),OC.multiply(IC),PC*=IC.scaleX,FC*=IC.scaleY):OC=kC,OC.withScale(PC,FC),h=Object.assign(Object.assign({},h),{matrix:OC})}return a.__renderShape(xC,h),{canvas:xC,matrix:OC,fitMatrix:kC,bounds:EC,renderBounds:DC,worldCanvas:jC,shapeBounds:AC,scaleX:MC,scaleY:NC}}},Gt,Yt=new Vt$3,{isSame:Xt}=Ut$3;function Vt(a,u,h,xC,SC,CC){if(u===`fill`&&!a.__.__naturalWidth){let u=a.__;if(u.__naturalWidth=xC.width/u.pixelRatio,u.__naturalHeight=xC.height/u.pixelRatio,u.__autoSide)return a.forceUpdate(`width`),a.__proxyData&&(a.setProxyAttr(`width`,u.width),a.setProxyAttr(`height`,u.height)),!1}return SC.data||Ft$2.createData(SC,xC,h,CC),!0}function Ht(a,u){Kt(a,No.LOAD,u)}function Nt(a,u){Kt(a,No.LOADED,u)}function qt(a,u,h){u.error=h,a.forceUpdate(`surface`),Kt(a,No.ERROR,u)}function Kt(a,u,h){a.hasEvent(u)&&a.emitEvent(new No(u,h))}function Qt(a,u){let{leafer:h}=a;h&&h.viewReady&&(h.renderer.ignore=u)}var{get:$t,translate:Zt}=$$1,Jt=new Vt$3,te={},ee={};function ie(a,u,h,xC){let SC=i(a)||xC?(xC?h-xC*u:h%u)/((xC||Math.floor(h/u))-1):a;return a===`auto`&&SC<0?0:SC}var se={},ne=j$1(),{get:oe,set:re,rotateOfOuter:ae,translate:he,scaleOfOuter:le,multiplyParent:ce,scale:de,rotate:ue,skew:fe}=$$1;function pe(a,u,h,xC,SC,CC,wC,TC){wC&&ue(a,wC),TC&&fe(a,TC.x,TC.y),SC&&de(a,SC,CC),he(a,u.x+h,u.y+xC)}function ge(a,u,h,xC){return new(h||=Promise)(function(SC,CC){function wC(a){try{EC(xC.next(a))}catch(a){CC(a)}}function TC(a){try{EC(xC.throw(a))}catch(a){CC(a)}}function EC(a){var u;a.done?SC(a.value):(u=a.value,u instanceof h?u:new h(function(a){a(u)})).then(wC,TC)}EC((xC=xC.apply(a,u||[])).next())})}var{get:_e,scale:we,copy:me}=$$1,{getFloorScale:ve}=N$1,{abs:ye}=Math,xe={image:function(a,u,h,xC,SC){let CC,wC,TC=Zi$1.get(h);return Gt&&h===Gt.paint&&Xt(xC,Gt.boxBounds)?CC=Gt.leafPaint:(CC={type:h.type,image:TC},TC.hasAlphaPixel&&(CC.isTransparent=!0),Gt=TC.use>1?{leafPaint:CC,paint:h,boxBounds:Yt.set(xC)}:null),(SC||TC.loading)&&(wC={image:TC,attrName:u,attrValue:h}),TC.ready?(Vt(a,u,h,TC,CC,xC),SC&&(Ht(a,wC),Nt(a,wC))):TC.error?SC&&qt(a,wC,TC.error):(SC&&(Qt(a,!0),Ht(a,wC)),CC.loadId=TC.load(()=>{Qt(a,!1),a.destroyed||(Vt(a,u,h,TC,CC,xC)&&(TC.hasAlphaPixel&&(a.__layout.hitCanvasChanged=!0),a.forceUpdate(`surface`)),Nt(a,wC)),CC.loadId=void 0},u=>{Qt(a,!1),qt(a,wC,u),CC.loadId=void 0}),a.placeholderColor&&(a.placeholderDelay?setTimeout(()=>{TC.ready||(TC.isPlacehold=!0,a.forceUpdate(`surface`))},a.placeholderDelay):TC.isPlacehold=!0)),CC},checkImage:function(a,u,h,xC,SC){let{scaleX:CC,scaleY:wC}=Ft$2.getImageRenderScaleData(a,h,xC,SC),{image:TC,data:EC,originPaint:DC}=a,{exporting:OC}=SC;return!(!EC||a.patternId===CC+`-`+wC&&!OC)&&(u&&(EC.repeat?u=!1:DC.changeful||m.name===`miniapp`&&jo.isResizing(h)||OC||(u=m.image.isLarge(TC,CC,wC))),u?(h.__.__isFastShadow&&(xC.fillStyle=a.style||`#000`,xC.fill()),Ft$2.drawImage(a,CC,wC,h,xC,SC),!0):(!a.style||DC.sync||OC?Ft$2.createPattern(a,h,xC,SC):Ft$2.createPatternTask(a,h,xC,SC),!1))},drawImage:function(a,u,h,xC,SC,CC){let{data:wC,image:TC}=a,{blendMode:EC}=a.originPaint,{opacity:DC,transform:OC}=wC,kC=TC.getFull(wC.filters),AC=xC.__,jC,{width:MC,height:NC}=TC;(jC=OC&&!OC.onlyScale||AC.path||AC.cornerRadius)||DC||EC?(SC.save(),jC&&SC.clipUI(xC),EC&&(SC.blendMode=EC),DC&&(SC.opacity*=DC),OC&&SC.transform(OC),SC.drawImage(kC,0,0,MC,NC),SC.restore()):(wC.scaleX&&(MC*=wC.scaleX,NC*=wC.scaleY),SC.drawImage(kC,0,0,MC,NC))},getImageRenderScaleData:function(a,u,h,xC){let SC=u.getRenderScaleData(!0,a.originPaint.scaleFixed),{data:CC}=a;if(h){let{pixelRatio:a}=h;SC.scaleX*=a,SC.scaleY*=a}return CC&&CC.scaleX&&(SC.scaleX*=Math.abs(CC.scaleX),SC.scaleY*=Math.abs(CC.scaleY)),SC},recycleImage:function(a,u){let h=u[`_`+a];if(l(h)){let xC,SC,CC,wC,TC;for(let EC=0,DC=h.length;EC<DC;EC++)xC=h[EC],SC=xC.image,TC=SC&&SC.url,TC&&(CC||={},CC[TC]=!0,Zi$1.recycle(SC),SC.loading&&(wC||(wC=u.__input&&u.__input[a]||[],l(wC)||(wC=[wC])),SC.unload(h[EC].loadId,!wC.some(a=>a.url===TC))));return CC}return null},createPatternTask:function(a,u,h,xC){a.patternTask||=Zi$1.patternTasker.add(()=>ge(this,void 0,void 0,function*(){a.patternTask=null,h.bounds.hit(u.__nowWorld)&&Ft$2.createPattern(a,u,h,xC),u.forceUpdate(`surface`)}),300)},createPattern:function(a,u,h,xC){let{scaleX:SC,scaleY:CC}=Ft$2.getImageRenderScaleData(a,u,h,xC),wC=SC+`-`+CC;if(a.patternId!==wC&&!u.destroyed&&(!m.image.isLarge(a.image,SC,CC)||a.data.repeat)){let{image:h,data:xC}=a,{transform:TC,gap:EC}=xC,DC=Ft$2.getPatternFixScale(a,SC,CC),OC,kC,AC,{width:jC,height:MC}=h;DC&&(SC*=DC,CC*=DC),jC*=SC,MC*=CC,EC&&(kC=EC.x*SC/ye(xC.scaleX||1),AC=EC.y*CC/ye(xC.scaleY||1)),(TC||SC!==1||CC!==1)&&(SC*=ve(jC+(kC||0)),CC*=ve(MC+(AC||0)),OC=_e(),TC&&me(OC,TC),we(OC,1/SC,1/CC));let NC=h.getCanvas(jC,MC,xC.opacity,xC.filters,kC,AC,u.leafer&&u.leafer.config.smooth);a.style=h.getPattern(NC,xC.repeat||m.origin.noRepeat||`no-repeat`,OC,a),a.patternId=wC}},getPatternFixScale:function(a,u,h){let{image:xC}=a,SC,CC=m.image.maxPatternSize,wC=xC.width*xC.height;return xC.isSVG?u>1&&(SC=Math.ceil(u)/u):CC>wC&&(CC=wC),(wC*=u*h)>CC&&(SC=Math.sqrt(CC/wC)),SC},createData:function(a,u,h,xC){a.data=Ft$2.getPatternData(h,xC,u)},getPatternData:function(a,u,h){a.padding&&(u=Jt.set(u).shrink(a.padding)),a.mode===`strench`&&(a.mode=`stretch`);let{width:xC,height:SC}=h,{opacity:CC,mode:wC,align:TC,offset:EC,scale:DC,size:OC,rotation:kC,skew:AC,clipSize:jC,repeat:MC,gap:NC,filters:PC}=a,FC=u.width===xC&&u.height===SC,IC={mode:wC},RC=TC!==`center`&&(kC||0)%180==90,zC,BC;switch(Ut$3.set(ee,0,0,RC?SC:xC,RC?xC:SC),wC&&wC!==`cover`&&wC!==`fit`?((DC||OC)&&(N$1.getScaleData(DC,OC,h,te),zC=te.scaleX,BC=te.scaleY),(TC||NC||MC)&&(zC&&Ut$3.scale(ee,zC,BC,!0),TC&&Ot$3.toPoint(TC,ee,u,ee,!0,!0))):FC&&!kC||(zC=BC=Ut$3.getFitScale(u,ee,wC!==`fit`),Ut$3.put(u,h,TC,zC,!1,ee),Ut$3.scale(ee,zC,BC,!0)),EC&&lt$2.move(ee,EC),wC){case`stretch`:FC?zC&&=BC=void 0:(zC=u.width/xC,BC=u.height/SC,Ft$2.stretchMode(IC,u,zC,BC));break;case`normal`:case`clip`:if(ee.x||ee.y||zC||jC||kC||AC){let a,h;jC&&(a=u.width/jC.width,h=u.height/jC.height),Ft$2.clipMode(IC,u,ee.x,ee.y,zC,BC,kC,AC,a,h),a&&(zC=zC?zC*a:a,BC=BC?BC*h:h)}break;case`repeat`:(!FC||zC||kC||AC)&&Ft$2.repeatMode(IC,u,xC,SC,ee.x,ee.y,zC,BC,kC,AC,TC,a.freeTransform),MC||(IC.repeat=`repeat`);let h=d(MC);(NC||h)&&(IC.gap=function(a,u,h,xC,SC){let CC,wC;return d(a)?(CC=a.x,wC=a.y):CC=wC=a,{x:ie(CC,h,SC.width,u&&u.x),y:ie(wC,xC,SC.height,u&&u.y)}}(NC,h&&MC,ee.width,ee.height,u));break;default:zC&&Ft$2.fillOrFitMode(IC,u,ee.x,ee.y,zC,BC,kC)}return IC.transform||(u.x||u.y)&&Zt(IC.transform=$t(),u.x,u.y),zC&&(IC.scaleX=zC,IC.scaleY=BC),CC&&CC<1&&(IC.opacity=CC),PC&&(IC.filters=PC),MC&&(IC.repeat=i(MC)?MC===`x`?`repeat-x`:`repeat-y`:`repeat`),IC},stretchMode:function(a,u,h,xC){let SC=oe(),{x:CC,y:wC}=u;CC||wC?he(SC,CC,wC):SC.onlyScale=!0,de(SC,h,xC),a.transform=SC},fillOrFitMode:function(a,u,h,xC,SC,CC,wC){let TC=oe();he(TC,u.x+h,u.y+xC),de(TC,SC,CC),wC&&ae(TC,{x:u.x+u.width/2,y:u.y+u.height/2},wC),a.transform=TC},clipMode:function(a,u,h,xC,SC,CC,wC,TC,EC,DC){let OC=oe();pe(OC,u,h,xC,SC,CC,wC,TC),EC&&(wC||TC?(re(ne),le(ne,u,EC,DC),ce(OC,ne)):le(OC,u,EC,DC)),a.transform=OC},repeatMode:function(a,u,h,xC,SC,CC,wC,TC,EC,DC,OC,kC){let AC=oe();if(kC)pe(AC,u,SC,CC,wC,TC,EC,DC);else{if(EC)if(OC===`center`)ae(AC,{x:h/2,y:xC/2},EC);else switch(ue(AC,EC),EC){case 90:he(AC,xC,0);break;case 180:he(AC,h,xC);break;case 270:he(AC,0,h)}se.x=u.x+SC,se.y=u.y+CC,he(AC,se.x,se.y),wC&&le(AC,se,wC,TC)}a.transform=AC}},{toPoint:be}=vt$2,{hasTransparent:Se}=At$2,ke={},Be={};function Te(a,u,h,xC){if(h){let SC,CC,wC,TC;for(let a=0,EC=h.length;a<EC;a++)SC=h[a],i(SC)?(wC=a/(EC-1),CC=At$2.string(SC,xC)):(wC=SC.offset,CC=At$2.string(SC.color,xC)),u.addColorStop(wC,CC),!TC&&Se(CC)&&(TC=!0);TC&&(a.isTransparent=!0)}}var{getAngle:Le,getDistance:Ee}=lt$2,{get:Re,rotateOfOuter:Pe,scaleOfOuter:Me}=$$1,{toPoint:Ce}=vt$2,Ae={},Oe={};function De(a,u,h,xC,SC){let CC,{width:wC,height:TC}=a;if(wC!==TC||xC){let a=Le(u,h);CC=Re(),SC?(Me(CC,u,wC/TC*(xC||1),1),Pe(CC,u,a+90)):(Me(CC,u,1,wC/TC*(xC||1)),Pe(CC,u,a))}return CC}var{getDistance:We}=lt$2,{toPoint:Ie}=vt$2,Fe={},ze={},je={linearGradient:function(a,u){let{from:h,to:xC,type:SC,opacity:CC}=a;be(h||`top`,u,ke),be(xC||`bottom`,u,Be);let wC=m.canvas.createLinearGradient(ke.x,ke.y,Be.x,Be.y),TC={type:SC,style:wC};return Te(TC,wC,a.stops,CC),TC},radialGradient:function(a,u){let{from:h,to:xC,type:SC,opacity:CC,stretch:wC}=a;Ce(h||`center`,u,Ae),Ce(xC||`bottom`,u,Oe);let TC=m.canvas.createRadialGradient(Ae.x,Ae.y,0,Ae.x,Ae.y,Ee(Ae,Oe)),EC={type:SC,style:TC};Te(EC,TC,a.stops,CC);let DC=De(u,Ae,Oe,wC,!0);return DC&&(EC.transform=DC),EC},conicGradient:function(a,u){let{from:h,to:xC,type:SC,opacity:CC,stretch:wC}=a;Ie(h||`center`,u,Fe),Ie(xC||`bottom`,u,ze);let TC=m.conicGradientSupport?m.canvas.createConicGradient(0,Fe.x,Fe.y):m.canvas.createRadialGradient(Fe.x,Fe.y,0,Fe.x,Fe.y,We(Fe,ze)),EC={type:SC,style:TC};Te(EC,TC,a.stops,CC);let DC=De(u,Fe,ze,wC||1,m.conicGradientRotate90);return DC&&(EC.transform=DC),EC},getTransform:De},{copy:Ue,move:Ge,toOffsetOutBounds:Ye}=Ut$3,{max:Xe,abs:Ve}=Math,He={},Ne=new gt$1,qe={};function Ke(a,u){let h,xC,SC,CC,wC=0,TC=0,EC=0,DC=0;return u.forEach(a=>{h=a.x||0,xC=a.y||0,CC=1.5*(a.blur||0),SC=Ve(a.spread||0),wC=Xe(wC,SC+CC-xC),TC=Xe(TC,SC+CC+h),EC=Xe(EC,SC+CC+xC),DC=Xe(DC,SC+CC-h)}),wC===TC&&TC===EC&&EC===DC?wC:[wC,TC,EC,DC]}function Qe(a,u,h){let{shapeBounds:xC}=h,SC,CC;m.fullImageShadow?(Ue(He,a.bounds),Ge(He,u.x-xC.x,u.y-xC.y),SC=a.bounds,CC=He):(SC=xC,CC=u),a.copyWorld(h.canvas,SC,CC)}var{toOffsetOutBounds:$e}=Ut$3,Ze={},ti={shadow:function(a,u,h){let xC,SC,{__nowWorld:CC}=a,{shadow:wC}=a.__,{worldCanvas:TC,bounds:EC,renderBounds:DC,shapeBounds:OC,scaleX:kC,scaleY:AC}=h,jC=u.getSameCanvas(),MC=wC.length-1;Ye(EC,qe,DC),wC.forEach((wC,NC)=>{let PC=1;if(wC.scaleFixed){let a=Math.abs(CC.scaleX);a>1&&(PC=1/a)}jC.setWorldShadow(qe.offsetX+(wC.x||0)*kC*PC,qe.offsetY+(wC.y||0)*AC*PC,(wC.blur||0)*kC*PC,At$2.string(wC.color)),SC=Tt$2.getShadowTransform(a,jC,h,wC,qe,PC),SC&&jC.setTransform(SC),Qe(jC,qe,h),SC&&jC.resetTransform(),xC=DC,wC.box&&(jC.restore(),jC.save(),TC&&(jC.copyWorld(jC,DC,CC,`copy`),xC=CC),TC?jC.copyWorld(TC,CC,CC,`destination-out`):jC.copyWorld(h.canvas,OC,EC,`destination-out`)),io.copyCanvasByWorld(a,u,jC,xC,wC.blendMode),MC&&NC<MC&&jC.clearWorld(xC)}),jC.recycle(xC)},innerShadow:function(a,u,h){let xC,SC,{__nowWorld:CC}=a,{innerShadow:wC}=a.__,{worldCanvas:TC,bounds:EC,renderBounds:DC,shapeBounds:OC,scaleX:kC,scaleY:AC}=h,jC=u.getSameCanvas(),MC=wC.length-1;$e(EC,Ze,DC),wC.forEach((wC,NC)=>{let PC=1;if(wC.scaleFixed){let a=Math.abs(CC.scaleX);a>1&&(PC=1/a)}jC.save(),jC.setWorldShadow(Ze.offsetX+(wC.x||0)*kC*PC,Ze.offsetY+(wC.y||0)*AC*PC,(wC.blur||0)*kC*PC),SC=Tt$2.getShadowTransform(a,jC,h,wC,Ze,PC,!0),SC&&jC.setTransform(SC),Qe(jC,Ze,h),jC.restore(),TC?(jC.copyWorld(jC,DC,CC,`copy`),jC.copyWorld(TC,CC,CC,`source-out`),xC=CC):(jC.copyWorld(h.canvas,OC,EC,`source-out`),xC=DC),jC.fillWorld(xC,At$2.string(wC.color),`source-in`),io.copyCanvasByWorld(a,u,jC,xC,wC.blendMode),MC&&NC<MC&&jC.clearWorld(xC)}),jC.recycle(xC)},blur:function(a,u,h){let{blur:xC}=a.__;h.setWorldBlur(xC*a.__nowWorld.a),h.copyWorldToInner(u,a.__nowWorld,a.__layout.renderBounds),h.filter=`none`},backgroundBlur:function(a,u,h){},getShadowRenderSpread:Ke,getShadowTransform:function(a,u,h,xC,SC,CC,wC){if(xC.spread){let h=2*xC.spread*CC*(wC?-1:1),{width:TC,height:EC}=a.__layout.strokeBounds;return Ne.set().scaleOfOuter({x:(SC.x+SC.width/2)*u.pixelRatio,y:(SC.y+SC.height/2)*u.pixelRatio},1+h/TC,1+h/EC),Ne}},isTransformShadow(a){},getInnerShadowSpread:Ke},{excludeRenderBounds:ei}=_o,ii;function si(a,u,h,xC,SC,CC,wC,TC){switch(u){case`grayscale`:ii||(ii=!0,SC.useGrayscaleAlpha(a.__nowWorld));case`alpha`:(function(a,u,h,xC,SC,CC){let wC=a.__nowWorld;h.resetTransform(),h.opacity=1,h.useMask(xC,wC),CC&&xC.recycle(wC),oi(a,u,h,1,SC,CC)})(a,h,xC,SC,wC,TC);break;case`opacity-path`:oi(a,h,xC,CC,wC,TC);break;case`path`:TC&&h.restore()}}function ni(a){return a.getSameCanvas(!1,!0)}function oi(a,u,h,xC,SC,CC){let wC=a.__nowWorld;u.resetTransform(),u.opacity=xC,u.copyWorld(h,wC,void 0,SC),CC?h.recycle(wC):h.clearWorld(wC)}ge$1.prototype.__renderMask=function(a,u){let h,xC,SC,CC,wC,TC,{children:EC}=this;for(let DC=0,OC=EC.length;DC<OC;DC++){if(h=EC[DC],TC=h.__.mask,TC){wC&&(si(this,wC,a,SC,xC,CC,void 0,!0),xC=SC=null),TC!==`clipping`&&TC!==`clipping-path`||ei(h,u)||h.__render(a,u),CC=h.__.opacity,ii=!1,TC===`path`||TC===`clipping-path`?(CC<1?(wC=`opacity-path`,SC||=ni(a)):(wC=`path`,a.save()),h.__clip(SC||a,u)):(wC=TC===`grayscale`?`grayscale`:`alpha`,xC||=ni(a),SC||=ni(a),h.__render(xC,u));continue}let OC=CC===1&&h.__.__blendMode;OC&&si(this,wC,a,SC,xC,CC,void 0,!1),ei(h,u)||h.__render(SC||a,u),OC&&si(this,wC,a,SC,xC,CC,OC,!1)}si(this,wC,a,SC,xC,CC,void 0,!0)};var ri=`>)]}%!?,.:;'"`,ai=ri+`_#~&*+\\=|`,hi=new RegExp([[19968,40959],[13312,19903],[131072,173791],[173824,177983],[177984,178207],[178208,183983],[183984,191471],[196608,201551],[201552,205743],[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12736,12783],[12800,13055],[13056,13311],[63744,64255],[65072,65103],[127488,127743],[194560,195103]].map(([a,u])=>`[\\u${a.toString(16)}-\\u${u.toString(16)}]`).join(`|`));function li(a){let u={};return a.split(``).forEach(a=>u[a]=!0),u}var ci=li(`ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz`),di=li(`{[(<'"`),ui=li(ri),fi=li(ai),pi=li(`- `),gi;(function(a){a[a.Letter=0]=`Letter`,a[a.Single=1]=`Single`,a[a.Before=2]=`Before`,a[a.After=3]=`After`,a[a.Symbol=4]=`Symbol`,a[a.Break=5]=`Break`})(gi||={});var{Letter:_i,Single:wi,Before:mi,After:vi,Symbol:yi,Break:xi}=gi;function bi(a){return ci[a]?_i:pi[a]?xi:di[a]?mi:ui[a]?vi:fi[a]?yi:hi.test(a)?wi:_i}var Si={trimRight(a){let{words:u}=a,h,xC=0,SC=u.length;for(let CC=SC-1;CC>-1&&(h=u[CC].data[0],h.char===` `);CC--)xC++,a.width-=h.width;xC&&u.splice(SC-xC,xC)}};function ki(a,u,h){switch(u){case`title`:return h?a.toUpperCase():a;case`upper`:return a.toUpperCase();case`lower`:return a.toLowerCase();default:return a}}var{trimRight:Bi}=Si,{Letter:Ti,Single:Li,Before:Ei,After:Ri,Symbol:Pi,Break:Mi}=gi,Ci,Ai,Oi,Di,Wi,Ii,Fi,zi,ji,Ui,Gi,Yi,Xi,Vi,Hi,Ni,qi,Ki=[];function Qi(a,u){ji&&!zi&&(zi=ji),Ci.data.push({char:a,width:u}),Oi+=u}function $i(){Di+=Oi,Ci.width=Oi,Ai.words.push(Ci),Ci={data:[]},Oi=0}function Zi(){Vi&&=(Hi.paraNumber++,Ai.paraStart=!0,!1),ji&&(Ai.startCharSize=zi,Ai.endCharSize=ji,zi=0),Ai.width=Di,Ni.width?Bi(Ai):qi&&Ji(),Ki.push(Ai),Ai={words:[]},Di=0}function Ji(){Di>(Hi.maxWidth||0)&&(Hi.maxWidth=Di)}var{top:ts,right:es,bottom:is,left:ss}=wt$2;function ns(a,u,h){let{bounds:xC,rows:SC}=a;xC[u]+=h;for(let a=0;a<SC.length;a++)SC[a][u]+=h}Object.assign(Bt$2,{getDrawData:function(a,u){i(a)||(a=String(a));let h=0,xC=0,SC=u.__getInput(`width`)||0,CC=u.__getInput(`height`)||0,{__padding:wC}=u;wC&&(SC?(h=wC[ss],SC-=wC[es]+wC[ss],!SC&&(SC=.01)):u.autoSizeAlign||(h=wC[ss]),CC?(xC=wC[ts],CC-=wC[ts]+wC[is],!CC&&(CC=.01)):u.autoSizeAlign||(xC=wC[ts]));let TC={bounds:{x:h,y:xC,width:SC,height:CC},rows:[],paraNumber:0,font:m.canvas.font=u.__font};return function(a,u,h){Hi=a,Ki=a.rows,Ni=a.bounds,qi=!Ni.width&&!h.autoSizeAlign;let{__letterSpacing:xC,paraIndent:SC,textCase:CC}=h,{canvas:wC}=m,{width:TC}=Ni;if(h.__isCharMode){let a=h.textWrap!==`none`,EC=h.textWrap===`break`;Vi=!0,Gi=null,zi=Fi=ji=Oi=Di=0,Ci={data:[]},Ai={words:[]},xC&&(u=[...u]);for(let h=0,DC=u.length;h<DC;h++)Ii=u[h],Ii===`
`?(Oi&&$i(),Ai.paraEnd=!0,Zi(),Vi=!0):(Ui=bi(Ii),Ui===Ti&&CC!==`none`&&(Ii=ki(Ii,CC,!Oi)),Fi=wC.measureText(Ii).width,xC&&(xC<0&&(ji=Fi),Fi+=xC),Yi=Ui===Li&&(Gi===Li||Gi===Ti)||Gi===Li&&Ui!==Ri,Xi=!(Ui!==Ei&&Ui!==Li||Gi!==Pi&&Gi!==Ri),Wi=Vi&&SC?TC-SC:TC,a&&TC&&Di+Oi+Fi>Wi&&(EC?(Oi&&$i(),Di&&Zi()):(Xi||=Ui===Ti&&Gi==Ri,(Yi||Xi||Ui===Mi||Ui===Ei||Ui===Li||Oi+Fi>Wi)&&Oi&&$i(),Di&&Zi())),Ii===` `&&!0!==Vi&&Di+Oi===0||(Ui===Mi?(Ii===` `&&Oi&&$i(),Qi(Ii,Fi),$i()):((Yi||Xi)&&Oi&&$i(),Qi(Ii,Fi))),Gi=Ui);Oi&&$i(),Di&&Zi(),Ki.length>0&&(Ki[Ki.length-1].paraEnd=!0)}else u.split(`
`).forEach(a=>{Hi.paraNumber++,Di=wC.measureText(a).width,Ki.push({x:SC||0,text:a,width:Di,paraStart:!0}),qi&&Ji()})}(TC,a,u),wC&&function(a,u,h,xC,SC){if(!xC&&h.autoSizeAlign)switch(h.textAlign){case`left`:ns(u,`x`,a[ss]);break;case`right`:ns(u,`x`,-a[es])}if(!SC&&h.autoSizeAlign)switch(h.verticalAlign){case`top`:ns(u,`y`,a[ts]);break;case`bottom`:ns(u,`y`,-a[is])}}(wC,TC,u,SC,CC),function(a,u){let{rows:h,bounds:xC}=a,SC=h.length,{__lineHeight:CC,__baseLine:wC,__letterSpacing:TC,__clipText:EC,textAlign:DC,verticalAlign:OC,paraSpacing:kC,autoSizeAlign:AC}=u,{x:jC,y:MC,width:NC,height:PC}=xC,FC=CC*SC+(kC?kC*(a.paraNumber-1):0),IC=wC;if(EC&&FC>PC)FC=Math.max(PC,CC),SC>1&&(a.overflow=SC);else if(PC||AC)switch(OC){case`middle`:MC+=(PC-FC)/2;break;case`bottom`:MC+=PC-FC}IC+=MC;let LC,RC,zC,BC=NC||AC?NC:a.maxWidth;for(let wC=0,OC=SC;wC<OC;wC++){if(LC=h[wC],LC.x=jC,LC.width<NC||LC.width>NC&&!EC)switch(DC){case`center`:LC.x+=(BC-LC.width)/2;break;case`right`:LC.x+=BC-LC.width}LC.paraStart&&kC&&wC>0&&(IC+=kC),LC.y=IC,IC+=CC,a.overflow>wC&&IC>FC&&(LC.isOverflow=!0,a.overflow=wC+1),RC=LC.x,zC=LC.width,TC<0&&(LC.width<0?(zC=-LC.width+u.fontSize+TC,RC-=zC,zC+=u.fontSize):zC-=TC),RC<xC.x&&(xC.x=RC),zC>xC.width&&(xC.width=zC),EC&&NC&&NC<zC&&(LC.isOverflow=!0,a.overflow||=h.length)}xC.y=MC,xC.height=FC}(TC,u),u.__isCharMode&&function(a,u,h){let{rows:xC}=a,{textAlign:SC,paraIndent:CC,letterSpacing:wC}=u,TC=h&&SC.includes(`both`),EC=TC||h&&SC.includes(`justify`),DC=EC&&SC.includes(`letter`),OC,kC,AC,jC,MC,NC,PC,FC,IC,LC;xC.forEach(a=>{a.words&&=(MC=CC&&a.paraStart?CC:0,FC=a.words.length,EC&&(LC=!a.paraEnd||TC,kC=h-a.width-MC,DC?jC=kC/(a.words.reduce((a,u)=>a+u.data.length,0)-1):AC=FC>1?kC/(FC-1):0),NC=wC||a.isOverflow||DC?0:AC?1:2,a.isOverflow&&!wC&&(a.textMode=!0),NC===2?(a.x+=MC,function(a){a.text=``,a.words.forEach(u=>{u.data.forEach(u=>{a.text+=u.char})})}(a)):(a.x+=MC,OC=a.x,a.data=[],a.words.forEach((u,h)=>{NC===1?(PC={char:``,x:OC},OC=function(a,u,h){return a.forEach(a=>{h.char+=a.char,u+=a.width}),u}(u.data,OC,PC),(a.isOverflow||PC.char!==` `)&&a.data.push(PC)):OC=function(a,u,h,xC,SC){return a.forEach(a=>{(xC||a.char!==` `)&&(a.x=u,h.push(a)),u+=a.width,SC&&(u+=SC)}),u}(u.data,OC,a.data,a.isOverflow,LC&&jC),LC&&(IC=h===FC-1,AC?IC||(OC+=AC,a.width+=AC):jC&&(a.width+=jC*(u.data.length-(IC?1:0))))})),null)})}(TC,u,SC),TC.overflow&&function(a,u,h,xC){if(!xC)return;let{rows:SC,overflow:CC}=a,{textOverflow:wC}=u;if(SC.splice(CC),wC&&wC!==`show`){let a,TC;wC===`hide`?wC=``:wC===`ellipsis`&&(wC=`...`);let EC=wC?m.canvas.measureText(wC).width:0,DC=h+xC-EC;(u.textWrap===`none`?SC:[SC[CC-1]]).forEach(u=>{if(u.isOverflow&&u.data){let h=u.data.length-1;for(let xC=h;xC>-1&&(a=u.data[xC],TC=a.x+a.width,!(xC===h&&TC<DC));xC--){if(TC<DC&&a.char!==` `||!xC){u.data.splice(xC+1),u.width-=a.width;break}u.width-=a.width}u.width+=EC,u.data.push({char:wC,x:TC}),u.textMode&&function(a){a.text=``,a.data.forEach(u=>{a.text+=u.char}),a.data=null}(u)}})}}(TC,u,h,SC),u.textDecoration!==`none`&&function(a,u){let h,xC=0,{fontSize:SC,textDecoration:CC}=u;switch(a.decorationHeight=SC/11,d(CC)?(h=CC.type,CC.color&&(a.decorationColor=At$2.string(CC.color)),CC.offset&&(xC=Math.min(.3*SC,Math.max(CC.offset,.15*-SC)))):h=CC,h){case`under`:a.decorationY=[.15*SC+xC];break;case`delete`:a.decorationY=[.35*-SC];break;case`under-delete`:a.decorationY=[.15*SC+xC,.35*-SC]}}(TC,u),TC}}),Object.assign(At$2,{string:function(a,u){if(!a)return`#000`;let h=o(u)&&u<1;if(i(a)){if(!h||!At$2.object)return a;a=At$2.object(a)}let xC=s(a.a)?1:a.a;h&&(xC*=u);let SC=a.r+`,`+a.g+`,`+a.b;return xC===1?`rgb(`+SC+`)`:`rgba(`+SC+`,`+xC+`)`}}),Object.assign(Pt$2,Ut),Object.assign(Ft$2,xe),Object.assign(Wt$2,je),Object.assign(Tt$2,ti),Object.assign(oe$2,{interaction:(a,u,h,xC)=>new kt(a,u,h,xC),hitCanvas:(a,u)=>new J(a,u),hitCanvasManager:()=>new kt$1}),it();var _hoisted_1$2={class:`tetris-container`},_hoisted_2={class:`game-info`},_hoisted_3={class:`score-board`},_hoisted_4={class:`controls`},ROWS=20,COLS=10,BLOCK_SIZE=30,TICK_RATE=500,game_default=_plugin_vue_export_helper_default({__name:`game`,setup(a){let h=[[[1,1,1,1]],[[1,1],[1,1]],[[0,1,0],[1,1,1]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]],[[0,1,1],[1,1,0]],[[1,1,0],[0,1,1]]],CC=[null,`#00FFFF`,`#FFFF00`,`#800080`,`#FFA500`,`#0000FF`,`#00FF00`,`#FF0000`],wC=ref(0),OC=ref(!0),AC=ref(!1),jC=null,MC=null,NC=[],PC=null,FC=null,IC=()=>{jC=new fe$1({view:`leafer-view`,width:COLS*BLOCK_SIZE,height:ROWS*BLOCK_SIZE,fill:`#1a1a1a`}),MC=new ge$1,jC.add(MC),LC()},LC=()=>{let a=new ge$1({opacity:.1});for(let u=0;u<=COLS;u++)a.add(new we$1({x:u*BLOCK_SIZE,y:0,width:1,height:ROWS*BLOCK_SIZE,fill:`#fff`}));for(let u=0;u<=ROWS;u++)a.add(new we$1({x:0,y:u*BLOCK_SIZE,width:COLS*BLOCK_SIZE,height:1,fill:`#fff`}));jC.add(a)},RC=()=>{NC=Array.from({length:ROWS},()=>Array(COLS).fill(0))},zC=()=>{let a=Math.floor(Math.random()*h.length),u=h[a];PC={shape:u,colorIndex:a+1,x:Math.floor(COLS/2)-Math.floor(u[0].length/2),y:0},BC(0,0,PC.shape)&&YC()},BC=(a,u,h)=>{for(let xC=0;xC<h.length;xC++)for(let SC=0;SC<h[xC].length;SC++)if(h[xC][SC]){let h=PC.x+SC+a,CC=PC.y+xC+u;if(h<0||h>=COLS||CC>=ROWS||CC>=0&&NC[CC][h]!==0)return!0}return!1},VC=a=>a[0].map((u,h)=>a.map(a=>a[h]).reverse()),HC=()=>{PC.shape.forEach((a,u)=>{a.forEach((a,h)=>{if(a){let a=PC.y+u,xC=PC.x+h;a>=0&&(NC[a][xC]=PC.colorIndex)}})}),UC(),zC(),WC()},UC=()=>{let a=0;for(let u=ROWS-1;u>=0;u--)NC[u].every(a=>a!==0)&&(NC.splice(u,1),NC.unshift(Array(COLS).fill(0)),a++,u++);a>0&&(wC.value+=a*100)},WC=()=>{if(MC){MC.clear();for(let a=0;a<ROWS;a++)for(let u=0;u<COLS;u++)NC[a][u]&&MC.add(new we$1({x:u*BLOCK_SIZE,y:a*BLOCK_SIZE,width:BLOCK_SIZE-1,height:BLOCK_SIZE-1,fill:CC[NC[a][u]],cornerRadius:2}));PC&&PC.shape.forEach((a,u)=>{a.forEach((a,h)=>{a&&MC.add(new we$1({x:(PC.x+h)*BLOCK_SIZE,y:(PC.y+u)*BLOCK_SIZE,width:BLOCK_SIZE-1,height:BLOCK_SIZE-1,fill:CC[PC.colorIndex],cornerRadius:2,shadow:{x:2,y:2,blur:4,color:`rgba(0,0,0,0.3)`}}))})})}},GC=(a,u)=>{OC.value||AC.value||(BC(a,u,PC.shape)?u>0&&HC():(PC.x+=a,PC.y+=u,WC()))},KC=()=>{if(OC.value||AC.value)return;let a=VC(PC.shape);BC(0,0,a)?BC(-1,0,a)?BC(1,0,a)||(PC.x+=1,PC.shape=a):(--PC.x,PC.shape=a):PC.shape=a,WC()},qC=()=>{RC(),wC.value=0,OC.value=!1,AC.value=!1,zC(),WC(),FC&&clearInterval(FC),FC=setInterval(()=>GC(0,1),TICK_RATE)},JC=()=>{OC.value||(AC.value=!AC.value,AC.value?clearInterval(FC):FC=setInterval(()=>GC(0,1),TICK_RATE))},YC=()=>{OC.value=!0,clearInterval(FC),alert(`! : ${wC.value}`)},XC=a=>{if(!OC.value)switch(a.code){case`ArrowLeft`:GC(-1,0);break;case`ArrowRight`:GC(1,0);break;case`ArrowDown`:GC(0,1);break;case`ArrowUp`:KC();break;case`Space`:JC();break}};return onMounted(()=>{IC(),window.addEventListener(`keydown`,XC)}),onUnmounted(()=>{jC&&jC.destroy(),FC&&clearInterval(FC),window.removeEventListener(`keydown`,XC)}),(a,h)=>(openBlock(),createElementBlock(`div`,_hoisted_1$2,[createBaseVNode(`div`,_hoisted_2,[h[0]||=createBaseVNode(`h1`,null,`Leafer Tetris`,-1),createBaseVNode(`div`,_hoisted_3,[createBaseVNode(`p`,null,`: `+toDisplayString(wC.value),1),createBaseVNode(`p`,null,`: `+toDisplayString(OC.value?``:AC.value?``:``),1)]),createBaseVNode(`div`,_hoisted_4,[OC.value?(openBlock(),createElementBlock(`button`,{key:0,onClick:qC},``)):(openBlock(),createElementBlock(`button`,{key:1,onClick:JC},toDisplayString(AC.value?``:``),1))]),h[1]||=createBaseVNode(`div`,{class:`tips`},[createBaseVNode(`p`,null,`:  | : `),createBaseVNode(`p`,null,` :  | Space: `)],-1)]),h[2]||=createBaseVNode(`div`,{id:`leafer-view`,class:`canvas-area`},null,-1)]))}},[[`__scopeId`,`data-v-c15c1133`]]),_hoisted_1$1={class:`flow-chart-container`},process_default=_plugin_vue_export_helper_default(defineComponent({__name:`process`,setup(a){let u={nodeWidth:120,nodeHeight:50,gapX:100,gapY:30,nodeColor:`#EBF5FF`,strokeColor:`#3B82F6`,endNodeColor:`#F1F5F9`,endNodeStroke:`#64748B`},h=ref(null),CC=shallowRef(null),wC=ref({id:`root`,label:``,children:[]}),AC=ref({x:0,y:0}),jC=()=>Math.random().toString(36).substr(2,9),MC=(a,u)=>{let h=a.children.findIndex(a=>a.id===u);if(h!==-1)return a.children.splice(h,1),!0;for(let h of a.children)if(MC(h,u))return!0;return!1},NC=(a,u)=>{if(a.id===u)return a.children.push({id:jC(),label:` ${Math.floor(Math.random()*100)}`,children:[]}),!0;for(let h of a.children)if(NC(h,u))return!0;return!1},PC=a=>{if(a.children.length===0){a.height=u.nodeHeight;return}let h=0;a.children.forEach(a=>{PC(a),h+=a.height+u.gapY}),h-=u.gapY,a.height=Math.max(u.nodeHeight,h)},FC=0,IC=(a,h,xC)=>{let SC=xC+(a.height-u.nodeHeight)/2;a.x=h,a.y=SC,h>FC&&(FC=h);let CC=xC;a.children.forEach(a=>{IC(a,h+u.nodeWidth+u.gapX,CC),CC+=a.height+u.gapY})},LC=()=>{FC=0,PC(wC.value),IC(wC.value,50,50),AC.value={x:FC+u.nodeWidth+u.gapX,y:wC.value.y}},RC=(a,u,h,xC)=>{let SC=a+(h-a)/2;return[new hi$1({stroke:`#94A3B8`,strokeWidth:2,path:`M ${a} ${u} L ${SC} ${u} L ${SC} ${xC} L ${h} ${xC}`}),new hi$1({fill:`#94A3B8`,path:`M ${h} ${xC} L ${h-6} ${xC-4} L ${h-6} ${xC+4} Z`})]},zC=(a,h)=>{if(!CC.value)return;let xC=new ge$1({x:a.x,y:a.y});if(h&&h.x!==void 0&&h.y!==void 0){let xC=h.x+u.nodeWidth,SC=h.y+u.nodeHeight/2,wC=a.x;RC(xC,SC,wC,a.y+u.nodeHeight/2).forEach(a=>CC.value.tree.add(a))}if(a.children.length===0){let h=a.x+u.nodeWidth,xC=a.y+u.nodeHeight/2,SC=AC.value.x;RC(h,xC,SC,AC.value.y+u.nodeHeight/2).forEach(a=>CC.value.tree.add(a))}let SC=new we$1({width:u.nodeWidth,height:u.nodeHeight,fill:u.nodeColor,stroke:u.strokeColor,strokeWidth:2,cornerRadius:4,shadow:{x:2,y:2,blur:4,color:`rgba(0,0,0,0.1)`}}),TC=new _i$1({text:a.label,fontSize:14,fill:`#1E293B`,width:u.nodeWidth,height:u.nodeHeight,textAlign:`center`,verticalAlign:`middle`});xC.add(SC),xC.add(TC);let EC=new ge$1({x:u.nodeWidth-10,y:u.nodeHeight/2,cursor:`pointer`});if(EC.add(new Fe$1({width:20,height:20,x:-10,y:-10,fill:`#10B981`})),EC.add(new _i$1({text:`+`,fontSize:16,fill:`#fff`,x:-10,y:-10,width:20,height:20,textAlign:`center`,verticalAlign:`middle`})),EC.on(it$1.TAP,u=>{u.stop(),NC(wC.value,a.id),VC()}),xC.add(EC),a.id!==`root`){let h=new ge$1({x:u.nodeWidth,y:0,cursor:`pointer`});h.add(new Fe$1({width:16,height:16,x:-8,y:-8,fill:`#EF4444`})),h.add(new _i$1({text:`-`,fontSize:14,fill:`#fff`,x:-8,y:-9,width:16,height:16,textAlign:`center`,verticalAlign:`middle`})),h.on(it$1.TAP,u=>{u.stop(),MC(wC.value,a.id),VC()}),xC.add(h)}CC.value.tree.add(xC),a.children.forEach(u=>zC(u,a))},BC=()=>{if(!CC.value)return;let a=new ge$1({x:AC.value.x,y:AC.value.y}),h=new we$1({width:u.nodeWidth,height:u.nodeHeight,fill:u.endNodeColor,stroke:u.endNodeStroke,strokeWidth:2,cornerRadius:25,shadow:{x:2,y:2,blur:4,color:`rgba(0,0,0,0.1)`}}),xC=new _i$1({text:``,fontSize:14,fontWeight:`bold`,fill:`#475569`,width:u.nodeWidth,height:u.nodeHeight,textAlign:`center`,verticalAlign:`middle`});a.add(h),a.add(xC),CC.value.tree.add(a)},VC=()=>{CC.value&&(CC.value.tree.clear(),LC(),zC(wC.value),BC())};return onMounted(()=>{h.value&&(CC.value=new F({view:h.value,tree:{},fill:`#ffffff`,move:{scroll:!0}}),VC())}),onUnmounted(()=>{CC.value&&CC.value.destroy()}),(a,u)=>(openBlock(),createElementBlock(`div`,_hoisted_1$1,[createBaseVNode(`div`,{ref_key:`canvasContainer`,ref:h,class:`canvas-view`},null,512),u[0]||=createBaseVNode(`div`,{class:`controls`},[createBaseVNode(`p`,null,`:  "+" `)],-1)]))}}),[[`__scopeId`,`data-v-1f2e3144`]]),base_default=defineComponent({__name:`base`,setup(a){let u=null,h=ref(null),xC=()=>{u=new fe$1({view:h.value,fill:`#333`});let a=new we$1({x:100,y:200,width:100,height:100,fill:`#32cd79`,cornerRadius:[6,2,6,2],draggable:!0,event:{[it$1.ENTER]:function(a){a.current.fill=`red`},[it$1.LEAVE]:function(a){a.current.fill=`#32cd79`}}}),xC=new Ze$1({x:200,y:250,width:100,strokeWidth:5,stroke:`#32cd79`});u.add(a),u.add(xC)};return onMounted(()=>{xC()}),(a,u)=>(openBlock(),createElementBlock(`div`,{ref_key:`canvasContainer`,ref:h,class:`h-[600px] w-full`},null,512))}}),_hoisted_1={class:`h-full`},leaferjs_default=defineComponent({__name:`index`,setup(a){return(a,u)=>{let xC=ElTabPane,CC=ElTabs;return openBlock(),createElementBlock(`div`,_hoisted_1,[u[0]||=createBaseVNode(`h2`,{class:`title`},`Leafer `,-1),createVNode(CC,{"tab-position":`left`,style:{height:`600px`},class:`demo-tabs`},{default:withCtx(()=>[createVNode(xC,{label:``},{default:withCtx(()=>[createVNode(base_default)]),_:1}),createVNode(xC,{label:``},{default:withCtx(()=>[createVNode(game_default)]),_:1}),createVNode(xC,{label:``},{default:withCtx(()=>[createVNode(process_default)]),_:1})]),_:1})])}}});export{leaferjs_default as default};